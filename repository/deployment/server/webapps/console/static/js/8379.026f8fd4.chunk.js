"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[8379],{58379:(e,t,n)=>{n.d(t,{d:()=>k});var i=n(49748),a=n(55007),l=n(13692),o=n(1989),c=n(60486),r=n(40838),s=n(43974),d=n(51021),u=n(23146),p=n(87029),m=n(21257),f=n(54717),h=n(86105),A=n(6833),v=n(82406),g=n(43516),E=n(50699),y=n(44194),C=n(10479),I=n(59673),T=n(47245),_=n(12638),S=n(37077),b=n(26154),O=n(6567),P=n(9821),N=n(84548),R=n(35407),L=n(18723);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,l,o,c=[],r=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;r=!1}else for(;!(r=(i=l.call(n)).done)&&(c.push(i.value),c.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{if(!r&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var k=function(e){var t,n,U=e.advancedSearch,k=e.featureConfig,D=e.isLoading,Z=e.list,j=e.onApplicationDelete,M=e.onListItemClick,V=e.onEmptyListPlaceholderActionClick,x=e.onSearchQueryClear,z=e.searchQuery,B=e.selection,G=e.showListItemActions,$=e.isSetStrongerAuth,F=e.isRenderedOnPortal,H=e["data-testid"],K=e["data-componentid"],Y=(0,C.$)().t,Q=(0,T.I0)(),J=(0,T.v9)((function(e){return e.application.templates})),W=(0,T.v9)((function(e){var t;return null==e||null===(t=e.application)||void 0===t?void 0:t.groupedTemplates})),q=(0,T.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t?void 0:t.ui})),X=(0,T.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.tenantDomain})),ee=(0,m.z)().organizationType,te=(0,f.Z)(),ne=te.templates,ie=te.isExtensionTemplatesRequestLoading,ae=(0,a.EV)(null==k||null===(t=k.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),le=(0,a.EV)(null==k||null===(n=k.applications)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.delete),oe=w((0,y.useState)(!1),2),ce=oe[0],re=oe[1],se=w((0,y.useState)(void 0),2),de=se[0],ue=se[1],pe=w((0,y.useState)(!1),2),me=pe[0],fe=pe[1],he=w((0,y.useState)(!1),2),Ae=he[0],ve=he[1],ge=w((0,g.ZK)(),3),Ee=ge[0],ye=ge[1],Ce=ge[2],Ie=s.l.getInstance(),Te=(0,T.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t?void 0:t.applications}));(0,y.useEffect)((function(){void 0===J&&(ve(!0),L.e.getApplicationTemplates().finally((function(){ve(!1)})))}),[J,W]);var _e=function(e,t,n){if($){var i;if(null==q||null===(i=q.legacyMode)||void 0===i||!i.applicationListSystemApps){if(n===P.j.CONSOLE_APP_NAME)return void r.m.push({hash:"tab=".concat(l.w.LOGIN_FLOW),pathname:c.$.getPaths().get("CONSOLE_SETTINGS")});if(n===P.j.MY_ACCOUNT_APP_NAME)return void r.m.push({pathname:c.$.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:"#tab=".concat(ee===p.$B.SUBORGANIZATION?P.j.SUB_ORG_MY_ACCOUNT_LOGIN_FLOW_TAB:P.j.MY_ACCOUNT_LOGIN_FLOW_TAB)})}r.m.push({pathname:c.$.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:"?".concat(P.j.APP_STATE_STRONG_AUTH_PARAM_KEY,"=").concat(P.j.APP_STATE_STRONG_AUTH_PARAM_VALUE)})}else r.m.push({pathname:c.$.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:t===N.Ch.READ?"?".concat(P.j.APP_READ_ONLY_STATE_URL_SEARCH_PARAM_KEY,"=true"):""})},Se=function(){return z&&0===(null==Z?void 0:Z.totalResults)?y.createElement(g.$J,{action:y.createElement(g.Qj,{onClick:x},Y("console:develop.placeholders.emptySearchResult.action")),image:(0,o.jF)().emptySearch,imageSize:"tiny",title:Y("console:develop.placeholders.emptySearchResult.title"),subtitle:[Y("console:develop.placeholders.emptySearchResult.subtitles.0",{query:z}),Y("console:develop.placeholders.emptySearchResult.subtitles.1")],"data-testid":"".concat(H,"-empty-search-placeholder-icon")}):0===(null==Z?void 0:Z.totalResults)?y.createElement(g.$J,{className:F?"":"list-placeholder mr-0",action:V&&ee!==p.$B.SUBORGANIZATION&&y.createElement(a.di,{when:null==k||null===(e=k.applications)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},y.createElement(g.KM,{onClick:function(){Ie.publish(K+"-click-new-application-button"),V()}},y.createElement(b.Z,{name:"add"}),Y("applications:placeholders.emptyList.action"))),image:(0,o.jF)().newList,imageSize:"tiny",subtitle:[Y("applications:placeholders.emptyList.subtitles.0")],"data-testid":"".concat(H,"-empty-placeholder")}):null;var e};return y.createElement(y.Fragment,null,y.createElement(g.wQ,{className:"applications-table",externalSearch:U,isLoading:D||Ae||ie,actions:!$&&function(){if(G)return[{"data-testid":"".concat(H,"-item-edit-button"),hidden:function(){return!(0,h.cr)(null==k?void 0:k.applications,P.j.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))},icon:function(e){return(null==e?void 0:e.access)!==N.Ch.READ&&ae?"pencil alternate":"eye"},onClick:function(e,t){return _e(t.id,t.access,t.name)},popupText:function(e){return(null==e?void 0:e.access)!==N.Ch.READ&&ae?Y("common:edit"):Y("common:view")},renderer:"semantic-icon"},{"data-testid":"".concat(H,"-item-delete-button"),hidden:function(e){var t,n=X===c.$.getSuperTenant()&&q.systemAppsIdentifiers.includes(null==e?void 0:e.name),i=(null===(t=e.advancedConfigurations)||void 0===t?void 0:t.fragment)||!1;return!le||n||(null==e?void 0:e.access)===N.Ch.READ||!d.tZ.editApplication.showDeleteButton(e)||i},icon:function(){return"trash alternate"},onClick:function(e,t){re(!0),ue(t)},popupText:function(){return Y("common:delete")},renderer:"semantic-icon"}]}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,a="";if(new Set([P.j.CUSTOM_APPLICATION_SAML,P.j.CUSTOM_APPLICATION_OIDC,P.j.CUSTOM_APPLICATION_PASSIVE_STS]).has(e.templateId))a=J&&J instanceof Array&&J.length>0&&J.find((function(e){return e.id===P.j.CUSTOM_APPLICATION})).name;else{var l=J&&J instanceof Array&&J.length>0&&J.find((function(t){return t.id===e.templateId}));if(null!=l&&l.templateGroup){var o=l.templateGroup;a=W&&W instanceof Array&&W.length>0&&W.find((function(e){return e.id===o||e.templateGroup===o})).name}else{var c;a=J&&J instanceof Array&&(null==J?void 0:J.length)>0&&(null===(c=J.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.templateId)})))||void 0===c?void 0:c.name)}}return a||(a=null==ne||null===(n=ne.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.templateId)})))||void 0===n?void 0:n.name),y.createElement(_.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(H,"-item-heading")},e.image?y.createElement(g.JT,{size:"mini",name:e.name,image:e.image,spaced:"right","data-testid":"".concat(H,"-item-image")}):y.createElement(g.JT,{image:y.createElement(g.Xo,{name:e.name,size:"mini","data-testid":"".concat(H,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(H,"-item-image")}),y.createElement(_.Z.Content,null,e.name,(null===(t=e.advancedConfigurations)||void 0===t?void 0:t.fragment)&&y.createElement(S.Z,{size:"mini"},Y("applications:list.labels.fragment")),y.createElement(i.Z,{container:!0,spacing:1},y.createElement(i.Z,{alignItems:"flex-end"},y.createElement("div",null,a&&y.createElement(S.Z,{className:"no-margin-left",size:"mini"},a))),R.y.isChoreoApplication(e)&&y.createElement(i.Z,null,y.createElement("div",null,y.createElement(S.Z,{size:"mini",className:"choreo-label no-margin-left"},Y("extensions:develop.apiResource.managedByChoreoText")))),(0,h.cr)(Te,P.j.FEATURE_DICTIONARY.get("APPLICATION_OUTDATED_APP_BANNER"))&&R.y.isApplicationOutdated(e.applicationVersion,null!=e.clientId&&!(0,E.Z)(e.clientId))&&y.createElement(i.Z,null,y.createElement("div",null,y.createElement(S.Z,{size:"mini",className:"outdated-app-label"},Y("applications:forms.inboundOIDC.sections.outdatedApplications.label")))))))},title:Y("applications:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"inboundKey",id:"inboundKey",key:"inboundKey",render:function(e){var t,n="",i="";return null!=e&&e.clientId?null!=e&&e.issuer||null!=e&&e.realm||(n=e.clientId,t=N.B8.CLIENTID,i="client-id-label"):null!=e&&e.issuer&&(null!=e&&e.clientId||null!=e&&e.realm||(n=e.issuer,t=N.B8.ISSUER,i="issuer-label")),y.createElement(_.Z,{as:"h6","data-testid":"".concat(H,"-col-2-item-heading")},y.createElement(_.Z.Content,null,y.createElement(_.Z.Subheader,{"data-testid":"".concat(H,"-col-2-item-sub-heading")},n,t&&y.createElement(S.Z,{pointing:"left",size:"mini",className:i},t))))},title:Y("applications:list.columns.inboundKey")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:Y("applications:list.columns.actions")}],data:null==Z?void 0:Z.applications,onRowClick:function(e,t){_e(t.id,t.access,t.name),M&&M(e,t)},placeholders:Se(),selectable:B,showHeader:u.r.enableTableHeaders,transparent:!(D||Ae||ie)&&null!==Se(),"data-testid":H}),de&&y.createElement(g.cV,{primaryActionLoading:me,onClose:function(){return re(!1)},type:"negative",open:ce,assertionHint:Y("applications:confirmations.deleteApplication.assertionHint"),assertionType:"checkbox",primaryAction:Y("common:confirm"),secondaryAction:Y("common:cancel"),onSecondaryActionClick:function(){re(!1),ye(null)},onPrimaryActionClick:function(){return e=de.id,fe(!0),void(0,O.rw)(e).then((function(){Q((0,v.V_)({description:Y("applications:notifications.deleteApplication.success.description"),level:A.QU.SUCCESS,message:Y("applications:notifications.deleteApplication.success.message")})),re(!1),j()})).catch((function(e){e.response&&e.response.data&&e.response.data.description?Q(ye({description:e.response.data.description,level:A.QU.ERROR,message:Y("applications:notifications.deleteApplication.error.message")})):Q(ye({description:Y("applications:notifications.deleteApplication.genericError.description"),level:A.QU.ERROR,message:Y("applications:notifications.deleteApplication.genericError.message")}))})).finally((function(){fe(!1)}));var e},"data-testid":"".concat(H,"-delete-confirmation-modal"),closeOnDimmerClick:!1},R.y.isChoreoApplication(de)?y.createElement(y.Fragment,null,y.createElement(g.cV.Header,{"data-testid":"".concat(H,"-delete-confirmation-modal-header")},Y("applications:confirmations.deleteChoreoApplication.header")),y.createElement(g.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(H,"-delete-confirmation-modal-message")},Y("applications:confirmations.deleteChoreoApplication.message")),y.createElement(g.cV.Content,{"data-testid":"".concat(H,"-delete-confirmation-modal-content")},y.createElement("div",{className:"modal-alert-wrapper"}," ",Ee&&Ce),y.createElement(I.c,{i18nKey:"applications:confirmations.deleteChoreoApplication.content"},"Deleting this application will break the authentication flows and cause the associated Choreo application to be unusable with its credentials.",y.createElement("b",null,"Proceed at your own risk.")))):y.createElement(y.Fragment,null,y.createElement(g.cV.Header,{"data-testid":"".concat(H,"-delete-confirmation-modal-header")},Y("applications:confirmations.deleteApplication.header")),y.createElement(g.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(H,"-delete-confirmation-modal-message")},Y("applications:confirmations.deleteApplication.message")),y.createElement(g.cV.Content,{"data-testid":"".concat(H,"-delete-confirmation-modal-content")},y.createElement("div",{className:"modal-alert-wrapper"}," ",Ee&&Ce),Y("applications:confirmations.deleteApplication.content")))))};k.defaultProps={"data-componentid":"application","data-testid":"application-list",selection:!0,showListItemActions:!0}}}]);