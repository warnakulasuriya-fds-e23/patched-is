"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[735],{27044:(e,n,t)=>{t.d(n,{Z:()=>g});var r=t(33838),i=t(62919),a=t(44194),o=t(14517),l=t(87883),s=t(62808),u=t(49706),c=t(99769),d=t(90757);function m(e){return(0,d.ZP)("MuiTableContainer",e)}(0,c.Z)("MuiTableContainer",["root"]);var f=t(31549);const v=["className","component"],p=(0,u.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,n)=>n.root})({width:"100%",overflowX:"auto"}),g=a.forwardRef((function(e,n){const t=(0,s.Z)({props:e,name:"MuiTableContainer"}),{className:a,component:u="div"}=t,c=(0,i.Z)(t,v),d=(0,r.Z)({},t,{component:u}),g=(e=>{const{classes:n}=e;return(0,l.Z)({root:["root"]},m,n)})(d);return(0,f.jsx)(p,(0,r.Z)({ref:n,as:u,className:(0,o.Z)(g.root,a),ownerState:d},c))}))},22230:(e,n,t)=>{t.d(n,{W:()=>p});var r=t(25134),i=t(1989),a=t(90302),o=t(43516),l=t(44194),s=t(10479),u=t(12638),c=t(37077),d=t(47625),m=t(59870);function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return v(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var p=function(e){var n=e.totalRoleList,t=e.emptyRolesListPlaceholder,v=e["data-componentid"],p=(0,s.$)().t,g=f((0,l.useState)(a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),E=g[0],h=g[1],b=f((0,l.useState)(!0),2),C=b[0],S=b[1],y=f((0,l.useState)(!1),2),A=y[0],R=y[1],I=f((0,l.useState)(void 0),2),w=I[0],O=I[1],U=f((0,l.useState)(void 0),2),_=U[0],M=U[1],N=f((0,l.useState)(0),2),P=N[0],Z=N[1],T=f((0,l.useState)(void 0),2),L=T[0],x=T[1],D=f((0,l.useState)(void 0),2),k=D[0],H=D[1],V=[{key:void 0,text:p("roles:list.filterOptions.all"),value:void 0},{key:m.cv.APPLICATION,text:p("roles:list.filterOptions.applicationRoles"),value:m.cv.APPLICATION},{key:m.cv.ORGANIZATION,text:p("roles:list.filterOptions.organizationRoles"),value:m.cv.ORGANIZATION}];(0,l.useEffect)((function(){n&&(M(n),S(!1))}),[n]),(0,l.useEffect)((function(){var e=n;if(k&&(e=e.filter((function(e){return e.audienceType.toUpperCase()===k}))),L){var t=L.split("co")[1].trim().toLowerCase();e=e.filter((function(e){return e.display.toLowerCase().includes(t)}))}M(e)}),[L,k]),(0,l.useEffect)((function(){O(F(_))}),[P,E,_]);var F=function(e){return(null==e?void 0:e.length)>=0?e.slice(P,P+E):[]};return l.createElement(o.PS,{advancedSearch:l.createElement(r.n,{"data-componentid":"".concat(v,"-list-advanced-search"),onFilter:function(e){Z(0),R(!0),x(e)},disableSearchFilterDropdown:!0,filterAttributeOptions:[{key:0,text:p("roles:list.filterAttirbutes.name"),value:"displayName"}],filterAttributePlaceholder:p("roles:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:p("roles:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:p("roles:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:p("roles:advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co"}),listItemLimit:E,onItemsPerPageDropdownChange:function(e,n){h(n.value)},onPageChange:function(e,n){var t,r=null!==(t=null==n?void 0:n.activePage)&&void 0!==t?t:1;Z((r-1)*E)},showTopActionPanel:!0,rightActionPanel:l.createElement(d.Z,{"data-componentid":"".concat(v,"-list-filters-dropdown"),selection:!0,options:V,placeholder:p("roles:list.buttons.filterDropdown"),onChange:function(e,n){Z(0),R(!0),H(n.value)}}),showPagination:(null==_?void 0:_.length)>0,totalPages:Math.ceil((null==_?void 0:_.length)/E),totalListSize:null==_?void 0:_.length,isLoading:C,resetPagination:A},l.createElement(o.wQ,{loadingStateOptions:{imageType:"square"},columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return l.createElement(u.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(v,"-item-heading")},l.createElement(o.JT,{image:l.createElement(o.Xo,{name:e.display,size:"mini","data-componentid":"".concat(v,"-item-image-inner")}),size:"mini",spaced:"right","data-componentid":"".concat(v,"-item-image")}),l.createElement(u.Z.Content,null,null==e?void 0:e.display))},title:p("roles:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"audience",id:"audience",key:"audience",render:function(e){return l.createElement(c.Z,{size:"mini"},e.audienceType,e.audienceType.toUpperCase()===m.cv.APPLICATION?" | ".concat(e.audienceDisplay," "):"")},title:l.createElement("div",{className:"pl-3"},p("roles:list.columns.audience"))},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:null}],data:w,onRowClick:function(){},placeholders:(L||k)&&0===(null==w?void 0:w.length)?l.createElement(o.$J,{"data-componentid":"".concat(v,"-search-empty-placeholder"),image:(0,i.jF)().emptySearch,imageSize:"tiny",title:p("roles:readOnlyList.emptyPlaceholders.searchAndFilter.title"),subtitle:[p("roles:readOnlyList.emptyPlaceholders.searchAndFilter.subtitles.0"),p("roles:readOnlyList.emptyPlaceholders.searchAndFilter.subtitles.1")]}):0===(null==w?void 0:w.length)?t:null,"data-componentid":v}))};p.defaultProps={"data-componentid":"read-only-roles-list"}},78965:(e,n,t)=>{t.d(n,{q:()=>r});var r=function(e,n){var t="";if((null==e?void 0:e.length)>0){var r=e.find((function(e){return e.domain===n}));r&&(t=r.associationType)}return t}},70653:(e,n,t)=>{t.d(n,{I:()=>Me});var r=t(87449),i=t(17652),a=t(38480),o=t(27044),l=t(53080),s=t(88248),u=t(46461),c=t(9779),d=t(77659),m=t(40018),f=t(55007),v=t(70104),p=t(60486),g=t(40838),E=t(51021),h=t(46666),b=t(9183),C=t(78965),S=t(36940),y=t(6833),A=t(82406),R=t(16590),I=t(96334),w=t(43516),O=t(50699),U=t(84025),_=t.n(U),M=t(44194),N=t(10479),P=t(47245),Z=t(26154),T=t(89141),L=t(77757),x=t(12950),D=t(10909),k=t(62508),H=t(54274),V=t(80659),F=t(10319),Y=t(33839),j=t(59673),G=t(47018),q=t(92e3),B=t(6643);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function z(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==Q(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,n)||W(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,n){if(e){if("string"==typeof e)return K(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?K(e,n):void 0}}function K(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var X=function(e){var n,t=e.onAlertFired,r=e.user,i=e.handleUserUpdate,a=e.openChangePasswordModal,o=e.handleCloseChangePasswordModal,l=e.connectorProperties,s=e.handleForcePasswordResetTrigger,u=e["data-testid"],c=(0,N.$)().t,d=$((0,M.useState)(void 0),2),m=d[0],v=d[1],h=$((0,M.useState)(""),2),b=h[0],C=h[1],S=$((0,M.useState)(!1),2),A=S[0],R=S[1],O=$((0,M.useState)(!0),2),U=O[0],_=O[1],L=$((0,M.useState)(void 0),2),x=L[0],D=L[1],k=$((0,M.useState)(""),2),Q=k[0],K=k[1],X=$((0,M.useState)("setPassword"),2),J=X[0],ee=X[1],ne=$((0,I.cC)(),2),te=ne[0],re=ne[1],ie=$((0,M.useState)(void 0),2),ae=ie[0],oe=ie[1],le=$((0,M.useState)("false"),2),se=le[0],ue=le[1],ce=$((0,M.useState)(!1),2),de=ce[0],me=ce[1],fe=(0,P.v9)((function(e){return e.config.ui.features})),ve=(0,P.v9)((function(e){var n;return null==e||null===(n=e.config)||void 0===n||null===(n=n.ui)||void 0===n?void 0:n.primaryUserStoreDomainName})),pe=(0,f.EV)(null==fe||null===(n=fe.loginAndRegistration)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.feature),ge=(0,Y.W)().data;(0,M.useEffect)((function(){ge&&v((0,B.P_)(ge))}),[ge]),(0,M.useEffect)((function(){var e;R(!0);var n=null==r||null===(e=r.userName)||void 0===e?void 0:e.split("/"),t=(null==n?void 0:n.length)>1?n[0]:ve;H.w.getUserStoreRegEx(t,F.y8.PasswordRegEx).then((function(e){C(e)})).finally((function(){R(!1)}))}),[r]),(0,M.useEffect)((function(){l&&void 0===ae&&oe(l)}),[l]),(0,M.useEffect)((function(){if(ae&&Array.isArray(ae)&&(null==ae?void 0:ae.length)>0){var e,n=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=W(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw a}}}}(ae);try{for(n.s();!(e=n.n()).done;){var t=e.value;t.name===V.vH.RECOVERY_LINK_PASSWORD_RESET&&"true"===t.value&&ue(t.value)}}catch(r){n.e(r)}finally{n.f()}}}),[ae]);var Ee=function(){K(""),ee("setPassword"),D(void 0)},he=[{label:c("user:modals.changePasswordModal.passwordOptions.setPassword"),value:"setPassword"},{label:c("user:modals.changePasswordModal.passwordOptions.forceReset"),value:"forceReset"}],be=function(){g.m.push(p.$.getPaths().get("GOVERNANCE_CONNECTOR_EDIT").replace(":categoryId",V.vH.ACCOUNT_MANAGEMENT_CATEGORY_ID).replace(":connectorId",V.vH.ADMIN_FORCED_PASSWORD_RESET))},Ce=function(e){_(e)},Se=function(e){var n,t=null==e||null===(n=e.get("newPassword"))||void 0===n?void 0:n.toString();K(t)},ye=function(e,n){var t;(function(e){return m?U:H.w.validateInputAgainstRegEx(e,b)})(e)||(n.isValid=!1,null==n||null===(t=n.errorMessages)||void 0===t||t.push(c(m?"extensions:manage.features.user.addUser.validation.error.passwordValidation":"extensions:manage.features.user.addUser.validation.password")))},Ae=function(){return M.createElement(M.Fragment,null,M.createElement(T.Z.Row,null,M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:14},M.createElement(I.gN,{"data-testid":"user-mgt-edit-user-form-newPassword-input",className:"addon-field-wrapper",hidePassword:c("common:hidePassword"),label:c("user:forms.addUserForm.inputs.newPassword.label"),name:"newPassword",placeholder:c("user:forms.addUserForm.inputs.newPassword.placeholder"),required:!0,requiredErrorMessage:c("user:forms.addUserForm.inputs.newPassword.validations.empty"),showPassword:c("common:showPassword"),type:"password",value:"",listen:Se,loading:A,validation:ye}),m&&M.createElement(w.Tj,{password:Q,minLength:Number(null==m?void 0:m.minLength),maxLength:Number(null==m?void 0:m.maxLength),minNumbers:Number(null==m?void 0:m.minNumbers),minUpperCase:Number(null==m?void 0:m.minUpperCaseCharacters),minLowerCase:Number(null==m?void 0:m.minLowerCaseCharacters),minSpecialChr:Number(null==m?void 0:m.minSpecialCharacters),minUniqueChr:Number(null==m?void 0:m.minUniqueCharacters),maxConsecutiveChr:Number(null==m?void 0:m.maxConsecutiveCharacters),onPasswordValidate:Ce,translations:{case:Number(null==m?void 0:m.minUpperCaseCharacters)>0&&Number(null==m?void 0:m.minLowerCaseCharacters)>0?c("extensions:manage.features.user.addUser.validation.passwordCase",{minLowerCase:null==m?void 0:m.minLowerCaseCharacters,minUpperCase:null==m?void 0:m.minUpperCaseCharacters}):Number(null==m?void 0:m.minUpperCaseCharacters)>0?c("extensions:manage.features.user.addUser.validation.upperCase",{minUpperCase:null==m?void 0:m.minUpperCaseCharacters}):c("extensions:manage.features.user.addUser.validation.lowerCase",{minLowerCase:null==m?void 0:m.minLowerCaseCharacters}),consecutiveChr:c("extensions:manage.features.user.addUser.validation.consecutiveCharacters",{repeatedChr:null==m?void 0:m.maxConsecutiveCharacters}),length:c("extensions:manage.features.user.addUser.validation.passwordLength",{max:null==m?void 0:m.maxLength,min:null==m?void 0:m.minLength}),numbers:c("extensions:manage.features.user.addUser.validation.passwordNumeric",{min:null==m?void 0:m.minNumbers}),specialChr:c("extensions:manage.features.user.addUser.validation.specialCharacter",{specialChr:null==m?void 0:m.minSpecialCharacters}),uniqueChr:c("extensions:manage.features.user.addUser.validation.uniqueCharacters",{uniqueChr:null==m?void 0:m.minUniqueCharacters})}}))),M.createElement(T.Z.Row,null,M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:14},M.createElement(I.gN,{"data-testid":"user-mgt-edit-user-form-confirmPassword-input",className:"addon-field-wrapper",hidePassword:c("common:hidePassword"),label:c("user:forms.addUserForm.inputs.confirmPassword.label"),name:"confirmPassword",placeholder:c("user:forms.addUserForm.inputs.confirmPassword.placeholder"),required:!0,requiredErrorMessage:c("user:forms.addUserForm.inputs.confirmPassword.validations.empty"),showPassword:c("common:showPassword"),type:"password",value:"",listen:function(e){(null==e?void 0:e.get("newPassword"))!==(null==e?void 0:e.get("confirmPassword"))||""===(null==e?void 0:e.get("confirmPassword"))?void 0!==x&&D(void 0):D(!0)},validation:function(e,n,t){var r;(null==t?void 0:t.get("newPassword"))!==e&&(n.isValid=!1,D(!1),null==n||null===(r=n.errorMessages)||void 0===r||r.push(c("user:forms.addUserForm.inputs.confirmPassword.validations.mismatch")))}}),M.createElement("div",{className:"password-policy-description"},M.createElement(Z.Z,{className:void 0===x?"circle thin":x?"check circle":"remove circle",color:void 0===x?"grey":x?"green":"red",inverted:!0}),M.createElement("p",null,c("extensions:manage.features.user.addUser.validation.confirmPassword"))))))},Re=function(){return J&&"setPassword"===J?Ae():function(e){return null==e?void 0:e.map((function(e,n){if((null==e?void 0:e.name)===V.vH.RECOVERY_LINK_PASSWORD_RESET)return"true"===(null==e?void 0:e.value)?M.createElement(T.Z.Row,{key:n},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:14},M.createElement(w.v0,{key:n,hideDefaultIcon:!0,icon:"mail",content:c("extensions:manage.users.editUserProfile.resetPassword.changePasswordModal.emailResetWarning")}))):M.createElement(T.Z.Row,{key:n},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:14},M.createElement(w.v0,{hideDefaultIcon:!0,error:!0,key:n,content:M.createElement(M.Fragment,null,M.createElement(Z.Z,{color:"red",name:"times circle"}),M.createElement(j.c,{i18nKey:"extensions:manage.users.editUserProfile.resetPassword.changePasswordModal.passwordResetConfigDisabled"},"Password reset via recovery email is not enabled. Please make sure to enable it from",pe?M.createElement("a",{onClick:be,className:"ml-1 external-link link pointing primary"},"Login and Registration"):"Login and Registration"," configurations"))})))}))}(ae)};return M.createElement(G.Z,{"data-testid":u,open:a,size:"tiny"},M.createElement(G.Z.Header,null,c("user:modals.changePasswordModal.header")),M.createElement(G.Z.Content,null,M.createElement(I.Es,{"data-testid":"".concat(u,"-form"),onSubmit:function(e){"setPassword"===J?function(e){var n={Operations:[{op:"replace",value:{password:e.get("newPassword").toString()}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};me(!0),(0,q.gS)(r.id,n).then((function(){t({description:c("user:profile.notifications.changeUserPassword.success.description"),level:y.QU.SUCCESS,message:c("user:profile.notifications.changeUserPassword.success.message")}),o(),Ee(),i(r.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.detail?t({description:c("user:profile.notifications.changeUserPassword.error.description",{description:e.response.data.detail}),level:y.QU.ERROR,message:c("user:profile.notifications.changeUserPassword.error.message")}):(t({description:c("user:profile.notifications.changeUserPassword.genericError.description"),level:y.QU.ERROR,message:c("user:profile.notifications.changeUserPassword.genericError.message")}),o(),Ee())})).finally((function(){me(!1)}))}(e):function(){if("false"!==se){var e={Operations:[{op:"add",value:z({},E.k9.scim.systemSchema,{forcePasswordReset:!0})}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};me(!0),(0,q.gS)(r.id,e).then((function(){t({description:c("user:profile.notifications.forcePasswordReset.success.description"),level:y.QU.SUCCESS,message:c("user:profile.notifications.forcePasswordReset.success.message")}),s&&s(),Ee(),o(),i(r.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?t({description:e.response.data.description,level:y.QU.ERROR,message:c("user:profile.notifications.forcePasswordReset.error.message")}):(t({description:c("user:profile.notifications.forcePasswordReset.genericError.description"),level:y.QU.ERROR,message:c("user:profile.notifications.forcePasswordReset.genericError.message")}),Ee(),o())})).finally((function(){me(!1)}))}else t({description:c("user:profile.notifications.noPasswordResetOptions.error.description"),level:y.QU.WARNING,message:c("user:profile.notifications.noPasswordResetOptions.error.message")})}()},submitState:te},M.createElement(T.Z,null,(null==ae?void 0:ae.length)>1?M.createElement(M.Fragment,null,M.createElement(T.Z.Row,null,M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:14},M.createElement(I.gN,{"data-testid":"user-mgt-add-user-form-passwordOption-radio-button",type:"radio",label:c("user:forms.addUserForm.buttons.radioButton.label"),name:"passwordOption",default:"setPassword",listen:function(e){ee(e.get("passwordOption").toString())},children:he,value:"setPassword",tabIndex:4,maxWidth:60,width:60}))),Re(),M.createElement(T.Z.Row,null,M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:14},M.createElement(w.v0,{type:"warning",content:c("user:modals.changePasswordModal.message")})))):M.createElement(M.Fragment,null,Ae(),M.createElement(T.Z.Row,null,M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:14},M.createElement(w.v0,{type:"warning",content:c("user:modals.changePasswordModal.message")}))))))),M.createElement(G.Z.Actions,null,M.createElement(T.Z,null,M.createElement(T.Z.Row,{column:1},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:16},M.createElement(w.KM,{"data-testid":"".concat(u,"-save-button"),floated:"right",loading:de,disabled:de,onClick:function(){return re()}},c("user:modals.changePasswordModal.button")),M.createElement(w.Qj,{"data-testid":"".concat(u,"-cancel-button"),floated:"left",onClick:function(){o(),Ee()}},c("common:cancel")))))))};X.defaultProps={"data-testid":"user-mgt-change-password"};var J=t(92283),ee=t(51835),ne=t.n(ee),te=t(27975),re=t.n(te),ie=t(55900),ae=t.n(ie),oe=t(21555),le=t.n(oe),se=t(3621),ue=t.n(se),ce=t(5062),de=t.n(ce),me=t(11660),fe={};fe.styleTagTransform=de(),fe.setAttributes=le(),fe.insert=ae().bind(null,"head"),fe.domAPI=re(),fe.insertStyleElement=ue();ne()(me.Z,fe);me.Z&&me.Z.locals&&me.Z.locals;var ve=t(22669);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function ge(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=ye(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw a}}}}function he(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function be(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?he(Object(t),!0).forEach((function(n){Ce(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ce(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=pe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==pe(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Se(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,n)||ye(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,n){if(e){if("string"==typeof e)return Ae(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ae(e,n):void 0}}function Ae(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var Re=S.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS"),Ie=S.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE"),we=S.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAIL_ADDRESSES"),Oe=S.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE_NUMBERS"),Ue=S.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_MOBILE_NUMBERS"),_e=S.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_EMAIL_ADDRESSES"),Me=function(e){var n,t,U,H,V,F,Y,j,G,B,Q,z,$,W=e.adminUsername,K=e.onAlertFired,ee=e.user,ne=e.handleUserUpdate,te=e.isReadOnly,re=e.allowDeleteOnly,ie=e.connectorProperties,ae=e.isReadOnlyUserStoresLoading,oe=e.isReadOnlyUserStore,le=void 0!==oe&&oe,se=e.tenantAdmin,ue=e.editUserDisclaimerMessage,ce=e.adminUserType,de=void 0===ce?"None":ce,me=e.isUserManagedByParentOrg,fe=e["data-testid"],pe=void 0===fe?"user-mgt-user-profile":fe,he=(0,N.$)().t,ye=(0,P.I0)(),Ae=(0,P.v9)((function(e){return e.profile.profileSchemas})),Me=(0,P.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.providedUsername})),Ne=(0,P.v9)((function(e){return e.auth.isPrivilegedUser})),Pe=(0,P.v9)((function(e){var n;return null==e||null===(n=e.config)||void 0===n||null===(n=n.deployment)||void 0===n?void 0:n.tenant})),Ze=(0,P.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.tenants})),Te=(0,P.v9)((function(e){return e.global.supportedI18nLanguages})),Le=(0,P.v9)((function(e){var n;return null==e||null===(n=e.config)||void 0===n||null===(n=n.ui)||void 0===n?void 0:n.userSchemaURI})),xe=(0,P.v9)((function(e){return e.config.ui.features})),De=(0,f.EV)(null==xe||null===(n=xe.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),ke=null==xe||null===(t=xe.attributeDialects)||void 0===t||null===(t=t.disabledFeatures)||void 0===t?void 0:t.includes(v.Q.DISTINCT_ATTRIBUTE_PROFILES_FEATURE_FLAG),He=Se((0,M.useState)(new Map),2),Ve=He[0],Fe=He[1],Ye=Se((0,M.useState)(),2),je=Ye[0],Ge=Ye[1],qe=Se((0,M.useState)(),2),Be=qe[0],Qe=qe[1],ze=Se((0,M.useState)(!1),2),$e=ze[0],We=ze[1],Ke=Se((0,M.useState)(!1),2),Xe=Ke[0],Je=Ke[1],en=Se((0,M.useState)(void 0),2),nn=en[0],tn=en[1],rn=Se((0,M.useState)(void 0),2),an=rn[0],on=rn[1],ln=Se((0,M.useState)(!1),2),sn=ln[0],un=ln[1],cn=Se((0,M.useState)(!1),2),dn=cn[0],mn=cn[1],fn=Se((0,M.useState)({accountDisable:"false",accountLock:"false",forcePasswordReset:"false",isEmailVerificationEnabled:"false",isMobileVerificationByPrivilegeUserEnabled:"false",isMobileVerificationEnabled:"false"}),2),vn=fn[0],pn=fn[1],gn=Se((0,w.ZK)(),3),En=gn[0],hn=gn[1],bn=gn[2],Cn=Se((0,M.useState)([]),2),Sn=Cn[0],yn=Cn[1],An=Se((0,M.useState)(!1),2),Rn=An[0],In=An[1],wn=Se((0,M.useState)(""),2),On=wn[0],Un=wn[1],_n=Se((0,M.useState)(""),2),Mn=_n[0],Nn=_n[1],Pn=null==ee||null===(U=ee.meta)||void 0===U?void 0:U.created,Zn=null==ee||null===(H=ee.meta)||void 0===H?void 0:H.lastModified,Tn="true"===(null===(V=ee[E.x8.userProfileSchema])||void 0===V?void 0:V.accountLocked)||!0===(null===(F=ee[E.x8.userProfileSchema])||void 0===F?void 0:F.accountLocked),Ln=null===(Y=ee[E.x8.userProfileSchema])||void 0===Y?void 0:Y.lockedReason,xn="true"===(null===(j=ee[E.x8.userProfileSchema])||void 0===j?void 0:j.accountDisabled)||!0===(null===(G=ee[E.x8.userProfileSchema])||void 0===G?void 0:G.accountDisabled),Dn=null===(B=ee[E.x8.userProfileSchema])||void 0===B?void 0:B.oneTimePassword,kn=null!==(Q=null==ee||null===(z=ee.roles)||void 0===z?void 0:z.some((function(e){return e.display===h.$.adminRoleName})))&&void 0!==Q&&Q,Hn=Se((0,M.useState)(!1),2),Vn=Hn[0],Fn=Hn[1],Yn=Se((0,M.useState)({}),2),jn=Yn[0],Gn=Yn[1],qn=Se((0,M.useState)({}),2),Bn=qn[0],Qn=qn[1],zn=Se((0,M.useState)({}),2),$n=zn[0],Wn=zn[1],Kn=Se((0,M.useState)({}),2),Xn=Kn[0],Jn=Kn[1],et=(0,M.useMemo)((function(){return(0,ve.qO)(Ve,je)}),[je,Ve]);(0,M.useEffect)((function(){if(ie&&Array.isArray(ie)&&(null==ie?void 0:ie.length)>0){var e,n=be({},vn),t=Ee(ie);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(J.Qj.includes(r.name))"true"===r.value&&(n.forcePasswordReset=r.value);else{var i=J.eI[r.name];i&&(n[i]=r.value)}}}catch(a){t.e(a)}finally{t.f()}pn(n)}}),[ie]),(0,M.useEffect)((function(){yn(R.CommonUtils.getCountryList()),Nn((0,C.q)(Ze,Pe)),de===J.lu.INTERNAL&&null!==E.x8&&void 0!==E.x8&&E.x8.enableAdminPrivilegeRevokeOption&&lt()}),[]),(0,M.useEffect)((function(){var e,n=null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("META_VERSION"),t=[],r=[],i=Ee(R.ProfileUtils.flattenSchemas(ge(Ae)));try{for(i.s();!(e=i.n()).done;){var a=e.value;a.name!==n&&(a.extended&&a.multiValued&&a.type!==J.wi.COMPLEX&&r.push(a),t.push(a))}}catch(o){i.e(o)}finally{i.f()}t.sort((function(e,n){return(0,ve.KZ)(e)-(0,ve.KZ)(n)})),Ge(t),Qe(r)}),[Ae]),(0,M.useEffect)((function(){tt(je,ee)}),[je,ee]);var nt=(0,M.useCallback)((function(e){null!==e&&(e.children[0].children[1].children[0].role="presentation")}),[]),tt=function(e,n){if(!(0,O.Z)(je)&&!(0,O.Z)(n)){var t=new Map;de===J.lu.INTERNAL?e.forEach((function(e){var r=e.name.split(".");if(1===r.length)if("emails"===r[0]){var i=r[0];if(R.ProfileUtils.isStringArray(n[i])){var a=n[i].find((function(e){return"string"==typeof e}));t.set(e.name,a)}}else{var o,l,s,u=r[0];if(e.extended&&null!==(o=n[E.x8.userProfileSchema])&&void 0!==o&&o[r[0]]){if(J._F.MULTI_VALUED_ATTRIBUTES.includes(r[0])){var c,d=null===(c=n[E.x8.userProfileSchema])||void 0===c?void 0:c[r[0]],m=Array.isArray(d)?d.join(","):"";return void t.set(e.name,m)}return void t.set(e.name,n[E.x8.userProfileSchema][r[0]])}if(e.extended&&null!==(l=n[S.Cb.SCIM2_ENT_USER_SCHEMA])&&void 0!==l&&l[r[0]]){if(e.multiValued){var f,v=null===(f=n[S.Cb.SCIM2_ENT_USER_SCHEMA])||void 0===f?void 0:f[r[0]],p=Array.isArray(v)?v.join(","):"";return void t.set(e.name,p)}return void t.set(e.name,n[S.Cb.SCIM2_ENT_USER_SCHEMA][r[0]])}if(e.extended&&null!=n&&null!==(s=n[Le])&&void 0!==s&&s[r[0]]){if(e.multiValued){var g,h=null===(g=n[Le])||void 0===g?void 0:g[r[0]],b=Array.isArray(h)?h.join(","):"";return void t.set(e.name,b)}return void t.set(e.name,n[Le][r[0]])}t.set(e.name,n[u])}else if("name"===r[0]){var C=r[0],y=r[1];y&&n[C]&&n[C][y]&&t.set(e.name,n[C][y])}else{var A,I,w,O=r[0],U=r[1],_=null==n||null===(A=n[E.x8.userProfileSchema])||void 0===A||null===(A=A[O])||void 0===A?void 0:A[U],M=null==n||null===(I=n[S.Cb.SCIM2_ENT_USER_SCHEMA])||void 0===I||null===(I=I[O])||void 0===I?void 0:I[U],N=null==n||null===(w=n[Le])||void 0===w||null===(w=w[O])||void 0===w?void 0:w[U];if(e.extended&&(_||M||N))_?t.set(e.name,_):M&&e.multiValued?t.set(e.name,Array.isArray(M)?M.join(","):""):M?t.set(e.name,M):N&&e.multiValued?t.set(e.name,Array.isArray(N)?N.join(","):""):N&&t.set(e.name,N);else{var P=n[O]&&Array.isArray(n[O])&&n[O].find((function(e){return e.type===U}));if(O.includes("addresses")){var Z,T=null==e||null===(Z=e.name)||void 0===Z?void 0:Z.split(".")[1],L=null==O?void 0:O.split("#");if(L.length>1){var x=L[0],D=L[1],k=n[x]&&Array.isArray(n[x])&&n[x].find((function(e){return e.type===D}));t.set(e.name,k&&k[T]?k[T]:"")}else t.set(e.name,P?P.formatted:"")}else t.set(e.name,P?P.value:"")}}})):e.forEach((function(e){var r=e.name.split(".");if(1===r.length)if("emails"===r[0]){var i=r[0];if(R.ProfileUtils.isStringArray(n[i])){var a=n[i].find((function(e){return"string"==typeof e}));t.set(e.name,a)}}else{var o,l=r[0];if(e.extended&&n[E.x8.userProfileSchema]&&n[E.x8.userProfileSchema][r[0]]){if(J._F.MULTI_VALUED_ATTRIBUTES.includes(r[0])){var s,u=null===(s=n[E.x8.userProfileSchema])||void 0===s?void 0:s[r[0]],c=Array.isArray(u)?u.join(","):"";return void t.set(e.name,c)}return void t.set(e.name,n[E.x8.userProfileSchema][r[0]])}if(e.extended&&n[S.Cb.SCIM2_ENT_USER_SCHEMA]&&n[S.Cb.SCIM2_ENT_USER_SCHEMA][r[0]])return void t.set(e.name,n[S.Cb.SCIM2_ENT_USER_SCHEMA][r[0]]);if(e.extended&&null!=n&&null!==(o=n[Le])&&void 0!==o&&o[r[0]]){if(J._F.MULTI_VALUED_ATTRIBUTES.includes(r[0])){var d,m=null===(d=n[Le])||void 0===d?void 0:d[r[0]],f=Array.isArray(m)?m.join(","):"";return void t.set(e.name,f)}return void t.set(e.name,n[Le][r[0]])}t.set(e.name,n[l])}else if("name"===r[0]){var v=r[0],p=r[1];p&&n[v]&&n[v][p]&&t.set(e.name,n[v][p])}else{var g=r[0],h=r[1];if(e.extended&&n[E.x8.userProfileSchema])g&&h&&n[E.x8.userProfileSchema][g]&&n[E.x8.userProfileSchema][g][h]&&t.set(e.name,n[E.x8.userProfileSchema][g][h]);else if(e.extended&&n[S.Cb.SCIM2_ENT_USER_SCHEMA]&&n[S.Cb.SCIM2_ENT_USER_SCHEMA][g]){var b=n[S.Cb.SCIM2_ENT_USER_SCHEMA];t.set(e.name,b[g][h])}else{var C=n[g]&&Array.isArray(n[g])&&n[g].find((function(e){return e.type===h}));"addresses"===g?t.set(e.name,C?C.formatted:""):t.set(e.name,C?C.value:"")}}})),Fe(t)}};(0,M.useEffect)((function(){it(Ve)}),[Ve]);var rt,it=function(e){var n={},t={};if(null==Be||Be.forEach((function(t){var r=null==e?void 0:e.get(t.name);n[t.name]=r?r.split(","):[]})),et){var r=null==e?void 0:e.get(Re),i=null==e?void 0:e.get(Ie);if(!(0,O.Z)(r)){var a,o,l=null!==(a=null===(o=n[we])||void 0===o?void 0:o.filter((function(e){return!(0,O.Z)(e)&&e!==r})))&&void 0!==a?a:[];l.unshift(r),n[we]=l}if(!(0,O.Z)(i)){var s,u,c=null!==(s=null===(u=n[Oe])||void 0===u?void 0:u.filter((function(e){return!(0,O.Z)(e)&&e!==i})))&&void 0!==s?s:[];c.unshift(i),n[Oe]=c}t[Re]=r,t[Ie]=i}Qn(n),Wn(t)},at=function(e,n){var t=null==e?void 0:e.userName;return 0===t.length&&n?e.email:(t.split("/").length>1&&(t=t.split("/")[1]),t)},ot=function(e,n,t){if(!e)return e;var r=e.search(/[-_]/),i=e;if(-1!==r){var a=e.substring(0,r).toLowerCase(),o=e.substring(r+1).toUpperCase();i="".concat(a).concat(n).concat(o)}return t&&!Te[i]&&(Te[i]={code:i,name:J._F.GLOBE,namespaces:[]}),i},lt=function(){var e={filter:"displayName eq "+h.$.adminRoleName,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:0};(0,b.QW)(e).then((function(e){var n;if((null==e||null===(n=e.data)||void 0===n?void 0:n.Resources.length)>0){var t,r=null==e||null===(t=e.data)||void 0===t||null===(t=t.Resources[0])||void 0===t?void 0:t.id;Un(r)}})).catch((function(e){e.response&&e.response.data&&e.response.data.description?ye((0,A.V_)({description:e.response.data.description,level:y.QU.ERROR,message:he("users:notifications.getAdminRole.error.message")})):ye((0,A.V_)({description:he("users:notifications.getAdminRole.genericError.description"),level:y.QU.ERROR,message:he("users:notifications.getAdminRole.genericError.message")}))}))},st=function(e){var n={Operations:[],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]},t={op:"replace",value:{}};et&&(function(e){var n=je.find((function(e){return e.name===Ie}));if(!(0,ve.Ws)(n,me)){var t=$n[Ie],r=jn[Oe];null!=t&&e.set(Ie,t),(0,O.Z)(t)&&!(0,O.Z)(r)&&e.set(Ie,r)}var i=je.find((function(e){return e.name===Re}));if(!(0,ve.Ws)(i,me)){var a,o=null!==(a=$n[Re])&&void 0!==a?a:"",l=jn[we];null!=o&&e.set(Re,o),(0,O.Z)(o)&&!(0,O.Z)(l)&&e.set(Re,l)}}(e),function(e){var n,t,r=je.find((function(e){return e.name===_e}));if(et&&"true"===(null==vn?void 0:vn.isEmailVerificationEnabled)&&!(0,ve.Ws)(r,me)){var i=null!==(n=null==Ve||null===(t=Ve.get(_e))||void 0===t?void 0:t.split(","))&&void 0!==n?n:[],a=(0,ve.Qk)({primaryValue:null==Ve?void 0:Ve.get(Re),valueList:Bn[we],verifiedAttributeSchema:r,verifiedValueList:i});a&&e.Operations.push(a)}}(n),function(e){var n,t,r=je.find((function(e){return e.name===Ue}));if(et&&"true"===(null==vn?void 0:vn.isMobileVerificationEnabled)&&!(0,ve.Ws)(r,me)){var i=null!==(n=null==Ve||null===(t=Ve.get(Ue))||void 0===t?void 0:t.split(","))&&void 0!==n?n:[],a=(0,ve.Qk)({primaryValue:null==Ve?void 0:Ve.get(Ie),valueList:Bn[Oe],verifiedAttributeSchema:r,verifiedValueList:i});a&&e.Operations.push(a)}}(n)),de===J.lu.INTERNAL?je.forEach((function(r){var i,a,o=null!==(i=null==r||null===(a=r.profiles)||void 0===a||null===(a=a.console)||void 0===a?void 0:a.mutability)&&void 0!==i?i:r.mutability,l=null==r?void 0:r.sharedProfileValueResolvingMethod;if(!(o===S.Cb.READONLY_SCHEMA||me&&l==y.Hk.FROM_ORIGIN)&&ft(r)){var s={},u=r.name.split(".");if("roles.default"!==r.name&&void 0!==e.get(r.name)&&void 0!==e.get(r.name).toString())if(R.ProfileUtils.isMultiValuedSchemaAttribute(je,u[0])||"phoneNumbers"===u[0]){var c=[],d=new Map;if(1===u.length||2===u.length)if(r.extended)s=Ce({},r.schemaId,(0,ve.CU)(r.name,Bn[r.name],jn[r.name]));else{var m,f=Ee(e.keys());try{for(f.s();!(m=f.n()).done;){var v=m.value;v.split(".")[0]===u[0]&&d.set(v,e.get(v))}}catch(N){f.e(N)}finally{f.f()}var p,g=Ee(d);try{for(g.s();!(p=g.n()).done;){var h=Se(p.value,2),b=h[0],C=h[1],A=b.split(".");C&&""!==C&&(1===A.length?c.push(C):c.push({type:A[1],value:C}))}}catch(N){g.e(N)}finally{g.f()}s=Ce({},u[0],c)}}else if(1===u.length)if(r.extended){var I,w=null!=r&&r.schemaId?r.schemaId:E.x8.userProfileSchema;if("externalId"===r.name)s=Ce({},u[0],e.get(u[0]));else s=Ce({},w,Ce({},u[0],"BOOLEAN"===r.type.toUpperCase()?!(null===(I=e.get(r.name))||void 0===I||!I.includes(r.name)):e.get(u[0])))}else s=u[0]===J._F.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")?{emails:[e.get(r.name)]}:u[0]===J._F.SCIM2_SCHEMA_DICTIONARY.get("LOCALE")?Ce({},u[0],ot(e.get(u[0]),J.lJ.UNDERSCORE,!1)):Ce({},u[0],e.get(u[0]));else if(r.extended&&r.multiValued)s=Ce({},r.schemaId,Ce({},u[0],(0,ve.CU)(u[1],Bn[r.name],jn[r.name])));else if(r.extended){var O;s=Ce({},null!=r&&r.schemaId?r.schemaId:E.x8.userProfileSchema,Ce({},u[0],Ce({},u[1],"BOOLEAN"===r.type.toUpperCase()?!(null===(O=e.get(r.name))||void 0===O||!O.includes(r.name)):e.get(r.name))))}else if(u[0]===J._F.SCIM2_SCHEMA_DICTIONARY.get("NAME"))(e.get(r.name)||""===e.get(r.name))&&(s={name:Ce({},u[1],e.get(r.name))});else{var U,_;if(u[0].includes("addresses"))if(u[0].split("#").length>1)s=Ce({},null===(U=u[0])||void 0===U?void 0:U.split("#")[0],[Ce({type:null===(_=u[0])||void 0===_?void 0:_.split("#")[1]},u[1],e.get(r.name))]);else s=Ce({},u[0],[{formatted:e.get(r.name),type:u[1]}]);else if("emails"!==u[0]&&"phoneNumbers"!==u[0]){var M;s=Ce({},u[0],[{type:u[1],value:"BOOLEAN"===r.type.toUpperCase()?!(null===(M=e.get(r.name))||void 0===M||!M.includes(r.name)):e.get(r.name)}])}}t={op:"replace",value:s},u[0].includes("addresses")&&(t.op="add"),n.Operations.push(t)}})):je.forEach((function(r){var i,a;if((null!==(i=null==r||null===(a=r.profiles)||void 0===a||null===(a=a.console)||void 0===a?void 0:a.mutability)&&void 0!==i?i:r.mutability)!==S.Cb.READONLY_SCHEMA&&ft(r)){var o={},l=r.name.split(".");if("roles.default"!==r.name&&void 0!==e.get(r.name)&&void 0!==e.get(r.name).toString())if(R.ProfileUtils.isMultiValuedSchemaAttribute(je,l[0])||"phoneNumbers"===l[0]){var s=[],u=new Map;if(1===l.length||2===l.length)if(r.name===we||r.name==Oe)o=Ce({},r.schemaId,(0,ve.CU)(r.name,Bn[r.name],jn[r.name]));else{var c,d=Ee(e.keys());try{for(d.s();!(c=d.n()).done;){var m=c.value;m.split(".")[0]===l[0]&&u.set(m,e.get(m))}}catch(I){d.e(I)}finally{d.f()}var f,v=Ee(u);try{for(v.s();!(f=v.n()).done;){var p=Se(f.value,2),g=p[0],h=p[1],b=g.split(".");h&&""!==h&&(1===b.length?s.push(h):s.push({type:b[1],value:h}))}}catch(I){v.e(I)}finally{v.f()}o=Ce({},l[0],s)}}else{var C,y;if(1===l.length)if(r.extended)o=Ce({},null!=r&&r.schemaId?r.schemaId:E.x8.userProfileSchema,Ce({},l[0],"BOOLEAN"===r.type.toUpperCase()?!(null===(C=e.get(r.name))||void 0===C||!C.includes(r.name)):e.get(l[0])));else o=l[0]===J._F.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")?{emails:[e.get(r.name)]}:l[0]===J._F.SCIM2_SCHEMA_DICTIONARY.get("LOCALE")?Ce({},l[0],ot(e.get(l[0]),J.lJ.UNDERSCORE,!1)):Ce({},l[0],e.get(l[0]));else if(r.extended)o=Ce({},null!=r&&r.schemaId?r.schemaId:E.x8.userProfileSchema,Ce({},l[0],Ce({},l[1],"BOOLEAN"===r.type.toUpperCase()?!(null===(y=e.get(r.name))||void 0===y||!y.includes(r.name)):e.get(r.name))));else if(l[0]===J._F.SCIM2_SCHEMA_DICTIONARY.get("NAME"))o={name:Ce({},l[1],e.get(r.name))};else if("addresses"===l[0])o=Ce({},l[0],[{formatted:e.get(r.name),type:l[1]}]);else if("emails"!==l[0]&&"phoneNumbers"!==l[0]){var A;o=Ce({},l[0],[{type:l[1],value:"BOOLEAN"===r.type.toUpperCase()?!(null===(A=e.get(r.name))||void 0===A||!A.includes(r.name)):e.get(r.name)}])}}t={op:"replace",value:o},"addresses"===l[0]&&(t.op="add"),n.Operations.push(t)}})),In(!0),(0,q.gS)(ee.id,n).then((function(){K({description:he("user:profile.notifications.updateProfileInfo.success.description"),level:y.QU.SUCCESS,message:he("user:profile.notifications.updateProfileInfo.success.message")}),ne(ee.id)})).catch((function(e){var n,t,r,i;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(n=n.data)&&void 0!==n&&n.detail||null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?ye((0,A.V_)({description:(null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)||(null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.description),level:y.QU.ERROR,message:he("user:profile.notifications.updateProfileInfo.error.message")})):ye((0,A.V_)({description:he("user:profile.notifications.updateProfileInfo.genericError.description"),level:y.QU.ERROR,message:he("user:profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){In(!1)}))},ut=function(e){var n,t,r,i,a;(on({name:null==e||null===(n=e.target)||void 0===n?void 0:n.id,value:null==e||null===(t=e.target)||void 0===t?void 0:t.checked}),null!=e&&null!==(r=e.target)&&void 0!==r&&r.checked)?un(!0):ct(null==e||null===(i=e.target)||void 0===i?void 0:i.id,null==e||null===(a=e.target)||void 0===a?void 0:a.checked)},ct=function(e,n){var t={Operations:[{op:"replace",value:Ce({},E.x8.userProfileSchema,Ce({},e,n))}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};if("internal"===de){var r=J._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED"),i=J._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_DISABLED");t={Operations:[{op:"replace",value:Ce({},null!=r&&r.startsWith(S.Cb.SCIM2_SYSTEM_USER_SCHEMA)&&null!=i&&i.startsWith(S.Cb.SCIM2_SYSTEM_USER_SCHEMA)?S.Cb.SCIM2_SYSTEM_USER_SCHEMA:Le,Ce({},e,n))}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]}}(0,q.gS)(ee.id,t).then((function(){K({description:e===S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?he(n?"user:profile.notifications.lockUserAccount.success.description":"user:profile.notifications.unlockUserAccount.success.description"):he(n?"user:profile.notifications.disableUserAccount.success.description":"user:profile.notifications.enableUserAccount.success.description"),level:y.QU.SUCCESS,message:e===S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?he(n?"user:profile.notifications.lockUserAccount.success.message":"user:profile.notifications.unlockUserAccount.success.message",{name:at(ee,!0)}):he(n?"user:profile.notifications.disableUserAccount.success.message":"user:profile.notifications.enableUserAccount.success.message",{name:at(ee,!0)})}),un(!1),ne(ee.id),on(void 0)})).catch((function(n){n.response&&n.response.data&&n.response.data.description?K({description:n.response.data.description,level:y.QU.ERROR,message:e===J._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?he("user:profile.notifications.lockUserAccount.error.message"):he("user:profile.notifications.disableUserAccount.error.message")}):K({description:(null==an?void 0:an.name)===J._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?he("user:profile.notifications.lockUserAccount.genericError.description"):he("user:profile.notifications.disableUserAccount.genericError.description"),level:y.QU.ERROR,message:(null==an?void 0:an.name)===J._F.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?he("user:profile.notifications.lockUserAccount.genericError.message"):he("user:profile.notifications.disableUserAccount.genericError.message")})}))},dt=function(e,n,t){var s,f,v,p,g,h,b,C,R,U,_,N,P,T=[],L=[],x="",D="",k=!1,H=0;if(e.name===we)T=null!==(_=Bn[we])&&void 0!==_?_:[],L=null!==(N=null==Ve||null===(P=Ve.get(_e))||void 0===P?void 0:P.split(","))&&void 0!==N?N:[],x=$n[Re],D=null==Ve?void 0:Ve.get(Re),k="true"===(null==vn?void 0:vn.isEmailVerificationEnabled),U=je.find((function(e){return e.name===Re})),H=S.Cb.MAX_EMAIL_ADDRESSES_ALLOWED;else if(e.name===Oe){var V,F,Y;T=null!==(V=Bn[Oe])&&void 0!==V?V:[],L=null!==(F=null==Ve||null===(Y=Ve.get(Ue))||void 0===Y?void 0:Y.split(","))&&void 0!==F?F:[],x=$n[Ie],D=null==Ve?void 0:Ve.get(Ie),k="true"===(null==vn?void 0:vn.isMobileVerificationEnabled)||"true"===(null==vn?void 0:vn.isMobileVerificationByPrivilegeUserEnabled),U=je.find((function(e){return e.name===Ie})),H=S.Cb.MAX_MOBILE_NUMBERS_ALLOWED}else{var j;T=null!==(j=Bn[e.name])&&void 0!==j?j:[],H=S.Cb.MAX_MULTI_VALUES_ALLOWED}var G=T.length>=1,B=e.name===we||e.name===Oe,Q=null!==(s=null==e||null===(f=e.profiles)||void 0===f||null===(f=f.console)||void 0===f?void 0:f.mutability)&&void 0!==s?s:e.mutability,z=null!==(v=null==e||null===(p=e.profiles)||void 0===p||null===(p=p.console)||void 0===p?void 0:p.required)&&void 0!==v?v:e.required,$=null==e?void 0:e.sharedProfileValueResolvingMethod,W=null!==(g=null===(h=U)||void 0===h||null===(h=h.profiles)||void 0===h||null===(h=h.console)||void 0===h?void 0:h.required)&&void 0!==g?g:null===(b=U)||void 0===b?void 0:b.required,X=z||W,J=function(e){return!(e===x&&W)};return M.createElement("div",{key:t},M.createElement(I.gN,{action:{icon:"plus",onClick:function(n){var t;n.preventDefault();var r=jn[e.name];Xn[e.name]||(0,O.Z)(r)||null!==(t=Bn[e.name])&&void 0!==t&&t.includes(r)||(!function(e,n){if(!(0,O.Z)(n)){Qn((function(t){return be(be({},t),{},Ce({},e.name,[].concat(ge(t[e.name]||[]),[n])))}));var t=function(e){(0,O.Z)($n[e])&&Wn((function(t){return be(be({},t),{},Ce({},e,n))}))};e.name===we?t(Re):e.name===Oe&&t(Ie),Fn(!0)}}(e,r),Gn(be(be({},jn),{},Ce({},e.name,""))))}},disabled:Rn||te||(null===(C=Bn[null==e?void 0:e.name])||void 0===C?void 0:C.length)>=H,"data-testid":"".concat(pe,"-profile-form-").concat(e.name,"-input"),name:e.name,label:"profileUrl"===e.name?"Profile Image URL":E.xg.userEditSection.showEmail||"userName"!==e.name?n:n+" (Email)",placeholder:"Enter your "+n,type:"text",value:jn[e.name],readOnly:me&&$==y.Hk.FROM_ORIGIN||te||Q===S.Cb.READONLY_SCHEMA,required:!(me&&$==y.Hk.FROM_ORIGIN)&&X&&(0,O.Z)(Bn[null==e?void 0:e.name]),requiredErrorMessage:he("user:profile.forms.generic.inputs.validations.empty",{fieldName:n}),validation:function(t,r){var i;(0,O.Z)(t)&&X&&(0,O.Z)(Bn[null==e?void 0:e.name])&&(Jn(be(be({},Xn),{},Ce({},e.name,!0))),r.isValid=!1,r.errorMessages.push(he("user:profile.forms.generic.inputs.validations.empty",{fieldName:n}))),RegExp(null===(i=U)||void 0===i?void 0:i.regEx).test(t)?Jn(be(be({},Xn),{},Ce({},e.name,!1))):(Jn(be(be({},Xn),{},Ce({},e.name,!0))),r.isValid=!1,r.errorMessages.push(he("users:forms.validation.formatError",{field:n})))},displayErrorOn:"blur",listen:function(n){Gn(be(be({},jn),{},Ce({},e.name,n.get(e.name))))},maxLength:n.toLowerCase().includes("uri")||n.toLowerCase().includes("url")?S.Cb.URI_CLAIM_VALUE_MAX_LENGTH:e.maxLength?e.maxLength:S.Cb.CLAIM_VALUE_MAX_LENGTH,controlled:!0}),M.createElement("div",{hidden:!G},M.createElement(o.Z,{component:m.Z,elevation:0,"data-componentid":"".concat(pe,"-profile-form-").concat(e.name,"-accordion")},M.createElement(r.Z,{className:"multi-value-table",size:"small","aria-label":"multi-attribute value table"},M.createElement(i.Z,null,null===(R=Bn[null==e?void 0:e.name])||void 0===R?void 0:R.map((function(n,t){return M.createElement(l.Z,{key:t,className:"multi-value-table-data-row"},M.createElement(a.Z,{align:"left"},M.createElement("div",{className:"table-c1"},M.createElement("label",{className:"c1-value","data-componentid":"".concat(pe,"-profile-form-").concat(e.name)+"-value-".concat(t)},n),function(e){return B&&k&&(L.includes(e)||e===D)}(n)&&M.createElement("div",{className:"verified-icon","data-componentid":"".concat(pe,"-profile-form-").concat(e.name)+"-verified-icon-".concat(t)},M.createElement(w.GI,{name:"verified-popup",size:"tiny",trigger:M.createElement(Z.Z,{name:"check",color:"green"}),header:he("common:verified"),inverted:!0})),function(e){return!!B&&(k&&!L.includes(e)?e===D:e===x)}(n)&&M.createElement("div",{"data-componentid":"".concat(pe,"-profile-form-").concat(e.name)+"-primary-icon-".concat(t)},M.createElement(c.Z,{label:he("common:primary"),size:"medium"})))),M.createElement(a.Z,{align:"right"},M.createElement("div",{className:"table-c2"},function(n){return e.name===we&&k&&!(L.includes(n)||n===x)}(n)&&M.createElement(u.Z,{variant:"text",size:"small",className:"text-btn",onClick:function(){return function(e,n){In(!0);var t={Operations:[{op:"replace",value:{}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]},r="";if(e.name===we){var i;r="user:profile.notifications.verifyEmail.";var a=(null==Ve||null===(i=Ve.get(S.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_EMAIL_ADDRESSES")))||void 0===i?void 0:i.split(","))||[];a.push(n),t.Operations[0].value=Ce({},e.schemaId,Ce({},_e,a))}else if(e.name===Oe){var o;r="user:profile.notifications.verifyMobile.";var l=(null==Ve||null===(o=Ve.get(S.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_MOBILE_NUMBERS")))||void 0===o?void 0:o.split(","))||[];l.push(n),t.Operations[0].value=Ce({},e.schemaId,Ce({},Ue,l))}In(!0),(0,q.gS)(ee.id,t).then((function(){K({description:he("".concat(r,"success.description")),level:y.QU.SUCCESS,message:he("".concat(r,"success.message"))}),ne(ee.id)})).catch((function(e){var n,t,i,a;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(n=n.data)&&void 0!==n&&n.detail||null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?ye((0,A.V_)({description:(null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)||(null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description),level:y.QU.ERROR,message:"".concat(r,"error.message")})):ye((0,A.V_)({description:he("".concat(r,"genericError.description")),level:y.QU.ERROR,message:he("".concat(r,"genericError.message"))}))})).finally((function(){In(!1)}))}(e,n)},"data-componentid":"".concat(pe,"-profile-form")+"-".concat(e.name,"-verify-button-").concat(t),disabled:Rn||te},he("common:verify")),function(e){return!!B&&(k?L.includes(e)&&e!==x:e!==x)}(n)&&M.createElement(u.Z,{variant:"text",size:"small",className:"text-btn",onClick:function(){var e,t,r;return t=null===(e=U)||void 0===e?void 0:e.name,r=n,Wn((function(e){return be(be({},e),{},Ce({},t,r))})),void Fn(!0)},"data-componentid":"".concat(pe,"-profile-form")+"-".concat(e.name,"-make-primary-button-").concat(t),disabled:Rn||te},he("common:makePrimary")),M.createElement(d.Z,{size:"small",hidden:!J(n),onClick:function(){!function(e,n){var t,r=(null===(t=Bn[null==e?void 0:e.name])||void 0===t?void 0:t.filter((function(e){return e!==n})))||[];Qn((function(n){return be(be({},n),{},Ce({},e.name,r))})),e.name===we?$n[Re]===n&&Wn((function(e){return be(be({},e),{},Ce({},Re,""))})):e.name===Oe&&$n[Ie]===n&&Wn((function(e){return be(be({},e),{},Ce({},Ie,""))})),Fn(!0)}(e,n)},"data-componentid":"".concat(pe,"-profile-form")+"-".concat(e.name,"-delete-button-").concat(t),disabled:Rn||te},M.createElement(w.GI,{trigger:M.createElement(Z.Z,{name:"trash alternate"}),header:he("common:delete"),size:"tiny",inverted:!0})))))})))))))},mt=function(e,n,t){var r,i,a=null!==(r=null==e||null===(i=e.profiles)||void 0===i||null===(i=i.console)||void 0===i?void 0:i.mutability)&&void 0!==r?r:e.mutability,o=null==e?void 0:e.sharedProfileValueResolvingMethod,l=function(e,n){var t,r;return(!me||n!==y.Hk.FROM_ORIGIN)&&(null!==(t=null==e||null===(r=e.profiles)||void 0===r||null===(r=r.console)||void 0===r?void 0:r.required)&&void 0!==t?t:e.required)}(e,o);return"BOOLEAN"===e.type.toUpperCase()?M.createElement(I.gN,{"data-testid":"".concat(pe,"-profile-form-").concat(e.name,"-input"),name:e.name,required:l,requiredErrorMessage:n+" is required",type:"checkbox",value:Ve.get(e.name)?[e.name]:[],children:[{label:n,value:e.name}],readOnly:me&&o===y.Hk.FROM_ORIGIN||te||a===S.Cb.READONLY_SCHEMA,key:t}):"country"===e.name?M.createElement(I.gN,{ref:nt,"data-testid":"".concat(pe,"-profile-form-").concat(e.name,"-input"),name:e.name,label:n,required:l,requiredErrorMessage:n+" is required",placeholder:"Select your "+n,type:"dropdown",value:Ve.get(e.name),children:[{"data-testid":"".concat(pe,"-profile-form-country-dropdown-empty"),key:"empty-country",text:"Select your country",value:""}].concat(Sn?Sn.map((function(e){return{"data-testid":"".concat(pe,"-profile-form-country-dropdown-")+e.value,flag:e.flag,key:e.key,text:e.text,value:e.value}})):[]),key:t,disabled:me&&o===y.Hk.FROM_ORIGIN||te||a===S.Cb.READONLY_SCHEMA,readOnly:me&&o===y.Hk.FROM_ORIGIN||te||a===S.Cb.READONLY_SCHEMA,clearable:!l,search:!0,selection:!0,fluid:!0}):"locale"===(null==e?void 0:e.name)?M.createElement(I.gN,{"data-testid":"".concat(pe,"-profile-form-").concat(null==e?void 0:e.name,"-input"),name:null==e?void 0:e.name,label:n,required:l,requiredErrorMessage:he("user:profile.forms.generic.inputs.validations.empty",{fieldName:n}),placeholder:he("user:profile.forms.generic.inputs.dropdownPlaceholder",{fieldName:n}),type:"dropdown",value:ot(Ve.get(null==e?void 0:e.name),J.lJ.HYPHEN,!0),children:[{"data-testid":"".concat(pe,"-profile-form-locale-dropdown-empty"),key:"empty-locale",text:he("user:profile.forms.generic.inputs.dropdownPlaceholder",{fieldName:n}),value:""}].concat(Te?Object.keys(Te).map((function(e){var n;return{"data-testid":"".concat(pe,"-profile-form-locale-dropdown-")+Te[e].code,flag:null!==(n=Te[e].flag)&&void 0!==n?n:J._F.GLOBE,key:Te[e].code,text:Te[e].name===J._F.GLOBE?Te[e].code:"".concat(Te[e].name,",\n                                            ").concat(Te[e].code),value:Te[e].code}})):[]),key:t,disabled:!1,readOnly:me&&o===y.Hk.FROM_ORIGIN||te||(null==e?void 0:e.mutability)===S.Cb.READONLY_SCHEMA,clearable:!l,search:!0,selection:!0,fluid:!0}):null!=e&&e.extended&&null!=e&&e.multiValued?dt(e,n,t):"dateOfBirth"===(null==e?void 0:e.name)?M.createElement(I.gN,{"data-testid":"".concat(pe,"-profile-form-").concat(e.name,"-input"),name:e.name,label:n,required:l,requiredErrorMessage:n+" is required",placeholder:"YYYY-MM-DD",type:"text",value:Ve.get(e.name),key:t,readOnly:me&&o===y.Hk.FROM_ORIGIN||te||a===S.Cb.READONLY_SCHEMA,validation:function(t,r){RegExp(e.regEx).test(t)||(r.isValid=!1,r.errorMessages.push(he("users:forms.validation.dateFormatError",{field:n})))},maxLength:e.maxLength?e.maxLength:S.Cb.CLAIM_VALUE_MAX_LENGTH}):M.createElement(I.gN,{"data-testid":"".concat(pe,"-profile-form-").concat(e.name,"-input"),name:e.name,label:"profileUrl"===e.name?"Profile Image URL":E.xg.userEditSection.showEmail||"userName"!==e.name?n:n+" (Email)",required:l,requiredErrorMessage:n+" is required",placeholder:"Enter your "+n,type:"text",value:Ve.get(e.name),key:t,disabled:"userName"===e.name,readOnly:me&&o===y.Hk.FROM_ORIGIN||te||a===S.Cb.READONLY_SCHEMA,validation:function(t,r){RegExp(e.regEx).test(t)||(r.isValid=!1,r.errorMessages.push(he("users:forms.validation.formatError",{field:n})))},maxLength:n.toLowerCase().includes("uri")||n.toLowerCase().includes("url")?S.Cb.URI_CLAIM_VALUE_MAX_LENGTH:e.maxLength?e.maxLength:S.Cb.CLAIM_VALUE_MAX_LENGTH})},ft=function(e){var n,t;if(!et&&(e.name===we||e.name===Oe))return!1;var r=null!==(n=null==e||null===(t=e.profiles)||void 0===t||null===(t=t.console)||void 0===t?void 0:t.mutability)&&void 0!==n?n:e.mutability;if(!ke){var i,a;if("userName"===(null==e?void 0:e.name))return!0;var o,l="true"===(null==e||null===(i=e.supportedByDefault)||void 0===i?void 0:i.toLowerCase());if(void 0!==(null==e||null===(a=e.profiles)||void 0===a||null===(a=a.console)||void 0===a?void 0:a.supportedByDefault))l=null==e||null===(o=e.profiles)||void 0===o||null===(o=o.console)||void 0===o?void 0:o.supportedByDefault;if(!l)return!1}return e.name===we||e.name===Oe?!(0,O.Z)(Bn[e.name])||!te&&r!==S.Cb.READONLY_SCHEMA:!(0,O.Z)(Ve.get(e.name))||!te&&r!==S.Cb.READONLY_SCHEMA};return ae||(0,O.Z)(Ve)?M.createElement(w.pO,{dimmer:!0}):M.createElement(M.Fragment,null,(Tn||xn)&&M.createElement(s.Z,{severity:"warning"},he(xn?he("user:profile.accountDisabled"):Ln?null!==(rt=J.Dk[Ln])&&void 0!==rt?rt:J.Dk.DEFAULT:"")),M.createElement(w.pJ,{padded:"very"},te&&!le&&(!(0,O.Z)(se)||null!==se)&&!(null!==($=ee[E.k9.scim.systemSchema])&&void 0!==$&&$.userSourceId)&&ue,M.createElement(I.Es,{"data-testid":"".concat(pe,"-form"),onSubmit:function(e){return st(e)},onStaleChange:function(e){return Fn(e)}},M.createElement(T.Z,{className:"user-profile-form form-container with-max-width"},ee.id&&M.createElement(T.Z.Row,{columns:1},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:16},M.createElement(L.Z.Field,null,M.createElement("label",null,he("user:profile.fields.userId")),M.createElement(x.Z,{name:"userID",type:"text",value:ee.id,readOnly:!0})))),je&&je.map((function(e,n){if(e.name!==(null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ROLES_DEFAULT"))&&e.name!==(null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACTIVE"))&&e.name!==(null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("GROUPS"))&&e.name!==(null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("PROFILE_URL"))&&e.name!==(null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED"))&&e.name!==(null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_DISABLED"))&&e.name!==(null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ONETIME_PASSWORD"))&&(E.xg.userEditSection.showEmail||e.name!==(null===S.Cb||void 0===S.Cb?void 0:S.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")))&&ft(e))return function(e,n){var t,r,i,a,o;if(![et?Re:we,et?Ie:Oe,Ue,_e].some((function(n){return e.name===n}))&&(E.xg.userEditSection.showEmail||e.name!==we)){var l=he("user:profile.fields."+e.name.replace(".","_"),{defaultValue:e.displayName}),s=null==Ve||null===(t=Ve.get(e.name))||void 0===t?void 0:t.toString().split("/"),u=null!==(r=null==e||null===(i=e.profiles)||void 0===i||null===(i=i.console)||void 0===i?void 0:i.mutability)&&void 0!==r?r:e.mutability,c=null!==(a=null==e||null===(o=e.profiles)||void 0===o||null===(o=o.console)||void 0===o?void 0:o.required)&&void 0!==a?a:e.required;return M.createElement(T.Z.Row,{columns:1,key:n},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:16},"userName"===e.name&&s.length>1?M.createElement(M.Fragment,null,"internal"===de?M.createElement(L.Z.Field,null,M.createElement("label",null,E.xg.userEditSection.showEmail?l:l+" (Email)"),M.createElement(x.Z,{"data-testid":"".concat(pe,"-profile-form-").concat(e.name,"-input"),name:e.name,required:c,requiredErrorMessage:l+" is required",placeholder:"Enter your "+l,type:"text",value:s[1],key:n,readOnly:!0,maxLength:e.maxLength?e.maxLength:S.Cb.CLAIM_VALUE_MAX_LENGTH})):M.createElement(L.Z.Field,null,M.createElement("label",null,E.xg.userEditSection.showEmail?l:l+" (Email)"),M.createElement(x.Z,{"data-testid":"".concat(pe,"-profile-form-").concat(e.name,"-input"),name:e.name,label:s[0]+" / ",required:c,requiredErrorMessage:l+" is required",placeholder:"Enter your "+l,type:"text",value:s[1],key:n,readOnly:te||u===S.Cb.READONLY_SCHEMA,maxLength:e.maxLength?e.maxLength:S.Cb.CLAIM_VALUE_MAX_LENGTH}))):mt(e,l,n)))}}(e,n)})),Dn&&M.createElement(T.Z.Row,{columns:1},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:16},M.createElement(I.gN,{"data-testid":"".concat(pe,"-profile-form-one-time-pw }\n                                                -input"),name:"oneTimePassword",label:he("user:profile.fields.oneTimePassword"),required:!1,requiredErrorMessage:"",type:"text",hidden:void 0===Dn,value:Dn&&Dn,readOnly:!0}))),Pn&&M.createElement(T.Z.Row,{columns:1},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:16},M.createElement(L.Z.Field,null,M.createElement("label",null,he("user:profile.fields.createdDate")),M.createElement(x.Z,{name:"createdDate",type:"text",value:Pn?_()(Pn).format("YYYY-MM-DD"):"",readOnly:!0})))),Zn&&M.createElement(T.Z.Row,{columns:1},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:16},M.createElement(L.Z.Field,null,M.createElement("label",null,he("user:profile.fields.modifiedDate")),M.createElement(x.Z,{name:"modifiedDate",type:"text",value:Zn?_()(Zn).format("YYYY-MM-DD"):"",readOnly:!0})))),M.createElement(T.Z.Row,{columns:1},M.createElement(T.Z.Column,{mobile:16,tablet:16,computer:16},!te&&M.createElement(D.Z,{"data-testid":"".concat(pe,"-form-update-button"),primary:!0,type:"submit",size:"small",className:"form-button",loading:Rn,disabled:Rn||!Vn},he("common:update"))))))),M.createElement(k.Z,{hidden:!0}),function(){var e,n,t;if(!De)return null;var r=at(ee,!1),i=null==Me?void 0:Me.includes(r);return M.createElement(M.Fragment,null,!(!te||re||me||null!==(e=ee[E.k9.scim.systemSchema])&&void 0!==e&&e.userSourceId)||kn&&i?null:M.createElement(f.di,{when:null==xe||null===(n=xe.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.delete},M.createElement(w.v9,{sectionHeader:he("user:editUser.dangerZoneGroup.header")},te||le||me||ee.userName===W?null:M.createElement(f.di,{when:null==xe||null===(t=xe.users)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update},M.createElement(w.cN,{"data-testid":"".concat(pe,"-change-password"),actionTitle:he("user:editUser.dangerZoneGroup.passwordResetZone.actionTitle"),header:he("user:editUser.dangerZoneGroup.passwordResetZone.header"),subheader:he("user:editUser.dangerZoneGroup.passwordResetZone.subheader"),onActionClick:function(){mn(!0)},isButtonDisabled:Tn,buttonDisableHint:he("user:editUser.dangerZoneGroup.passwordResetZone.buttonHint")})),!re&&"true"===(null==vn?void 0:vn.accountDisable)&&M.createElement(w.cN,{"data-testid":"".concat(pe,"-account-disable-button"),actionTitle:he("user:editUser.dangerZoneGroup.disableUserZone.actionTitle"),header:he("user:editUser.dangerZoneGroup.disableUserZone.header"),subheader:he("user:editUser.dangerZoneGroup.disableUserZone.subheader"),onActionClick:void 0,toggle:{checked:xn,id:"accountDisabled",onChange:ut}}),!re&&!me&&M.createElement(w.cN,{"data-testid":"".concat(pe,"-danger-zone-toggle"),actionTitle:he("user:editUser.dangerZoneGroup.lockUserZone.actionTitle"),header:he("user:editUser.dangerZoneGroup.lockUserZone.header"),subheader:he("user:editUser.dangerZoneGroup.lockUserZone.subheader"),onActionClick:void 0,toggle:{checked:Tn,disableHint:he("user:editUser.dangerZoneGroup.lockUserZone.disabledHint"),disabled:xn,id:"accountLocked",onChange:ut}}),(null===E.x8||void 0===E.x8?void 0:E.x8.enableAdminPrivilegeRevokeOption)&&!Ne&&de===J.lu.INTERNAL&&Mn!==J._F.GUEST_ADMIN_ASSOCIATION_TYPE&&M.createElement(w.cN,{"data-testid":"".concat(pe,"-revoke-admin-privilege-danger-zone"),actionTitle:he("user:editUser.dangerZoneGroup.deleteAdminPriviledgeZone.actionTitle"),header:he("user:editUser.dangerZoneGroup.deleteAdminPriviledgeZone.header"),subheader:he("user:editUser.dangerZoneGroup.deleteAdminPriviledgeZone.subheader"),onActionClick:function(){Je(!0),tn(ee)}}),M.createElement(w.cN,{"data-testid":"".concat(pe,"-danger-zone"),actionTitle:he("user:editUser.dangerZoneGroup.deleteUserZone.actionTitle"),header:he("user:editUser.dangerZoneGroup.deleteUserZone.header"),subheader:E.xg.userEditSection.isGuestUser?he("extensions:manage.guest.editUser.dangerZoneGroup.deleteUserZone.subheader"):he("user:editUser.dangerZoneGroup.deleteUserZone.subheader"),onActionClick:function(){We(!0),tn(ee)},isButtonDisabled:de===J.lu.INTERNAL&&le,buttonDisableHint:he("user:editUser.dangerZoneGroup.deleteUserZone.buttonDisableHint")}))))}(),nn&&M.createElement(w.cV,{"data-testid":"".concat(pe,"-confirmation-modal"),onClose:function(){return We(!1)},type:"negative",open:$e,assertionHint:he("user:deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:he("common:confirm"),secondaryAction:he("common:cancel"),onSecondaryActionClick:function(){We(!1),hn(null)},onPrimaryActionClick:function(){return function(e){E.x8.deleteUser(e).then((function(){K({description:he("users:notifications.deleteUser.success.description"),level:y.QU.SUCCESS,message:he("users:notifications.deleteUser.success.message")}),de===J.lu.EXTERNAL?g.m.push(p.$.getPaths().get("ADMINISTRATORS")):g.m.push(p.$.getPaths().get("USERS"))})).catch((function(e){e.response&&e.response.data&&e.response.data.description?hn({description:e.response.data.description,level:y.QU.ERROR,message:he("users:notifications.deleteUser.error.message")}):hn({description:he("users:notifications.deleteUser.genericError.description"),level:y.QU.ERROR,message:he("users:notifications.deleteUser.genericError.message")})}))}(nn)},closeOnDimmerClick:!1},M.createElement(w.cV.Header,{"data-testid":"".concat(pe,"-confirmation-modal-header")},he("user:deleteUser.confirmationModal.header")),M.createElement(w.cV.Message,{"data-testid":"".concat(pe,"-confirmation-modal-message"),attached:!0,negative:!0},E.xg.userEditSection.isGuestUser?he("extensions:manage.guest.deleteUser.confirmationModal.message"):he("user:deleteUser.confirmationModal.message")),M.createElement(w.cV.Content,null,M.createElement("div",{className:"modal-alert-wrapper"}," ",En&&bn),E.xg.userEditSection.isGuestUser?he("extensions:manage.guest.deleteUser.confirmationModal.content"):he("user:deleteUser.confirmationModal.content"))),nn&&M.createElement(w.cV,{"data-testid":"".concat(pe,"-admin-privilege-revoke-confirmation-modal"),onClose:function(){return Je(!1)},type:"negative",open:Xe,assertionHint:he("user:revokeAdmin.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:he("common:confirm"),secondaryAction:he("common:cancel"),onSecondaryActionClick:function(){Je(!1),hn(null)},onPrimaryActionClick:function(){return function(e){var n={Operations:[{op:"remove",path:"users[display eq ".concat(e.userName,"]"),value:{}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};(0,b.dB)(On,n).then((function(){ye((0,A.V_)({description:he("users:notifications.revokeAdmin.success.description"),level:y.QU.SUCCESS,message:he("users:notifications.revokeAdmin.success.message")})),g.m.push(p.$.getPaths().get("ADMINISTRATORS"))})).catch((function(e){e.response&&e.response.data&&e.response.data.description?ye((0,A.V_)({description:e.response.data.description,level:y.QU.ERROR,message:he("users:notifications.revokeAdmin.error.message")})):ye((0,A.V_)({description:he("users:notifications.revokeAdmin.genericError.description"),level:y.QU.ERROR,message:he("users:notifications.revokeAdmin.genericError.message")}))}))}(nn)},closeOnDimmerClick:!1},M.createElement(w.cV.Header,{"data-testid":"".concat(pe,"-admin-privilege-revoke-confirmation-modal-header")},he("user:revokeAdmin.confirmationModal.header")),M.createElement(w.cV.Content,null,M.createElement("div",{className:"modal-alert-wrapper"}," ",En&&bn),he("user:revokeAdmin.confirmationModal.content"))),an&&M.createElement(w.cV,{"data-testid":"".concat(pe,"-confirmation-modal"),onClose:function(){un(!1),on(void 0)},type:"warning",open:sn,assertion:at(ee,!1),assertionHint:an.name===S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?he("user:lockUser.confirmationModal.assertionHint"):he("user:disableUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:he("common:confirm"),secondaryAction:he("common:cancel"),onSecondaryActionClick:function(){on(void 0),un(!1)},onPrimaryActionClick:function(){return ct(an.name,an.value)},closeOnDimmerClick:!1},M.createElement(w.cV.Header,{"data-testid":"".concat(pe,"-confirmation-modal-header")},an.name===S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?he("user:lockUser.confirmationModal.header"):he("user:disableUser.confirmationModal.header")),M.createElement(w.cV.Message,{"data-testid":"".concat(pe,"-disable-confirmation-modal-message"),attached:!0,warning:!0},an.name===S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?he("user:lockUser.confirmationModal.message"):he("user:disableUser.confirmationModal.message")),M.createElement(w.cV.Content,null,an.name===S.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?he("user:lockUser.confirmationModal.content"):he("user:disableUser.confirmationModal.content"))),M.createElement(X,{handleForcePasswordResetTrigger:null,connectorProperties:ie,handleCloseChangePasswordModal:function(){return mn(!1)},openChangePasswordModal:dn,onAlertFired:K,user:ee,handleUserUpdate:ne}))}},56899:(e,n,t)=>{t.d(n,{e:()=>O});var r=t(1989),i=t(22230),a=t(59870),o=t(43516),l=t(44194),s=t(10479),u=t(47245),c=t(62508),d=t(51835),m=t.n(d),f=t(27975),v=t.n(f),p=t(55900),g=t.n(p),E=t(21555),h=t.n(E),b=t(3621),C=t.n(b),S=t(5062),y=t.n(S),A=t(72277),R={};R.styleTagTransform=y(),R.setAttributes=h(),R.insert=g().bind(null,"head"),R.domAPI=v(),R.insertStyleElement=C();m()(A.Z,R);A.Z&&A.Z.locals&&A.Z.locals;function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return w(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var O=function(e){var n=e.user,t=(0,s.$)().t,d=I((0,l.useState)([]),2),m=d[0],f=d[1],v=(0,u.v9)((function(e){var n;return null==e||null===(n=e.config)||void 0===n||null===(n=n.ui)||void 0===n?void 0:n.isGroupAndRoleSeparationEnabled}));(0,l.useEffect)((function(){var e,t,r;(null===(t=r=v&&(null==n||null===(e=n.roles)||void 0===e?void 0:e.length)>0?n.roles:p(null==n?void 0:n.groups))||void 0===t?void 0:t.length)>0&&f(r)}),[n]);var p=function(e){var n=[];return null==e||e.forEach((function(e){var t,r=I(null==e||null===(t=e.display)||void 0===t?void 0:t.split(a.Nd),2),i=r[0],o=r[1];i&&o&&[a.Fn,a.eT].includes(i)&&n.push({$ref:e.$ref,display:o,orgId:void 0,orgName:void 0,value:e.value})})),n};return l.createElement(o.pJ,{padded:"very",className:"list-user-roles-section"},l.createElement(o.X6,{as:"h4"},t("user:updateUser.roles.editRoles.heading")),l.createElement(o.X6,{subHeading:!0,ellipsis:!0,as:"h6"},t("user:updateUser.roles.editRoles.subHeading")),l.createElement(o.v0,{type:"info",content:t("user:updateUser.roles.editRoles.infoMessage")}),l.createElement(c.Z,{hidden:!0}),l.createElement(i.W,{totalRoleList:m,emptyRolesListPlaceholder:l.createElement(o.$J,{subtitle:[t("user:updateUser.roles.editRoles.placeholders.emptyPlaceholder.subtitles")],title:t("user:updateUser.roles.editRoles.placeholders.emptyPlaceholder.title"),image:(0,r.jF)().emptyList,imageSize:"tiny"})}))};O.defaultProps={"data-componentid":"edit-user-roles"}},13731:(e,n,t)=>{t.d(n,{Y:()=>I});var r=t(55007),i=t(1989),a=t(40838),o=t(51021),l=t(86105),s=t(6833),u=t(82406),c=t(43516),d=t(84025),m=t.n(d),f=t(44194),v=t(10479),p=t(47245),g=t(89141),E=t(73432),h=t(26154),b=t(37077),C=t(92e3);function S(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,n)||A(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,n){if(e){if("string"==typeof e)return R(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?R(e,n):void 0}}function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var I=function(e){var n,t=e.defaultActiveIndexes,d=e.isLoading,A=e.user,R=e.showSessionTerminationButton,I=e["data-testid"],w=new l._X,O=(0,v.$)().t,U=(0,p.I0)(),_=(0,p.v9)((function(e){return e.config.ui.features})),M=y((0,f.useState)(void 0),2),N=M[0],P=M[1],Z=y((0,f.useState)(void 0),2),T=Z[0],L=Z[1],x=y((0,f.useState)(!1),2),D=x[0],k=x[1],H=y((0,f.useState)(t),2),V=H[0],F=H[1],Y=y((0,f.useState)(!1),2),j=Y[0],G=Y[1],q=y((0,f.useState)(!1),2),B=q[0],Q=q[1],z=(0,p.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.username})).split("@");z.pop();var $=z.join("@");(0,f.useEffect)((function(){A&&A.id&&J(A.id)}),[A]);var W,K,X,J=function(e){k(!0),(0,C.c7)(e).then((function(e){P(e.data)})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?U((0,u.V_)({description:e.response.data.description||e.response.data.detail,level:s.QU.ERROR,message:O("users:userSessions.notifications.getUserSessions.error.message")})):U((0,u.V_)({description:O("users:userSessions.notifications.getUserSessions.genericError.description"),level:s.QU.ERROR,message:O("users:userSessions.notifications.getUserSessions.genericError.message")}))})).finally((function(){k(!1)}))},ee=function(e){for(var n=0,t=Object.values({desktop:{icon:"computer",values:["desktop"]},mobile:{icon:"mobile alternate",values:["mobile"]},tablet:{icon:"tablet alternate",values:["tablet"]}});n<t.length;n++){var r=t[n];if(r.values.includes(e))return r.icon}return"computer"},ne=function(e){for(var n=0,t=Object.values({android:{icon:"android",values:["Android"]},ios:{icon:"apple",values:["iOS"]},linux:{icon:"linux",values:["Linux"]},mac:{icon:"apple",values:["Mac OS"]},windows:{icon:"windows",values:["Windows [Phone/Mobile]"]}});n<t.length;n++){var r=t[n];if(r.values.includes(e))return r.icon}},te=function(e){for(var n=0,t=Object.values({chrome:{icon:"chrome",values:["Chrome","Chrome Headless","Chrome WebView","Chromium"]},edge:{icon:"edge",values:["Edge"]},firefox:{icon:"firefox",values:["Firefox"]},opera:{icon:"opera",values:["Opera Coast","Opera Mini","Opera Mobi","Opera Tablet","Opera"]},safari:{icon:"safari",values:["Mobile Safari","Safari"]}});n<t.length;n++){var r=t[n];if(r.values.includes(e))return r.icon}},re=function(e,n){var t=n.index,r=S(V);if(r.includes(t)){var i=r.indexOf(t);r.splice(i,1)}else r.push(t);F(r)};return d||D?f.createElement(c.pO,null):N&&N.sessions&&Array.isArray(N.sessions)&&N.sessions.length>0?f.createElement(g.Z,{"data-testid":I},f.createElement(g.Z.Row,null,f.createElement(g.Z.Column,{mobile:16,tablet:16,computer:16},R&&f.createElement(r.di,{when:null==_||null===(n=_.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update},f.createElement(c.O3,{floated:"right","data-testid":"".concat(I,"-terminate-all-button"),onClick:function(){return Q(!0)}},O("users:userSessions.components.sessionDetails.actions.terminateAllSessions"))))),f.createElement(g.Z.Row,null,f.createElement(g.Z.Column,{mobile:16,tablet:16,computer:16},f.createElement(c.el,{fluid:!0,"data-testid":"".concat(I,"-accordion")},N.sessions.map((function(e,n){return w.uaString=e.userAgent,f.createElement(f.Fragment,{key:e.id},f.createElement(c.el.Title,{id:e.id,"data-testid":"".concat(I,"-").concat(e.id,"-title"),active:V.includes(n),index:n,onClick:re,content:f.createElement(f.Fragment,null,f.createElement(c.dn,{icon:f.createElement(h.Z,{name:ee(w.device.type),size:"big",color:"grey"}),transparent:!0,spaced:"right",floated:"left","data-testid":"".concat(I,"-").concat(e.id,"-title-icon")}),f.createElement(E.Z.Content,null,f.createElement(E.Z.Header,null,w.browser.name," on ",w.os.name),f.createElement(E.Z.Description,null,f.createElement(c.xv,{size:11},O("users:userSessions.components.sessionDetails.labels.lastAccessed",{date:m()(parseInt(e.lastAccessTime,10)).fromNow()}))))),hideChevron:!1}),f.createElement(c.el.Content,{active:V.includes(n),"data-testid":"".concat(I,"-").concat(e.id,"-content")},function(e){var n;return w.uaString=e.userAgent,f.createElement(g.Z.Row,null,f.createElement(g.Z.Column,null,f.createElement(E.Z.Content,null,f.createElement(g.Z,{padded:!0},f.createElement(g.Z.Row,{columns:2},f.createElement(g.Z.Column,{width:5},O("users:userSessions.components.sessionDetails.labels.os")),f.createElement(g.Z.Column,{width:11},f.createElement(E.Z.Description,null,f.createElement(h.Z,{name:ne(w.os.name),color:"grey"}),w.os.name," ",w.os.version))),f.createElement(g.Z.Row,{columns:2},f.createElement(g.Z.Column,{width:5},O("users:userSessions.components.sessionDetails.labels.browser")),f.createElement(g.Z.Column,{width:11},f.createElement(E.Z.Description,null,f.createElement(h.Z,{name:te(w.browser.name),color:"grey"}),w.browser.name," ",w.browser.version))),f.createElement(g.Z.Row,{columns:2},f.createElement(g.Z.Column,{width:5},O("users:userSessions.components.sessionDetails.labels.ip")),f.createElement(g.Z.Column,{width:11},f.createElement(E.Z.Description,{"data-hj-suppress":""},e.ip))),w.device.vendor?f.createElement(g.Z.Row,{columns:2},f.createElement(g.Z.Column,{width:5},O("users:userSessions.components.sessionDetails.labels.deviceModel")),f.createElement(g.Z.Column,{width:11},f.createElement(E.Z.Description,null,w.device.vendor," ",w.device.model))):null,f.createElement(g.Z.Row,{columns:2},f.createElement(g.Z.Column,{width:5},O("users:userSessions.components.sessionDetails.labels.loginTime")),f.createElement(g.Z.Column,{width:11},f.createElement(E.Z.Description,null,m()(parseInt(e.loginTime,10)).format("lll")))),f.createElement(g.Z.Row,{columns:2},f.createElement(g.Z.Column,{width:5},O("users:userSessions.components.sessionDetails.labels.lastAccessed",{date:""})),f.createElement(g.Z.Column,{width:11},f.createElement(E.Z.Description,null,m()(parseInt(e.lastAccessTime,10)).fromNow()))),e.applications&&e.applications.length>0?f.createElement(g.Z.Row,{columns:2},f.createElement(g.Z.Column,{width:5},O("users:userSessions.components.sessionDetails.labels.activeApplication")),f.createElement(g.Z.Column,{mobile:16,computer:11},e.applications.map((function(e,n){return f.createElement(E.Z.Description,{className:"pb-2",key:n},f.createElement(b.Z,{className:"micro spaced-right",circular:!0,color:"green",size:"mini"}),e.appName)})))):null,f.createElement(g.Z.Row,{columns:1},f.createElement(g.Z.Column,{width:16},R&&f.createElement(r.di,{when:null==_||null===(n=_.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update},f.createElement(c.v9,{sectionHeader:O("common:dangerZone")},f.createElement(c.cN,{actionTitle:O("users:userSessions.dangerZones.terminate.actionTitle"),header:O("users:userSessions.dangerZones.terminate.header"),subheader:O("users:userSessions.dangerZones.terminate.subheader"),onActionClick:function(){L(e),G(!0)},"data-testid":"".concat(I,"-terminate-button")})))))))))}(e)))}))))),(j||B)&&f.createElement(c.cV,{onClose:function(){j?G(!1):Q(!1)},type:"warning",open:j||B,assertion:(W=A.userName,K=W.split("/"),X=W,K.length>1&&!o.wO.userstoreDomain.appendToUsername&&(X=K[1]),X.split("@").length>1?X.split("@")[0].concat("@").concat(X.split("@")[1]):X.split("@")[0]),assertionHint:O(j?"users:confirmations.terminateSession.assertionHint":"users:confirmations.terminateAllSessions.assertionHint"),assertionType:"checkbox",primaryAction:O("common:confirm"),secondaryAction:O("common:cancel"),onSecondaryActionClick:function(){j?G(!1):Q(!1)},onPrimaryActionClick:function(){if(j)return e=T.id,(0,C.PI)(A.id,e).then((function(){U((0,u.V_)({description:O("users:userSessions.notifications.terminateUserSession.success.description"),level:s.QU.SUCCESS,message:O("users:userSessions.notifications.terminateUserSession.success.message")}))})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?U((0,u.V_)({description:e.response.data.description||e.response.data.detail,level:s.QU.ERROR,message:O("users:userSessions.notifications.terminateUserSession.error.message")})):U((0,u.V_)({description:O("users:userSessions.notifications.terminateUserSession.genericError.description"),level:s.QU.ERROR,message:O("users:userSessions.notifications.terminateUserSession.genericError.message")}))})).finally((function(){J(A.id)})),void G(!1);var e;(0,C.rc)(A.id).then((function(){$===(null==A?void 0:A.userName)&&a.m.push(window.AppUtils.getConfig().routes.logout),U((0,u.V_)({description:O("users:userSessions.notifications.terminateAllUserSessions.success.description"),level:s.QU.SUCCESS,message:O("users:userSessions.notifications.terminateAllUserSessions.success.message")}))})).catch((function(e){J(A.id),e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?U((0,u.V_)({description:e.response.data.description||e.response.data.detail,level:s.QU.ERROR,message:O("users:userSessions.notifications.terminateAllUserSessions.error.message")})):U((0,u.V_)({description:O("users:userSessions.notifications.terminateAllUserSessions.genericError.description"),level:s.QU.ERROR,message:O("users:userSessions.notifications.terminateAllUserSessions.genericError.message")}))})).finally((function(){$!==(null==A?void 0:A.userName)&&J(A.id)})),Q(!1)},"data-testid":j?"session-terminate-confirmation-modal":"all-sessions-terminate-confirmation-modal",closeOnDimmerClick:!1},f.createElement(c.cV.Header,{"data-testid":j?"session-terminate-confirmation-modal-header":"all-sessions-terminate-confirmation-modal-header"},O(j?"users:confirmations.terminateSession.header":"users:confirmations.terminateAllSessions.header")),f.createElement(c.cV.Message,{attached:!0,warning:!0,"data-testid":j?"session-terminate-confirmation-modal-message":"all-sessions-terminate-confirmation-modal-message"},O(j?"users:confirmations.terminateSession.message":"users:confirmations.terminateAllSessions.message")),f.createElement(c.cV.Content,{"data-testid":j?"session-terminate-confirmation-modal-content":"all-sessions-terminate-confirmation-modal-content"},O(j?"users:confirmations.terminateSession.content":"users:confirmations.terminateAllSessions.content")))):f.createElement(c.$J,{image:(0,i.jF)().emptyList,imageSize:"tiny",title:O("users:userSessions.placeholders.emptyListPlaceholder.title"),subtitle:[O("users:userSessions.placeholders.emptyListPlaceholder.subtitles")]})};I.defaultProps={"data-testid":"user-sessions",defaultActiveIndexes:[-1],showSessionTerminationButton:!0}},6643:(e,n,t)=>{t.d(n,{F2:()=>i.F2,I_:()=>r.I_,P_:()=>i.P_,QH:()=>r.QH,t$:()=>r.t$});var r=t(22669),i=t(51318)},11660:(e,n,t)=>{t.d(n,{Z:()=>l});var r=t(51139),i=t.n(r),a=t(32234),o=t.n(a)()(i());o.push([e.id,".user-profile-form .multi-value-table .multi-value-table-data-row:last-child td,.user-profile-form .multi-value-table .multi-value-table-data-row:last-child th{border:none}.user-profile-form .multi-value-table .multi-value-table-data-row .table-c1{display:flex;flex-wrap:nowrap;align-items:center;font-size:1rem;padding:.2em 0}.user-profile-form .multi-value-table .multi-value-table-data-row .table-c1 .c1-value{margin-bottom:0;flex-shrink:0;padding-right:12px}.user-profile-form .multi-value-table .multi-value-table-data-row .table-c1 .verified-icon,.user-profile-form .multi-value-table .multi-value-table-data-row .table-c1 .primary-icon{align-items:center;padding:0 4px}.user-profile-form .multi-value-table .multi-value-table-data-row .table-c2{display:flex;flex-wrap:nowrap;align-items:center;justify-content:flex-end;gap:4px;padding:.2em 0}.user-profile-form .multi-value-table .multi-value-table-data-row .table-c2 .text-btn{padding:0px;white-space:nowrap}",""]);const l=o},72277:(e,n,t)=>{t.d(n,{Z:()=>l});var r=t(51139),i=t.n(r),a=t(32234),o=t.n(a)()(i());o.push([e.id,".list-user-roles-section .ui.table thead th{background:rgba(0,0,0,0)}",""]);const l=o}}]);