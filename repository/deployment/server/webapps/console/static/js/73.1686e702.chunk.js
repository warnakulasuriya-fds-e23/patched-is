"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[73],{73:(e,n,t)=>{t.r(n),t.d(n,{default:()=>x});var a=t(9821),i=t(60486),r=t(40838),o=t(33839),l=t(6833),c=t(82406),u=t(30382),s=t(43516),m=t(44194),d=t(10479),g=t(47245),f=t(41206),p=t(89141);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function A(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,L(a.key),a)}}function E(e,n,t){return n&&A(e.prototype,n),t&&A(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e,n,t){return(n=L(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function L(e){var n=function(e,n){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!=N(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==N(n)?n:n+""}var v=E((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));I(v,"VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS",{MIN_LENGTH:1,MIN_VALUE:0,USERNAME_MAX_LENGTH:2,USERNAME_MAX_VALUE:50,USERNAME_MIN_LENGTH:1,USERNAME_MIN_VALUE:3}),I(v,"VALIDATION_DEFAULT_CONSTANTS",{USERNAME_MAX:"50",USERNAME_MIN:"3"});var b=function(e){return e.EMAIL="emailType",e.ALPHANUMERIC="customType",e}({});function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!=O(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==O(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,i,r,o,l=[],c=!0,u=!1;try{if(r=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(a=r.call(t)).done)&&(l.push(a.value),l.length!==n);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return S(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}var R="username-validation-form",U=function(e){var n=e["data-componentid"],t=(0,g.I0)(),N=(0,m.useRef)(null),A=(0,d.$)().t,E=h((0,m.useState)(!1),2),I=E[0],L=E[1],O=h((0,m.useState)(void 0),2),_=O[0],y=O[1],S=h((0,m.useState)(!1),2),U=S[0],x=S[1],M=h((0,m.useState)(void 0),2),V=M[0],C=M[1],D=(0,o.W)(),P=D.data,w=D.isLoading,F=D.error,j=D.mutate,G=null==P?void 0:P.filter((function(e){return"password"===e.field}));(0,m.useEffect)((function(){w||P&&k()}),[w]),(0,m.useEffect)((function(){r.m.location.state===a.j.APPLICATION_STATE&&x(!0)}),[]),(0,m.useEffect)((function(){if(F)if(F.response&&F.response.data&&F.response.data.description){var e;if(404===F.response.status)return;t((0,c.V_)({description:null!==(e=F.response.data.description)&&void 0!==e?e:A("extensions:manage.accountLogin.notifications.error.description"),level:l.QU.ERROR,message:A("extensions:manage.accountLogin.notifications.error.message")}))}else t((0,c.V_)({description:A("extensions:manage.accountLogin.notifications.genericError.description"),level:l.QU.ERROR,message:A("extensions:manage.accountLogin.notifications.genericError.message")}))}),[F]);var k=function(){var e=null==P?void 0:P.filter((function(e){return"username"===e.field}));if(!((null==e?void 0:e.length)<1)){var n=e[0].rules,t={enableValidator:"true"==H(n,"AlphanumericValidator","enable.validator")||"true"!=H(n,"EmailFormatValidator","enable.validator")?"true":"false",field:"username",isAlphanumericOnly:"true"!==H(n,"AlphanumericValidator","enable.special.characters"),maxLength:H(n,"LengthValidator","max.length")?H(n,"LengthValidator","max.length"):v.VALIDATION_DEFAULT_CONSTANTS.USERNAME_MAX,minLength:H(n,"LengthValidator","min.length")?H(n,"LengthValidator","min.length"):v.VALIDATION_DEFAULT_CONSTANTS.USERNAME_MIN,type:"rules"};y(t),C(t)}},H=function(e,n,t){var a=null==e?void 0:e.filter((function(e){return e.validator===n}));if((null==a?void 0:a.length)>0){var i,r=a[0].properties;if((null===(i=r=r.filter((function(e){return e.key===t})))||void 0===i?void 0:i.length)>0)return r[0].value}return null},X=function(e){(function(e){var n=!1,a="";return Number(e.minLength)<3?(n=!0,a=A("extensions:manage.accountLogin.validationError.minLimitError")):Number(e.maxLength)>50?(n=!0,a=A("extensions:manage.accountLogin.validationError.maxLimitError")):Number(e.minLength)>Number(e.maxLength)&&(n=!0,a=A("extensions:manage.accountLogin.validationError.minMaxMismatch")),!n||(t((0,c.V_)({description:a,level:l.QU.ERROR,message:A("extensions:manage.accountLogin.validationError.wrongCombination")})),!1)})(e)&&(L(!0),(0,o.s)(e,G[0],null).then((function(){j(),t((0,c.V_)({description:A("extensions:manage.accountLogin.notifications.success.description"),level:l.QU.SUCCESS,message:A("validation:notifications.success.message")}))})).catch((function(e){var n,a,i,r,o,u,s;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(n=n.data)&&void 0!==n&&n.description?t((0,c.V_)({description:null!==(a=null!==(i=null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.description)&&void 0!==i?i:null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.detail)&&void 0!==a?a:A("extensions:manage.accountLogin.notifications.error.description"),level:l.QU.ERROR,message:null!==(u=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==u?u:A("extensions:manage.accountLogin.notifications.error.message")})):t((0,c.V_)({description:A("extensions:manage.accountLogin.notifications.genericError.description"),level:l.QU.ERROR,message:A("extensions:manage.accountLogin.notifications.genericError.message")}))})).finally((function(){L(!1)})))};return m.createElement(s.Xg,{pageTitle:A("extensions:manage.accountLogin.editPage.pageTitle"),title:m.createElement(m.Fragment,null,A("extensions:manage.accountLogin.editPage.pageTitle")),description:m.createElement(m.Fragment,null,A("extensions:manage.accountLogin.editPage.description")),"data-componentid":"".concat(n,"-page-layout"),backButton:{"data-testid":"".concat(n,"-page-back-button"),onClick:function(){U?r.m.push(i.$.getPaths().get("APPLICATIONS")):r.m.push(i.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:A(U?"extensions:manage.accountLogin.goBackToApplication":"governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0},m.createElement(f.R,{innerRef:N},m.createElement(p.Z,{className:"mt-3"},m.createElement(p.Z.Row,{columns:1},m.createElement(p.Z.Column,{width:16},m.createElement(s.pJ,{className:"form-wrapper",padded:"very"},_&&V?m.createElement("div",{className:"validation-configurations password-validation-configurations"},m.createElement(u.l0,{id:R,initialValues:_,uncontrolledForm:!0,validate:null,onSubmit:function(e){return X(e)}},m.createElement("div",null,m.createElement(s.xv,null,A("extensions:manage.accountLogin.editPage.usernameType")),m.createElement(s.kW,{compact:!0},A("extensions:manage.accountLogin.editPage.usernameTypeHint"))),m.createElement("div",null,Object.keys(b).map((function(e,t){var a=b[e];return m.createElement(u.gN.Radio,{key:t,ariaLabel:"".concat(a," layout swatch"),name:"enableValidator",label:A("extensions:manage.accountLogin.editPage."+a),required:!1,value:"customType"==a?"true":"false","data-componentid":"".concat(n,"-").concat(a,"-radio"),listen:function(){C(T(T({},V),{},{enableValidator:"customType"==a?"true":"false"}))}})}))),"true"==(null==V?void 0:V.enableValidator)&&m.createElement("div",{className:"ml-6"},m.createElement("div",{className:"criteria-username"},m.createElement(s.xv,null,A("extensions:manage.accountLogin.editPage.usernameLength.0")),m.createElement(u.gN.Input,{ariaLabel:"minLength",inputType:"number",name:"minLength",min:v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE,max:v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE,width:2,required:!0,hidden:!1,placeholder:"min",maxLength:v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_LENGTH,minLength:v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_LENGTH,validation:function(e,n){var t=parseInt(e),a=v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE;if(t<a)return A("common:minValidation",{min:a});var i=n.maxLength?parseInt(n.maxLength):v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE;return t>i?A("common:maxValidation",{max:i}):void 0},listen:function(e){C(T(T({},V),{},{minLength:e}))},readOnly:!1,disabled:!1,"data-testid":"".concat(n,"-min-length")}),m.createElement("label",null,A("extensions:manage.accountLogin.editPage.usernameLength.1")),m.createElement(u.gN.Input,{ariaLabel:"maxLength",inputType:"number",name:"maxLength",min:v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE,max:v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE,width:2,required:!0,hidden:!1,placeholder:"max",maxLength:v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_LENGTH,labelPosition:"top",minLength:v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_LENGTH,validation:function(e,n){var t=parseInt(e),a=n.minLength?parseInt(n.minLength):v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE;if(t<a)return A("common:minValidation",{min:a});var i=v.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE;return t>i?A("common:maxValidation",{max:i}):void 0},listen:function(e){C(T(T({},V),{},{maxLength:e}))},readOnly:!1,disabled:!1,"data-testid":"".concat(n,"-max-length")}),m.createElement("label",null,A("extensions:manage.accountLogin.editPage.usernameLength.2"))),m.createElement(u.gN.Checkbox,{ariaLabel:"isAlphanumericOnly",name:"isAlphanumericOnly",label:A("extensions:manage.accountLogin.editPage.usernameAlphanumeric"),tabIndex:3,hint:V.isAlphanumericOnly?void 0:A("extensions:manage.accountLogin.editPage.usernameSpecialCharsHint"),listen:function(e){return C(T(T({},V),{},{isAlphanumericOnly:e}))},width:16,defaultValue:_,"data-componentid":"".concat(n,"-is-alphanumeric-only")})),m.createElement(u.gN.Button,{form:R,size:"small",buttonType:"primary_btn",ariaLabel:"Self registration update button",name:"update-button","data-testid":"".concat(n,"-submit-button"),disabled:null,loading:I,label:A("common:update"),hidden:null}))):m.createElement(s.pO,null)))))))};U.defaultProps={"data-componentid":"username-validation-edit-page"};const x=U}}]);