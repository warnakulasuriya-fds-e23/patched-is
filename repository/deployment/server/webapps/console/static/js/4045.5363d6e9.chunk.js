"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4045],{74045:(e,t,n)=>{n.r(t),n.d(t,{TryoutSamples:()=>F});var a=n(6567),l=n(48773),o=n(35407),r=n(5840),i=n(65388),c=n(1989),s=n(43974),u=n(6833),d=n(82406),m=n(16590),p=n(43516),f=n(34194),h=n(50699),g=n(44194),E=n(47245),y=n(10909),v=n(26154),b=n(77757),w=n(62508),O=n(73795),k=n(39437),C=n(9610),A=n(8951);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function S(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=N(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,l,o,r,i=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,l=e}finally{try{if(!c&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw l}}return i}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var F=function(e){var t=e.application,n=e.inboundProtocolConfig,N=e.technology,U=e.addedCallBackUrls,D=e.addedOrigins,R=e["data-testid"],x=(0,E.I0)(),F=(0,p.fQ)().getLink,L=I((0,g.useState)(void 0),2),j=L[0],_=L[1],P=I((0,g.useState)(!1),2),Z=P[0],V=P[1],q=I((0,g.useState)("http://localhost:8080"),2),J=q[0],M=q[1],H=I((0,g.useState)(!0),2),W=H[0],B=H[1],Q=s.l.getInstance();(0,g.useEffect)((function(){var e,t;if(!(0,h.Z)(n)){var a={clientID:null===(e=n.oidc)||void 0===e?void 0:e.clientId,clientSecret:null===(t=n.oidc)||void 0===t?void 0:t.clientSecret,serverOrigin:i.D.getDeploymentConfig().customServerHost};_(a)}}),[n]),(0,g.useEffect)((function(){J&&!G(J+k.n.tomcatOIDCAgent.sample.home)&&z([J+k.n.tomcatOIDCAgent.sample.home],J,!0)}),[J]);var z=function(e,r){var i,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!==n.oidc.callbackURLs.length){var s=null!=n&&null!==(i=n.oidc)&&void 0!==i&&i.callbackURLs&&Array.isArray(n.oidc.callbackURLs)?o.y.buildCallBackURLWithSeparator(n.oidc.callbackURLs[0]).split(","):[];e&&!c&&e.forEach((function(e){U.includes(e)||U.push(e)}));var m=[];U&&U.forEach((function(e){s.includes(e)||m.push(e)}));var p=m.length>0,f=!n.oidc.allowedOrigins.includes(r);!f||D.includes(r)||c||D.push(r);var h=T(T({},n.oidc),{},{allowedOrigins:f?[].concat(S(n.oidc.allowedOrigins),S(D)):n.oidc.allowedOrigins,callbackURLs:p?[o.y.buildCallBackUrlWithRegExp([].concat(S(s),m).join(","))]:n.oidc.callbackURLs});(0,a.lp)(t.id,h,l.AI.OIDC).then((function(){c||(V(!0),x((0,d.V_)(f&&p?{description:"Successfully updated the URLs in the application.",level:u.QU.SUCCESS,message:"Updated the URLs"}:p?{description:"Successfully updated the Allowed Origins.",level:u.QU.SUCCESS,message:"Updated the URLs"}:{description:"Successfully updated the Callback URLs in the application.",level:u.QU.SUCCESS,message:"Updated the URLs"})))})).catch((function(){x((0,d.V_)({description:"An error occurred while updating the application.",level:u.QU.ERROR,message:"Error occurred"}))}))}},G=function(e){if(0===n.oidc.callbackURLs.length)return!1;var t=null!=n&&n.oidc?m.EncodeDecodeUtils.decodeURLRegex(n.oidc.callbackURLs[0]):[];return!(!t||!Array.isArray(t)||t.length<1)&&t.includes(e)},Y=function(e){return j?e===C.F.JAVA_EE?(0,O.xx)(j,J):e===C.F.DOT_NET?(0,O.fs)(j):void 0:null},$=function(){return g.createElement(g.Fragment,null,g.createElement(p.xv,null,"Few of the configurations such as ",g.createElement("code",{className:"inline-code"},"callBackURL")," and ",g.createElement("code",{className:"inline-code"},"trustedAudience")," depends on the host that your ",g.createElement("strong",null,"Tomcat")," server is running on."),g.createElement(b.Z,null,g.createElement(b.Z.Group,{widths:"3"},g.createElement(b.Z.Input,{fluid:!0,placeholder:"https://localhost:8080",label:"Enter your Tomcat Host URL",value:J,onChange:function(e,t){!function(e,t){f.I.url(t.value)?(B(!0),M(t.value)):(M(null),B(!1))}(0,t)}}))),!W&&g.createElement(p.v0,{type:"error",content:"Please enter a valid URL"}))},K=function(){return g.createElement("div",{className:"add-user-step"},g.createElement(p.v0,{info:!0,className:"add-user-info"},g.createElement(A.HF,null)))},X=[{stepContent:function(e){return e===C.F.JAVA_EE?g.createElement(g.Fragment,null,g.createElement(y.Z,{basic:!0,"data-testid":"".concat(R,"-download-oidc-tomcat-sample"),className:"sample-action-button download",onClick:function(){Q.publish("application-quick-start-click-download-sample",{type:"java-ee"}),window.open(k.n.tomcatOIDCAgent.sample.artifact,"")}},g.createElement(p.dn,{transparent:!0,icon:(0,c.r2)().java,size:"mini",spaced:"right",floated:"left"}),"Download ",e," Sample",g.createElement(v.Z,{name:"download",className:"ml-2"})),g.createElement(y.Z,{basic:!0,className:"sample-action-button github",onClick:function(){Q.publish("application-quick-start-click-view-source-on-github",{type:"java-ee"}),window.open(k.n.tomcatOIDCAgent.sample.repository,"")}},"View source on GitHub",g.createElement(v.Z,{name:"github",className:"ml-2"}))):e===C.F.DOT_NET?g.createElement(g.Fragment,null,g.createElement(y.Z,{basic:!0,"data-testid":"".concat(R,"-download-dotnet-sample"),className:"sample-action-button download",onClick:function(){Q.publish("application-quick-start-click-download-sample",{type:"dot-net"}),window.open(k.n.dotNet.sample.artifact,"")}},g.createElement(p.dn,{transparent:!0,icon:(0,c.r2)().dotNet,size:"mini",spaced:"right",floated:"left"}),"Download ",e," Sample",g.createElement(v.Z,{name:"download",className:"ml-2"})),g.createElement(y.Z,{basic:!0,className:"sample-action-button github",onClick:function(){Q.publish("application-quick-start-click-view-source-on-github",{type:"dot-net"}),window.open(k.n.dotNet.sample.repository,"")}},"View source on GitHub",g.createElement(v.Z,{name:"github",className:"ml-2"}))):void 0}(N),stepTitle:"Download"},{stepContent:function(e){return e===C.F.JAVA_EE?g.createElement(g.Fragment,null,g.createElement(p.xv,null,"Copy the ",g.createElement("code",{className:"inline-code"},"war")," file downloaded in the previous step to the deployment location in your ",g.createElement("strong",null,"Tomcat")," server. The default deployment location is the ",g.createElement("code",{className:"inline-code"},"webapps")," directory located at the root of your ",g.createElement("strong",null,"Tomcat")," server."),g.createElement(p.xv,null,"If your Tomcat Server is set to auto-deploy applications (and it is set to do this by default) then the ",g.createElement("code",{className:"inline-code"},"war")," file copied into the deployment location will be extracted automatically. If not, go ahead and restart the server to get the extracted sample."),g.createElement(p.xv,null,"Update the ",g.createElement("code",{className:"inline-code"},"oidc-sample-app.properties")," file located in ",g.createElement("code",{className:"inline-code"},"<TOMCAT_HOME>/webapps/oidc-sample-app/WEB-INF/classes")," with the following."),$(),Z||(0,h.Z)(J)||G(J+k.n.tomcatOIDCAgent.sample.sigInRedirectURL)?null:g.createElement(p.v0,{warning:!0},g.createElement("p",null,"In order to try out the sample, you need to add ",g.createElement("strong",null,J+k.n.tomcatOIDCAgent.sample.sigInRedirectURL),"  and ",g.createElement("strong",null,J+k.n.tomcatOIDCAgent.sample.home),"  to ",g.createElement("strong",null,"Authorized redirect URLs"),g.createElement(y.Z,{className:"warning",floated:"right",onClick:function(){return z([J+k.n.tomcatOIDCAgent.sample.sigInRedirectURL,J+k.n.tomcatOIDCAgent.sample.home],J)}},"Add Now"))),g.createElement("div",{className:"code-segment","data-hj-suppress":""},g.createElement(p.pq,{readOnly:!0,withClipboardCopy:!0,showLineNumbers:!0,language:"htmlmixed",sourceCode:Y(C.F.JAVA_EE),options:{lineWrapping:!0},height:"100%",theme:"dark"})),g.createElement(w.Z,{hidden:!0})):e===C.F.DOT_NET?g.createElement(g.Fragment,null,g.createElement(p.xv,null,"Double click the ",g.createElement("code",{className:"inline-code"},"PickupManagerOIDC-v0.1.1.msi")," and follow the on-screen guidance until you get to the app configuration window."),g.createElement(p.xv,null,"Fill the corresponding fields with the following information."),g.createElement("div",{className:"code-segment"},g.createElement(p.pq,{oneLiner:!0,readOnly:!0,withClipboardCopy:!0,showLineNumbers:!0,className:"application-sample-config-editor",language:"htmlmixed",sourceCode:Y(e),beautify:!0,options:{lineWrapping:!0},height:"100%",theme:"dark"})),g.createElement(w.Z,{hidden:!0}),g.createElement(p.xv,null,"Continue the on-screen guidance and complete the installation.")):null}(N),stepTitle:"Configure"},{stepContent:function(e){return e===C.F.JAVA_EE?g.createElement(g.Fragment,null,g.createElement(p.xv,null,"Now that you have added the relevant configurations, restart the ",g.createElement("strong",null,"Tomcat")," server, for the newly added changes to be applied to the application."),!(0,h.Z)(J)&&g.createElement(p.xv,null,"Try out the application by accessing the URL ",g.createElement("a",{href:J+k.n.tomcatOIDCAgent.sample.home,target:"_blank",rel:"noopener noreferrer",className:"link external"},J+k.n.tomcatOIDCAgent.sample.home)),K()):e===C.F.DOT_NET?g.createElement(g.Fragment,null,g.createElement(p.xv,null,"Once the installation is complete the ",g.createElement("code",{className:"inline-code"},"Pickup Manager - OIDC v0.1.1")," application will be launched automatically. You can always re-launch the application by double clicking on the",g.createElement("code",{className:"inline-code"},"Pickup Manager - OIDC v0.1.1")," application available on your Desktop."),K()):null}(N),stepTitle:"Run"}];return g.createElement(g.Fragment,null,function(e){if(e!==C.F.JAVA_EE&&e!==C.F.DOT_NET)return null;return g.createElement("div",{className:"mt-3 mb-6"},g.createElement(p.v0,{type:"info",header:"Prerequisite",content:e===C.F.JAVA_EE?g.createElement(g.Fragment,null,g.createElement(p.xv,null,"You will  need to have ",g.createElement("strong",null,"Apache Tomcat 8.x or 9.x")," installed on your environment to try out the sample."),g.createElement(p.xv,{className:"message-info-text"},"To download ",g.createElement("strong",null,"Apache Tomcat"),", navigate to the official ",g.createElement(p.eb,{link:F("develop.applications.editApplication.oidcApplication.quickStart.mavenDownload"),showEmptyLinkText:!0},"downloads")," page.")):e===C.F.DOT_NET?g.createElement(g.Fragment,null,g.createElement(p.xv,null,"You will need to have ",g.createElement("strong",null,"Microsoft Windows 8")," (Or server equivalent) or greater and ",g.createElement("strong",null,".NET Framework 4.6.1")," (or greater) set up on your environment to try out the integration."),g.createElement(p.xv,{className:"message-info-text"},"To download ",g.createElement("strong",null,".NET Framework"),", navigate to the official ",g.createElement("a",{href:"https://dotnet.microsoft.com/download/dotnet-framework/net461",target:"_blank",rel:"noopener noreferrer",className:"link external"},"downloads")," page.")):void 0}))}(N),g.createElement(r.t,{alwaysOpen:!0,isSidePanelOpen:!0,stepContent:X,isNextEnabled:void 0!==N}))}}}]);