"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[412],{40412:(e,n,t)=>{t.r(n),t.d(n,{SessionManagementSettingsPage:()=>X,default:()=>J});var i,r=t(55007),o=t(60486),a=t(40838),s=t(43939),l=t(6833),u=t(82406),m=t(30382),c=t(43516),d=t(34194),E=t(44194),g=t(10479),f=t(47245),_=t(89141),S=t(41193),p=t(62508),N=t(41206),M=t(37077),O=t(11526),T=t(65388),I=t(96124),b=t(60507);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function h(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,R(i.key),i)}}function v(e,n,t){return n&&h(e.prototype,n),t&&h(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,n,t){return(n=R(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function R(e){var n=function(e,n){if("object"!=A(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=A(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==A(n)?n:n+""}var y=v((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));i=y,C(y,"IDLE_SESSION_TIMEOUT_PATH","/idleSessionTimeoutPeriod"),C(y,"REMEMBER_ME_PERIOD_PATH","/rememberMePeriod"),C(y,"REPLACE_OPERATION","REPLACE"),C(y,"SESSION_MANAGEMENT_CONFIG_FETCH_ERROR_CODE","SMC-00001"),C(y,"SESSION_MANAGEMENT_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","SMC-00002"),C(y,"SESSION_MANAGEMENT_CONFIG_UPDATE_ERROR_CODE","SMC-00003"),C(y,"SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH",0),C(y,"SESSION_MANAGEMENT_CONFIG_FIELD_MAX_LENGTH",100),C(y,"ErrorMessages",{SESSION_MANAGEMENT_CONFIG_FETCH_ERROR_CODE:new b.O(i.SESSION_MANAGEMENT_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the session management configurations.","Error while fetching the session management configurations",null),SESSION_MANAGEMENT_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new b.O(i.SESSION_MANAGEMENT_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the session management configurations.","Invalid Status Code while fetching the session management configurations",null),SESSION_MANAGEMENT_CONFIG_UPDATE_ERROR_CODE:new b.O(i.SESSION_MANAGEMENT_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the session management configurations.","Error while updating the session management configurations",null)});var P=O.AsgardeoSPAClient.getInstance().httpRequest.bind(O.AsgardeoSPAClient.getInstance()),G=t(51835),D=t.n(G),L=t(27975),F=t.n(L),w=t(55900),H=t.n(w),Z=t(21555),U=t.n(Z),j=t(3621),V=t.n(j),k=t(5062),x=t.n(k),q=t(36933),B={};B.styleTagTransform=x(),B.setAttributes=U(),B.insert=H().bind(null,"head"),B.domAPI=F(),B.insertStyleElement=V();D()(q.Z,B);q.Z&&q.Z.locals&&q.Z.locals;function Q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=o.call(t)).done)&&(s.push(i.value),s.length!==n);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return $(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var z="session-management-config-form",X=function(e){var n,t,i,O,b,A=e["data-componentid"],h=(0,E.useRef)(null),v=(0,E.useRef)(null),C=(0,f.v9)((function(e){return e.config.ui.features})),R=(0,r.EV)(null===(n=C.governanceConnectors.scopes)||void 0===n?void 0:n.update),G=(0,f.I0)(),D=(0,g.$)().t,L=Q((0,E.useState)(!1),2),F=L[0],w=L[1],H=Q((0,E.useState)(void 0),2),Z=H[0],U=H[1],j=(t={headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.GET,url:T.D.getServiceResourceEndpoints().serverConfigurations},i=(0,I.Z)(t),O=i.data,b=i.error,{data:O,error:b,isLoading:!b&&!O,isValidating:i.isValidating,mutate:i.mutate}),V=j.data,k=j.isLoading,x=j.mutate,q=j.error;(0,E.useEffect)((function(){V instanceof s.u||q?B():V&&V.idleSessionTimeoutPeriod&&V.rememberMePeriod&&U({idleSessionTimeout:parseInt(V.idleSessionTimeoutPeriod),rememberMePeriod:parseInt(V.rememberMePeriod)})}),[V]);var B=function(){G((0,u.V_)({description:D("sessionManagement:notifications.getConfiguration.error.description"),level:l.QU.ERROR,message:D("sessionManagement:notifications.getConfiguration.error.message")}))};return E.createElement(c.Xg,{title:D("sessionManagement:title"),pageTitle:D("sessionManagement:title"),description:D("sessionManagement:description"),backButton:{onClick:function(){a.m.push(o.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:D("governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(A,"-form-layout")},E.createElement(N.R,{innerRef:h},E.createElement(c.pJ,{className:"form-wrapper",padded:"very"},k?E.createElement(_.Z.Row,{columns:1},E.createElement("div",null,E.createElement("div",{className:"ui card fluid settings-card","data-testid":"".concat(A,"-loading-card")},E.createElement("div",{className:"content no-padding"},E.createElement("div",{className:"header-section"},E.createElement(S.Z,null,E.createElement(S.Z.Header,null,E.createElement(S.Z.Line,{length:"medium"}),E.createElement(S.Z.Line,{length:"full"}))),E.createElement(p.Z,{hidden:!0}))),E.createElement("div",{className:"content extra extra-content"},E.createElement("div",{className:"action-button"},E.createElement(S.Z,null,E.createElement(S.Z.Line,{length:"very short"}))))),E.createElement(p.Z,{hidden:!0}))):E.createElement("div",{className:"session-mgt-form-container"},E.createElement(m.l0,{id:z,uncontrolledForm:!1,onSubmit:function(e){w(!0),function(e){var n={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.PATCH,url:T.D.getServiceResourceEndpoints().serverConfigurations};return P(n).then((function(e){if(200!==e.status&&201!==e.status)throw new s.u(y.ErrorMessages.SESSION_MANAGEMENT_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var n,t=y.ErrorMessages.SESSION_MANAGEMENT_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new s.u(t,e.stack,null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))}([{operation:y.REPLACE_OPERATION,path:y.IDLE_SESSION_TIMEOUT_PATH,value:e.idleSessionTimeout.toString()},{operation:y.REPLACE_OPERATION,path:y.REMEMBER_ME_PERIOD_PATH,value:e.rememberMePeriod.toString()}]).then((function(){G((0,u.V_)({description:D("sessionManagement:notifications.updateConfiguration.success.description"),level:l.QU.SUCCESS,message:D("sessionManagement:notifications.updateConfiguration.success.message")})),x()})).catch((function(){G((0,u.V_)({description:D("sessionManagement:notifications.updateConfiguration.error.description"),level:l.QU.ERROR,message:D("sessionManagement:notifications.updateConfiguration.error.message")}))})).finally((function(){w(!1)}))},initialValues:Z,enableReinitialize:!0,ref:v,noValidate:!0,validate:function(e){var n={idleSessionTimeout:void 0,rememberMePeriod:void 0};return null!=e&&e.idleSessionTimeout&&(!d.I.isInteger(e.idleSessionTimeout)||e.idleSessionTimeout<0)&&(n.idleSessionTimeout=D("sessionManagement:form.validation.idleSessionTimeout")),null!=e&&e.rememberMePeriod&&(!d.I.isInteger(e.rememberMePeriod)||e.rememberMePeriod<0)&&(n.rememberMePeriod=D("sessionManagement:form.validation.rememberMePeriod")),n}},E.createElement(m.gN.Input,{min:y.SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH,ariaLabel:"Idle Session Timeout Field",inputType:"number",name:"idleSessionTimeout",label:D("sessionManagement:form.idleSessionTimeout.label"),placeholder:D("sessionManagement:form.idleSessionTimeout.placeholder"),hint:D("sessionManagement:form.idleSessionTimeout.hint"),required:!0,value:null==Z?void 0:Z.idleSessionTimeout,readOnly:!R,maxLength:null,minLength:y.SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH,width:"100%","data-componentid":"".concat(A,"-idle-session-timeout"),labelPosition:"right"},E.createElement("input",null),E.createElement(M.Z,null,D("common:minutes"))),E.createElement(m.gN.Input,{min:y.SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH,ariaLabel:"Remember Me Period Field",inputType:"number",name:"rememberMePeriod",label:D("sessionManagement:form.rememberMePeriod.label"),placeholder:D("sessionManagement:form.rememberMePeriod.placeholder"),hint:D("sessionManagement:form.rememberMePeriod.hint"),required:!0,value:null==Z?void 0:Z.rememberMePeriod,readOnly:!R,maxLength:null,minLength:y.SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH,width:"100%","data-componentid":"".concat(A,"-remember-me-period"),labelPosition:"right"},E.createElement("input",null),E.createElement(M.Z,null,D("common:minutes"))),R&&E.createElement(m.gN.Button,{form:z,size:"small",buttonType:"primary_btn",name:"update-button","data-componentid":"".concat(A,"-update-button"),loading:F,onClick:function(){var e;null==v||null===(e=v.current)||void 0===e||e.triggerSubmit()},ariaLabel:"Session management form update button",label:D("common:update")}))))))};X.defaultProps={"data-componentid":"session-management-settings-page"};const J=X},36933:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(51139),r=t.n(i),o=t(32234),a=t.n(o)()(r());a.push([e.id,".session-mgt-form-container .ui.grid{display:grid;grid-template-columns:repeat(2, 1fr);column-gap:50px}@media(max-width: 768px){.session-mgt-form-container .ui.grid{grid-template-columns:1fr}}",""]);const s=a}}]);