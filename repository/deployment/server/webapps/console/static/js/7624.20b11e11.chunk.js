"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[7624],{61159:(e,t,n)=>{n.d(t,{$Z:()=>l,S8:()=>s,X9:()=>d,i5:()=>c});var r=n(11526),i=n(76271),o=n(6833),a=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),l=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.POST,url:i.h.getState().config.endpoints.entitlementPoliciesApi};return a(t).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to create the policy.")):Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},c=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.PATCH,url:i.h.getState().config.endpoints.entitlementPoliciesApi};return a(t).then((function(t){return 200!==t.status?Promise.reject(new Error("Failed to update policy: "+e.policyId)):Promise.resolve(t.data)})).catch((function(e){return Promise.reject(e)}))},s=function(e){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.DELETE,url:"".concat(i.h.getState().config.endpoints.entitlementPoliciesApi,"/").concat(e)};return a(t).then((function(e){return 200!==e.status&&204!==e.status?Promise.reject(new Error("Failed to delete the policy.")):Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},d=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:o.f2.POST,url:i.h.getState().config.endpoints.entitlementPolicyPublishApi};return a(t).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to publish the policy.")):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},65194:(e,t,n)=>{n.d(t,{Z:()=>W});var r=n(57438),i=n(84882),o=n(3658),a=n(35390),l=n(77659),c=n(69357),s=n(34159),d=n(73399),u=n(97472),p=n(89497),m=n(9821),h=n(72237),f=n(22557),g=n.n(f),v=n(47513),E=n(50699),y=n(2446),w=n(44194),b=n(10479),x=function(e){return e.DARK="vs-dark",e.HIGH_CONTRAST="hc-black",e.LIGHT="vc",e}({}),A=function(e){return e.Maximized="maximized",e.Minimized="minimized",e}({}),P=n(51835),S=n.n(P),T=n(27975),j=n.n(T),M=n(55900),Z=n.n(M),C=n(21555),k=n.n(C),I=n(3621),_=n.n(I),z=n(5062),O=n.n(z),L=n(97784),N={};N.styleTagTransform=O(),N.setAttributes=k(),N.insert=Z().bind(null,"head"),N.domAPI=j(),N.insertStyleElement=_();S()(L.Z,N);L.Z&&L.Z.locals&&L.Z.locals;var H=n(96274);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D=(0,w.lazy)((function(){return Promise.resolve().then(n.bind(n,52962))})),$=function(e){var t=e.width,n=void 0===t?16:t,r=e.height,i=void 0===r?16:r;return w.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:i,width:n,xmlns:"http://www.w3.org/2000/svg"},w.createElement("polyline",{points:"15 3 21 3 21 9"}),w.createElement("polyline",{points:"9 21 3 21 3 15"}),w.createElement("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),w.createElement("line",{x1:"3",y1:"21",x2:"10",y2:"14"}))},G=function(e){var t=e.width,n=void 0===t?16:t,r=e.height,i=void 0===r?16:r;return w.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:i,width:n,xmlns:"http://www.w3.org/2000/svg"},w.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),w.createElement("path",{d:"M18 10h-4v-4"}),w.createElement("path",{d:"M20 4l-6 6"}),w.createElement("path",{d:"M6 14h4v4"}),w.createElement("path",{d:"M10 14l-6 6"}))},U=function(e){var t,n,f=e.className,P=e["data-componentid"],S=e.policyScript,T=e.onScriptChange,j=(0,b.$)().t,M=(0,w.useRef)(null),Z=h.W.getUserPreferences(),C=R((0,w.useState)(null!==(t=null==Z||null===(n=Z.identityAppsSettings)||void 0===n||null===(n=n.userPreferences)||void 0===n?void 0:n[m.j.CONDITIONAL_AUTH_EDITOR_THEME_STORAGE_KEY])&&void 0!==t?t:x.DARK),2),k=C[0],I=C[1],_=R((0,w.useState)(A.Minimized),2),z=_[0],O=_[1],L=(0,w.useCallback)((function(e){M.current=e}),[M]),N=function(){z!==A.Minimized?O(A.Minimized):O(A.Maximized)},F=w.createElement(D,{loading:null,className:"script-editor",width:"100%",height:"100%",language:"xml",theme:k,value:(0,H._)(S),options:{automaticLayout:!0},onChange:function(e){return T(e||"")},onMount:L,"data-componentid":"".concat(P,"-code-editor")}),U=w.createElement(i.Z,{className:"script-editor-toolbar-container"},w.createElement(d.Z,{variant:"dense"},w.createElement(i.Z,null,w.createElement(p.Z,null,j("authenticationFlow:scriptEditor.panelHeader"))),w.createElement("div",{className:"actions"},z===A.Minimized&&w.createElement(w.Fragment,null,w.createElement("div",{className:"editor-theme-select"},w.createElement(a.Z,{size:"small"},w.createElement(s.Z,{labelId:"demo-select-small-label",id:"demo-select-small",value:k,onChange:function(e){I(e.target.value),function(e){var t,n=h.W.getUserPreferences();if(!(0,E.Z)(n)){var r=(0,v.Z)(n);(0,y.Z)(null==r||null===(t=r.identityAppsSettings)||void 0===t?void 0:t.userPreferences,m.j.CONDITIONAL_AUTH_EDITOR_THEME_STORAGE_KEY,e),h.W.setUserPreferences(r)}}(e.target.value)}},w.createElement(c.Z,{value:x.LIGHT},j("authenticationFlow:scriptEditor.themes.light.label")),w.createElement(c.Z,{value:x.DARK},j("authenticationFlow:scriptEditor.themes.dark.label")),w.createElement(c.Z,{value:x.HIGH_CONTRAST},j("authenticationFlow:scriptEditor.themes.highContrast.label")))))),w.createElement("div",{className:"editor-fullscreen"},w.createElement(u.Z,{title:z===A.Minimized?j("common:goFullScreen"):j("common:exitFullScreen"),"data-componentid":"editor-fullscreen-toggle-tooltip"},w.createElement(l.Z,{size:"small",onClick:N},z===A.Minimized?w.createElement($,{height:16,width:16}):w.createElement(G,{height:16,width:16})))))));return w.createElement(w.Suspense,{fallback:w.createElement(o.Z,null)},w.createElement("div",{className:g()("script-editor-panel",f),"data-componentid":P},U,w.createElement(r.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:z===A.Maximized,onClose:N},w.createElement(i.Z,{className:"full-screen-script-editor-container"},U,F)),F))};U.defaultProps={"data-componentid":"policy-editor"};const W=U},96274:(e,t,n)=>{n.d(t,{$:()=>i,_:()=>r});var r=function(e){if(!e||"string"!=typeof e)return console.warn("Invalid XML input for formatting."),e||"";var t=" ".repeat(4);try{var n=e.replace(/(>)(<)(\/*)/g,"$1\n$2$3");if(n.split("\n").some((function(e){return e.startsWith(t)})))return e;var r=0;return n.split("\n").map((function(e){e.match(/<\/\w/)&&(r-=1);var n=t.repeat(Math.max(r,0)),i="".concat(n).concat(e);return e.match(/<\w[^>]*[^/]>.*$/)&&(r+=1),i})).join("\n")}catch(i){return console.error("Error formatting XML:",i),e}},i=function(e){if(!e||"string"!=typeof e)return console.warn("Invalid XML input for unformatting."),e||"";try{return e.replace(/>\s+</g,"><").replace(/\s{2,}/g," ").trim()}catch(t){return console.error("Error unformatting XML:",t),e}}},97784:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(51139),i=n.n(r),o=n(32234),a=n.n(o)()(i());a.push([e.id,".script-editor-panel{height:100%;width:calc(100% - 16px)}.script-editor-panel .script-editor{border:1px solid var(--oxygen-palette-divider);height:500px}.script-editor-toolbar-container .oxygen-toolbar{display:flex;justify-content:space-between;align-items:center;align-content:center;flex-wrap:nowrap;flex-direction:row;padding-left:0;padding-right:0}.script-editor-toolbar-container .oxygen-toolbar .actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;align-items:center;gap:10px}.script-editor-toolbar-container .oxygen-toolbar .actions .editor-theme-select .MuiSelect-select{padding:6px 15px;min-width:150px}.full-screen-script-editor-container{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:95%;height:90%;padding:32px}.full-screen-script-editor-container .script-editor-toolbar-container{background-color:var(--oxygen-palette-common-white);padding-left:15px;padding-right:15px;border-top-right-radius:var(--oxygen-shape-borderRadius);border-top-left-radius:var(--oxygen-shape-borderRadius)}",""]);const l=a}}]);