"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[9249],{78852:(e,t,n)=>{n.d(t,{c:()=>u});var o,i=n(60507);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=l((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));o=u,c(u,"IMPERSONATION_CONFIG_FETCH_ERROR_CODE","IC-00001"),c(u,"IMPERSONATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","IC-00002"),c(u,"IMPERSONATION_CONFIG_UPDATE_ERROR_CODE","IC-00003"),c(u,"DEFAULT_SUBJECT_TOKEN_EXPIRY_TIME",180),c(u,"ErrorMessages",{IMPERSONATION_CONFIG_FETCH_ERROR_CODE:new i.O(o.IMPERSONATION_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the Impersonation configurations.","Error while fetching the Impersonation configurations",null),IMPERSONATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new i.O(o.IMPERSONATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the Impersonation configurations.","Invalid Status Code while fetching the Impersonation configurations",null),IMPERSONATION_CONFIG_UPDATE_ERROR_CODE:new i.O(o.IMPERSONATION_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the Impersonation configurations.","Error while updating the Impersonation configurations",null)})},19249:(e,t,n)=>{n.r(t),n.d(t,{ImpersonationConfigurationPage:()=>N,default:()=>h});var o=n(55007),i=n(60486),r=n(40838),a=n(43939),l=n(6833),c=n(82406),s=n(30382),u=n(43516),f=n(44194),m=n(10479),p=n(47245),E=n(41206),d=n(89141),g=n(11526),O=n(65388),_=n(96124),R=n(78852),C=g.AsgardeoSPAClient.getInstance().httpRequest.bind(g.AsgardeoSPAClient.getInstance());function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var N=function(e){var t,n,g,b,N,h=e["data-componentid"],v=(0,f.useRef)(null),y=(0,f.useRef)(null),T=(0,p.v9)((function(e){return e.config.ui.features})),S=!(0,o.EV)(null==T||null===(t=T.server)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),A=(0,p.I0)(),w=(0,m.$)().t,P=I((0,f.useState)(void 0),2),D=P[0],F=P[1],M=I((0,f.useState)(!1),2),U=M[0],G=M[1],j=(n={headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.GET,url:O.D.getServiceResourceEndpoints().impersonationConfigurations},g=(0,_.Z)(n),b=g.data,N=g.error,{data:b,error:N,isLoading:!N&&!b,isValidating:g.isValidating,mutate:g.mutate}),k=j.data,V=j.isLoading,L=j.mutate,H=j.error;(0,f.useEffect)((function(){k instanceof a.u||H?A((0,c.V_)({description:w("impersonation:notifications.getConfiguration.error.description"),level:l.QU.ERROR,message:w("impersonation:notifications.getConfiguration.error.message")})):k&&F({enableEmailNotification:k.enableEmailNotification})}),[k]);var Z=function(e){var t=[{operation:"REPLACE",path:"/enableEmailNotification",value:e}];G(!0),function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.PATCH,url:O.D.getServiceResourceEndpoints().impersonationConfigurations};return C(t).then((function(e){if(200!==e.status&&201!==e.status)throw new a.u(R.c.ErrorMessages.IMPERSONATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n=R.c.ErrorMessages.IMPERSONATION_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new a.u(n,e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))}(t).then((function(){A((0,c.V_)({description:w("impersonation:notifications.updateConfiguration.success.description"),level:l.QU.SUCCESS,message:w("impersonation:notifications.updateConfiguration.success.message")}))})).catch((function(){G(!0),A((0,c.V_)({description:w("impersonation:notifications.updateConfiguration.error.description"),level:l.QU.ERROR,message:w("impersonation:notifications.updateConfiguration.error.message")}))})).finally((function(){G(!1),L()}))};return f.createElement(u.Xg,{title:w("impersonation:title"),pageTitle:w("impersonation:title"),description:w("impersonation:description"),backButton:{onClick:function(){r.m.push(i.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:w("governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(h,"-form-layout")},f.createElement(E.R,{innerRef:v},f.createElement(d.Z,{className:"mt-2"},f.createElement(d.Z.Row,{columns:1},f.createElement(d.Z.Column,{width:16},f.createElement(u.pJ,{className:"form-wrapper",padded:"very"},V?f.createElement(u.pO,null):f.createElement(f.Fragment,null,f.createElement(s.l0,{id:"impersonation-configuration-form",uncontrolledForm:!0,onSubmit:null,initialValues:D,enableReinitialize:!0,ref:y,noValidate:!0},f.createElement(d.Z,null,f.createElement(d.Z.Row,{columns:1,key:1},f.createElement(d.Z.Column,{key:"enableEmailNotification"},f.createElement(s.gN.Checkbox,{ariaLabel:"Enable Email Notification",name:"enableEmailNotification",hint:w("impersonation:form.enableEmailNotification.hint"),label:w("impersonation:form.enableEmailNotification.label"),readOnly:S||!S&&U,width:16,"data-componentid":"".concat(h,"-enable-email-notification"),toggle:!0,listen:function(e){Z(e)}}))))))))))))};N.defaultProps={"data-componentid":"impersonation-configuration-page"};const h=N}}]);