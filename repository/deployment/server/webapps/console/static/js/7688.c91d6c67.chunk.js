"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[7688],{96820:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var i=n(88248),r=n(84882),a=n(46461),o=n(3658),c=n(60486),s=n(40838),l=n(6833),d=n(82406),p=n(43516),u=n(50699),m=n(44194),y=n(10479),f=n(51835),g=n.n(f),h=n(27975),b=n.n(h),v=n(55900),x=n.n(v),A=n(21555),S=n.n(A),I=n(3621),E=n.n(I),N=n(5062),O=n.n(N),Z=n(89104),w={};w.styleTagTransform=O(),w.setAttributes=S(),w.insert=x().bind(null,"head"),w.domAPI=b(),w.insertStyleElement=E();g()(Z.Z,w);Z.Z&&Z.Z.locals&&Z.Z.locals;var C=n(47245),L=n(61159),T=n(96124),j=n(76271),R=n(65194),k=n(96274);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,c=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=a.call(n)).done)&&(c.push(i.value),c.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}const D=function(e){var t=e.match,n=e["data-componentid"],f=void 0===n?"policy-edit-page":n,g=t.params.id,h=(0,C.I0)(),b=!(0,u.Z)(g),v=_((0,m.useState)(),2),x=v[0],A=v[1],S=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.GET,url:"".concat(j.h.getState().config.endpoints.entitlementPoliciesApi,"/").concat(e)},i=(0,T.Z)(t?n:null,{shouldRetryOnError:!1}),r=i.data,a=i.error,o=i.isValidating,c=i.mutate;return{data:r,error:a,isLoading:i.isLoading,isValidating:o,mutate:c}}(g||"",b),I=S.data,E=S.isLoading,N=S.error,O=(0,y.$)().t;return m.createElement(p.Xg,{title:E?"":null==I?void 0:I.policyId,backButton:{"data-componentid":"".concat(f,"-edit-policy-page-back-button"),onClick:function(){s.m.push(c.$.getPaths().get("POLICY_ADMINISTRATION"))},text:O("policyAdministration:editPolicy.backBtn")},"data-componentid":f},E&&m.createElement(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},m.createElement(o.Z,null)),N&&m.createElement(i.Z,{severity:"error",title:O("policyAdministration:editPolicy.errorTitle")},O("policyAdministration:editPolicy.errorDescription")),!E&&!N&&I&&m.createElement(r.Z,{className:"script-editor"},m.createElement(R.Z,{policyScript:x||I.policy,"data-componentid":"".concat(f,"-policy-editor"),onScriptChange:function(e){return A(e)}})),!E&&!N&&I&&m.createElement(a.Z,{className:"edit-policy-btn",color:"primary",variant:"contained",onClick:function(){if(I){var e={active:I.active,attributeDTOs:[],policy:(0,k.$)(x),policyEditorData:I.policyEditorData,policyId:I.policyId,policyIdReferences:I.policyIdReferences,policyOrder:I.policyOrder,policySetIdReferences:I.policySetIdReferences,promote:I.promote};(0,L.i5)(e).then((function(){h((0,d.V_)({description:O("policyAdministration:alerts.updateSuccess.description"),level:l.QU.SUCCESS,message:O("policyAdministration:alerts.updateSuccess.message")}))})).catch((function(){h((0,d.V_)({description:O("policyAdministration:alerts.updateFailure.description"),level:l.QU.ERROR,message:O("policyAdministration:alerts.updateFailure.message")}))}))}}},O("common:update")))}},35390:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(92336),r=n(31549),a=n(77452),o=n(14517);const c=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,c=(0,i.__rest)(e,["className"]);const s=(0,o.Z)("oxygen-form-control",n);return(0,r.jsx)(a.Z,Object.assign({ref:t,className:s},c))}));var s,l,d;s='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-form-control {\n  /* Add Styles */ }\n',l=document.getElementsByTagName("head")[0],(d=document.createElement("style")).setAttribute("type","text/css"),d.appendChild(document.createTextNode(s)),l.appendChild(d)},34159:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(92336),r=n(31549),a=n(69673),o=n(14517),c=n(44194),s=n(57806);const l=(0,c.forwardRef)(((e,t)=>{var{className:n,InputLabelProps:c={disableAnimation:!0,focused:!1,shrink:!1},label:l,name:d,required:p}=e,u=(0,i.__rest)(e,["className","InputLabelProps","label","name","required"]);const m=(0,o.Z)("oxygen-select",n),y=Object.assign({disableAnimation:!0,focused:!1,required:p,shrink:!1},c);return(0,r.jsxs)(r.Fragment,{children:[l&&(0,r.jsx)(s.Z,Object.assign({id:d,htmlFor:d},y,{className:(0,o.Z)("oxygen-select-static-label",null==c?void 0:c.className)},{children:l})),(0,r.jsx)(a.Z,Object.assign({ref:t,labelId:d,className:m},u))]})}));var d,p,u;d=".oxygen-select-static-label {\n  margin-top: -40px;\n  margin-left: -14px; }\n",p=document.getElementsByTagName("head")[0],(u=document.createElement("style")).setAttribute("type","text/css"),u.appendChild(document.createTextNode(d)),p.appendChild(u)},89104:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(51139),r=n.n(i),a=n(32234),o=n.n(a)()(r());o.push([e.id,".script-editor{border:1px solid var(--oxygen-palette-divider);padding-right:0;background:#f7f7f7;border-radius:8px;margin-right:10px;margin-left:10px;margin-bottom:10px}.script-editor .script-editor-toolbar-container{padding-left:10px;padding-right:10px}.edit-policy-btn{margin-top:10px;margin-left:20px}",""]);const c=o}}]);