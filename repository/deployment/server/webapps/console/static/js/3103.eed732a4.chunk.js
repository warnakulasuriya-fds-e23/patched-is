"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[3103],{53103:(e,t,n)=>{n.d(t,{$E:()=>ln,C$:()=>Bt,Sf:()=>Cn,ZW:()=>P,A4:()=>_e,T8:()=>We,_v:()=>Sn,AI:()=>Be,RH:()=>wn});var r=n(55007),i=n(1989),a=n(60486),l=n(90302),o=n(40838),c=n(51021),u=n(92e3),s=n(20342),d=n(38463),m=n(6833),f=n(82406),p=n(16590),v=n(96334),h=n(43516),y=n(28676),g=n(44194),b=n(10479),E=n(47245),S=n(26154),R=n(12638),I=n(12099),w=n(917),C=n(21257),A=n(59673),U=n(89141),O=n(6894),x=n(12252);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function _(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e){var t,n,i=e.claim,l=e.update,c=e["data-testid"],u=N((0,g.useState)(!1),2),s=u[0],d=u[1],p=N((0,v.cC)(),2),y=p[0],S=p[1],R=(0,E.I0)(),I=(0,b.$)().t,L=(0,E.v9)((function(e){return e.config.ui.features})),k=(0,r.EV)(null==L||null===(t=L.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),T=(0,C.z)().isSubOrganization,Z=(0,w.Z)().UIConfig,D=!k,P=(0,g.useMemo)((function(){return null!=i&&i.properties?i.properties.filter((function(e){return e.key!==x.Q.SYSTEM_CLAIM_PROPERTY_NAME})):[]}),[i]);return g.createElement(h.pJ,null,g.createElement(U.Z,null,g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{tablet:16,computer:12,largeScreen:9,widescreen:6,mobile:16},g.createElement("p",null,I("claims:local.additionalProperties.hint")),g.createElement(v.e9,{data:P,keyType:"text",keyName:I("claims:local.additionalProperties.key"),valueName:I("claims:local.additionalProperties.value"),submit:y,keyRequiredMessage:I("claims:local.additionalProperties.keyRequiredErrorMessage"),valueRequiredErrorMessage:I("claims:local.additionalProperties.valueRequiredErrorMessage"),requiredField:!0,keyValidation:function(e){return!x.Q.RESTRICTED_PROPERTY_KEYS.includes(e)},keyValidationWarningMessage:null!=Z&&Z.isClaimUniquenessValidationEnabled?g.createElement(A.c,{i18nKey:"claims:local.additionalProperties.isUniqueDeprecationMessage.uniquenessEnabled"},"The 'isUnique' property is deprecated. Please use",g.createElement(h.rU,{external:!1,onClick:function(){o.m.push({hash:"#".concat(h.iU).concat(x.T.GENERAL),pathname:a.$.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",i.id)})}}," Uniqueness Validation "),"option to configure attribute uniqueness."):g.createElement(A.c,{i18nKey:"claims:local.additionalProperties.isUniqueDeprecationMessage.uniquenessDisabled"},"The 'isUnique' property is deprecated."),update:function(e){var t=M({},i);delete t.id,delete t.dialectURI;var n=M(M({},t),{},{properties:_(e)});d(!0),(0,O.iC)(i.id,n).then((function(){R((0,f.V_)({description:I("claims:local.notifications.updateClaim.success.description"),level:m.QU.SUCCESS,message:I("claims:local.notifications.updateClaim.success.message")})),l()})).catch((function(e){R((0,f.V_)({description:(null==e?void 0:e.description)||I("claims:local.notifications.updateClaim.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||I("claims:local.notifications.updateClaim.genericError.message")}))})).finally((function(){d(!1)}))},"data-testid":"".concat(c,"-form-properties-dynamic-field"),readOnly:T()||D}))),!T()&&g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:6},g.createElement(r.di,{when:null==L||null===(n=L.attributeDialects)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update},g.createElement(h.KM,{onClick:function(){S()},"data-testid":"".concat(c,"-submit-button"),loading:s,disabled:s},I("common:update")))))))};P.defaultProps={"data-testid":"edit-local-claims-additional-properties"};var j=n(40018),q=n(92336),Q=n(31549),V=n(87449),z=n(14517);const H=(0,g.forwardRef)(((e,t)=>{var{className:n}=e,r=(0,q.__rest)(e,["className"]);const i=(0,z.Z)("oxygen-table",n);return(0,Q.jsx)(V.Z,Object.assign({ref:t,className:i},r))}));var B=n(17652);const G=(0,g.forwardRef)(((e,t)=>{var{className:n}=e,r=(0,q.__rest)(e,["className"]);const i=(0,z.Z)("oxygen-table-body",n);return(0,Q.jsx)(B.Z,Object.assign({ref:t,className:i},r))}));var F=n(38480);const $=(0,g.forwardRef)(((e,t)=>{var{className:n}=e,r=(0,q.__rest)(e,["className"]);const i=(0,z.Z)("oxygen-table-cell",n);return(0,Q.jsx)(F.Z,Object.assign({ref:t,className:i},r))}));var W=n(33838),X=n(62919),Y=n(87883),K=n(61844),J=n(62808),ee=n(49706),te=n(99769),ne=n(90757);function re(e){return(0,ne.ZP)("MuiTableHead",e)}(0,te.Z)("MuiTableHead",["root"]);const ie=["className","component"],ae=(0,ee.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),le={variant:"head"},oe="thead",ce=g.forwardRef((function(e,t){const n=(0,J.Z)({props:e,name:"MuiTableHead"}),{className:r,component:i=oe}=n,a=(0,X.Z)(n,ie),l=(0,W.Z)({},n,{component:i}),o=(e=>{const{classes:t}=e;return(0,Y.Z)({root:["root"]},re,t)})(l);return(0,Q.jsx)(K.Z.Provider,{value:le,children:(0,Q.jsx)(ae,(0,W.Z)({as:i,className:(0,z.Z)(o.root,r),ref:t,role:i===oe?null:"rowgroup",ownerState:l},a))})})),ue=(0,g.forwardRef)(((e,t)=>{var{className:n}=e,r=(0,q.__rest)(e,["className"]);const i=(0,z.Z)("oxygen-table-head",n);return(0,Q.jsx)(ce,Object.assign({ref:t,className:i},r))}));var se,de,me;se='/**\n * Copyright (c) 2024, WSO2 LLC. (https://www.wso2.com).\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-table-head {\n  /** Add Styles */\n  background-color: var(--oxygen-palette-customComponents-Code-background); }\n',de=document.getElementsByTagName("head")[0],(me=document.createElement("style")).setAttribute("type","text/css"),me.appendChild(document.createTextNode(se)),de.appendChild(me);var fe=n(53080);const pe=(0,ee.ZP)(fe.Z)((()=>({"td, th":{border:0}}))),ve=(0,g.forwardRef)(((e,t)=>{var{className:n,hideBorder:r}=e,i=(0,q.__rest)(e,["className","hideBorder"]);const a=(0,z.Z)("oxygen-table-row",n);return r?(0,Q.jsx)(pe,Object.assign({ref:t,className:a},i)):(0,Q.jsx)(fe.Z,Object.assign({ref:t,className:a},i))}));var he=n(80659),ye=n(22669),ge=n(33839),be=n(30382),Ee=n(50699),Se=n(77757),Re=n(62508),Ie=n(96124),we=n(76271);const Ce=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={headers:{Accept:"application/json","Content-Type":"application/json"},method:m.f2.GET,params:e,url:we.h.getState().config.endpoints.claims},r=(0,Ie.Z)(t?n:null);return{data:r.data,error:r.error,isLoading:r.isLoading,isValidating:r.isValidating,mutate:r.mutate}};function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ae.apply(null,arguments)}function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var xe="local-claim-basic-details-form",Le=[x.Q.GROUPS_CLAIM_URI,x.Q.ROLES_CLAIM_URI,x.Q.APPLICATION_ROLES_CLAIM_URI],_e=function(e){var t,n,i,l,s,d=e.claim,p=e.update,v=e["data-testid"],y=(0,E.I0)(),R=Ue((0,g.useState)(!1),2),I=R[0],A=R[1],L=Ue((0,g.useState)(!1),2),_=L[0],k=L[1],M=Ue((0,g.useState)(!1),2),T=M[0],N=M[1],Z=Ue((0,g.useState)(!1),2),D=Z[0],P=Z[1],q=Ue((0,g.useState)(!1),2),Q=q[0],V=q[1],z=Ue((0,g.useState)(!1),2),B=z[0],F=z[1],W=Ue((0,g.useState)(!1),2),X=W[0],Y=W[1],K=(0,g.useRef)(null),J=(0,g.useRef)(null),ee=(0,g.useRef)(null),te=(0,g.useRef)(null),ne=(0,E.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),re=(0,E.v9)((function(e){return e.config.ui.features})),ie=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.userSchemaURI})),ae=(0,r.EV)(null==re||null===(t=re.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),le=!(null!=re&&null!==(n=re.attributeDialects)&&void 0!==n&&null!==(n=n.disabledFeatures)&&void 0!==n&&n.includes("attributeDialects.sharedProfileValueResolvingMethod")),oe=Ue((0,g.useState)(!0),2),ce=oe[0],se=oe[1],de=Ue((0,g.useState)(void 0),2),me=de[0],fe=de[1],pe=Ue((0,g.useState)(void 0),2),Ie=pe[0],we=pe[1],Oe=Ue((0,g.useState)(!1),2),_e=Oe[0],ke=Oe[1],Me=Ue((0,g.useState)(!1),2),Te=Me[0],Ne=Me[1],Ze=Ue((0,g.useState)(!1),2),De=Ze[0],Pe=Ze[1],je=(0,C.z)().isSubOrganization,qe=Ue((0,g.useState)(!1),2),Qe=qe[0],Ve=qe[1],ze=Ue((0,g.useState)(!1),2),He=ze[0],Be=ze[1],Ge=Ue((0,g.useState)(!1),2),Fe=Ge[0],$e=Ge[1],We=Ue((0,g.useState)(!1),2),Xe=We[0],Ye=We[1],Ke=Ue((0,g.useState)(!1),2),Je=Ke[0],et=Ke[1],tt=Ue((0,g.useState)(!1),2),nt=tt[0],rt=tt[1],it=null==re||null===(i=re.attributeDialects)||void 0===i||null===(i=i.disabledFeatures)||void 0===i?void 0:i.includes(x.Q.DISTINCT_ATTRIBUTE_PROFILES_FEATURE_FLAG),at=(0,b.$)().t,lt=(0,ge.W)().data,ot=(0,w.Z)().UIConfig,ct=[{text:at("claims:local.forms.sharedProfileValueResolvingMethod.options.fromOrigin"),value:m.Hk.FROM_ORIGIN},{text:at("claims:local.forms.sharedProfileValueResolvingMethod.options.fromSharedProfile"),value:m.Hk.FROM_SHARED_PROFILE},{text:at("claims:local.forms.sharedProfileValueResolvingMethod.options.fromFirstFoundInHierarchy"),value:m.Hk.FROM_FIRST_FOUND_IN_HIERARCHY}],ut=Ce(null),st=ut.data,dt=ut.error,mt=(0,g.useMemo)((function(){var e;return(null==st||null===(e=st.find((function(e){return(null==e?void 0:e.dialectURI)===ie})))||void 0===e?void 0:e.id)||null}),[st]);(0,g.useEffect)((function(){dt&&y((0,f.V_)({description:at("console:manage.features.claims.dialects.notifications.fetchDialects.genericError.description"),level:m.QU.ERROR,message:at("console:manage.features.claims.dialects.notifications.fetchDialects.genericError.message")}))}),[dt]),(0,g.useEffect)((function(){var e,t,n,r,i,a,l,o,c,u,s,m;Ve(null!==(e=null==d||null===(t=d.profiles)||void 0===t||null===(t=t.console)||void 0===t?void 0:t.required)&&void 0!==e?e:null==d?void 0:d.required),Be(null!==(n=null==d||null===(r=d.profiles)||void 0===r||null===(r=r.endUser)||void 0===r?void 0:r.required)&&void 0!==n?n:null==d?void 0:d.required),$e(null!==(i=null==d||null===(a=d.profiles)||void 0===a||null===(a=a.selfRegistration)||void 0===a?void 0:a.required)&&void 0!==i?i:null==d?void 0:d.required),Ye(null!==(l=null==d||null===(o=d.profiles)||void 0===o||null===(o=o.console)||void 0===o?void 0:o.readOnly)&&void 0!==l?l:null==d?void 0:d.readOnly),et(null!==(c=null==d||null===(u=d.profiles)||void 0===u||null===(u=u.endUser)||void 0===u?void 0:u.readOnly)&&void 0!==c?c:null==d?void 0:d.readOnly),rt(null!==(s=null==d||null===(m=d.profiles)||void 0===m||null===(m=m.selfRegistration)||void 0===m?void 0:m.readOnly)&&void 0!==s?s:null==d?void 0:d.readOnly)}),[d]),(0,g.useEffect)((function(){lt&&fe((0,ye.t$)(lt))}),[lt]),(0,g.useEffect)((function(){if("true"===(null==me?void 0:me.enableValidator)&&null!==c.rk&&void 0!==c.rk&&c.rk.systemClaims.includes(x.Q.EMAIL_CLAIM_URI)){var e=null===c.rk||void 0===c.rk?void 0:c.rk.systemClaims.indexOf(x.Q.EMAIL_CLAIM_URI);null===c.rk||void 0===c.rk||c.rk.systemClaims.splice(e,1)}else"false"!==(null==me?void 0:me.enableValidator)||null!==c.rk&&void 0!==c.rk&&c.rk.systemClaims.includes(x.Q.EMAIL_CLAIM_URI)||null===c.rk||void 0===c.rk||c.rk.systemClaims.push(x.Q.EMAIL_CLAIM_URI)}),[me,c.rk]),(0,g.useEffect)((function(){var e;null!=d&&d.supportedByDefault&&k(!0),null!=d&&d.readOnly&&P(!0),d&&((null===c.rk||void 0===c.rk?void 0:c.rk.systemClaims.length)<=0||-1===(null===c.rk||void 0===c.rk?void 0:c.rk.systemClaims.indexOf(null==d?void 0:d.claimURI)))?se(!1):se(!0),Pe(null==d||null===(e=d.properties)||void 0===e?void 0:e.some((function(e){return e.key===x.Q.SYSTEM_CLAIM_PROPERTY_NAME&&"true"===e.value})))}),[d,me]),(0,g.useEffect)((function(){var e=Gt();if(d){var t=[];e.forEach((function(e){t.push((0,O.ne)(e))})),Promise.allSettled(t).then((function(e){e.filter((function(e){if("fulfilled"===e.status)return!0;var t,n=e.reason;return 404!==n.code&&y((0,f.V_)({description:null==n||null===(t=n.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description,level:m.QU.ERROR,message:at("claims:dialects.notifications.fetchExternalClaims.genericError.message")})),!1})).flatMap((function(e){return"fulfilled"===e.status?e.value:[]})).find((function(e){return e.mappedLocalClaimURI===d.claimURI}))&&F(!0)})).finally((function(){return Y(!0)}))}}),[d,mt]),(0,g.useEffect)((function(){(0,he.PP)(he.vH.USER_ONBOARDING_CONNECTOR_ID,he.vH.SELF_SIGN_UP_CONNECTOR_ID).then((function(e){we(e)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.detail?y((0,f.V_)({description:at("governanceConnectors:notifications.getConnector.error.description",{description:e.response.data.description}),level:m.QU.ERROR,message:at("governanceConnectors:notifications.getConnector.error.message")})):y((0,f.V_)({description:at("governanceConnectors:notifications.getConnector.genericError.description"),level:m.QU.ERROR,message:at("governanceConnectors:notifications.getConnector.genericError.message")}))}))}),[]),(0,g.useEffect)((function(){(0,Ee.Z)(null==Ie?void 0:Ie.properties)||Ie.properties.map((function(e){e.name===he.vH.ACCOUNT_CONFIRMATION&&("false"===e.value?ke(!1):ke(!0)),e.name===he.vH.SELF_REGISTRATION_ENABLE&&("false"===e.value?Ne(!1):Ne(!0))}))}),[Ie]);var ft,pt,vt,ht,yt,gt,bt,Et,St,Rt,It,wt,Ct,At,Ut,Ot,xt,Lt,_t,kt,Mt,Tt,Nt,Zt,Dt,Pt,jt,qt,Qt,Vt,zt,Ht,Bt,Gt=function(){var e=[];return e.push(x.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_CORE")),e.push(x.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_CORE_USER")),e.push(x.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_EXT_ENT_USER")),e.push(x.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_EXT_SYSTEM")),mt&&e.push(mt),e},Ft=(0,g.useMemo)((function(){return!!ce||!ae}),[re,ne,ce]),$t=function(e){(0,O.wf)(e).then((function(){o.m.push(a.$.getPaths().get("LOCAL_CLAIMS")),y((0,f.V_)({description:at("claims:local.notifications.deleteClaim.success.description"),level:m.QU.SUCCESS,message:at("claims:local.notifications.deleteClaim.success.message")}))})).catch((function(e){y((0,f.V_)({description:(null==e?void 0:e.description)||at("claims:local.notifications.deleteClaim.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||at("claims:local.notifications.deleteClaim.genericError.message")}))})).finally((function(){N(!1)}))},Wt=function(e){var t,n,r,i,a,l,o,s,v,h,g,b,E,S,R,I,w,C;it?t={attributeMapping:d.attributeMapping,claimURI:d.claimURI,description:void 0!==(null==e?void 0:e.description)?null===(n=e.description)||void 0===n?void 0:n.toString():null==d?void 0:d.description,displayName:void 0!==(null==e?void 0:e.name)?null===(r=e.name)||void 0===r?void 0:r.toString():null==d?void 0:d.displayName,displayOrder:c.rk.editAttributes.getDisplayOrder(d.displayOrder,null===(i=e.displayOrder)||void 0===i?void 0:i.toString()),properties:null==d?void 0:d.properties,readOnly:void 0!==(null==e?void 0:e.readOnly)?!!e.readOnly:null==d?void 0:d.readOnly,regEx:void 0!==(null==e?void 0:e.regularExpression)?null===(a=e.regularExpression)||void 0===a?void 0:a.toString():null==d?void 0:d.regEx,required:!(void 0===(null==e?void 0:e.required)||null!=e&&e.readOnly)&&!!e.required,sharedProfileValueResolvingMethod:void 0!==(null==e?void 0:e.sharedProfileValueResolvingMethod)?null==e?void 0:e.sharedProfileValueResolvingMethod:null==d?void 0:d.sharedProfileValueResolvingMethod,supportedByDefault:void 0!==(null==e?void 0:e.supportedByDefault)?!!e.supportedByDefault:null==d?void 0:d.supportedByDefault,uniquenessScope:void 0!==(null==e?void 0:e.uniquenessScope)?null==e?void 0:e.uniquenessScope:null==d?void 0:d.uniquenessScope}:t={attributeMapping:d.attributeMapping,claimURI:d.claimURI,description:void 0!==(null==e?void 0:e.description)?null===(l=e.description)||void 0===l?void 0:l.toString():null==d?void 0:d.description,displayName:void 0!==(null==e?void 0:e.name)?null===(o=e.name)||void 0===o?void 0:o.toString():null==d?void 0:d.displayName,displayOrder:c.rk.editAttributes.getDisplayOrder(d.displayOrder,null===(s=e.displayOrder)||void 0===s?void 0:s.toString()),profiles:{console:{readOnly:void 0!==(null==e?void 0:e.consoleReadOnly)?!!e.consoleReadOnly:null==d||null===(v=d.profiles)||void 0===v||null===(v=v.console)||void 0===v?void 0:v.readOnly,required:void 0!==(null==e?void 0:e.consoleRequired)?!Xe&&!!e.consoleRequired:null==d||null===(h=d.profiles)||void 0===h||null===(h=h.console)||void 0===h?void 0:h.required,supportedByDefault:void 0!==(null==e?void 0:e.consoleSupportedByDefault)?Qe||!!e.consoleSupportedByDefault:null==d||null===(g=d.profiles)||void 0===g||null===(g=g.console)||void 0===g?void 0:g.supportedByDefault},endUser:{readOnly:void 0!==(null==e?void 0:e.endUserReadOnly)?!!e.endUserReadOnly:null==d||null===(b=d.profiles)||void 0===b||null===(b=b.endUser)||void 0===b?void 0:b.readOnly,required:void 0!==(null==e?void 0:e.endUserRequired)?!Je&&!!e.endUserRequired:null==d||null===(E=d.profiles)||void 0===E||null===(E=E.endUser)||void 0===E?void 0:E.required,supportedByDefault:void 0!==(null==e?void 0:e.endUserSupportedByDefault)?He||!!e.endUserSupportedByDefault:null==d||null===(S=d.profiles)||void 0===S||null===(S=S.endUser)||void 0===S?void 0:S.supportedByDefault},selfRegistration:{readOnly:void 0!==(null==e?void 0:e.selfRegistrationReadOnly)?!!e.selfRegistrationReadOnly:null==d||null===(R=d.profiles)||void 0===R||null===(R=R.selfRegistration)||void 0===R?void 0:R.readOnly,required:void 0!==(null==e?void 0:e.selfRegistrationRequired)?!!e.selfRegistrationRequired:null==d||null===(I=d.profiles)||void 0===I||null===(I=I.selfRegistration)||void 0===I?void 0:I.required,supportedByDefault:void 0!==(null==e?void 0:e.selfRegistrationSupportedByDefault)?Fe||!!e.selfRegistrationSupportedByDefault:null==d||null===(w=d.profiles)||void 0===w||null===(w=w.selfRegistration)||void 0===w?void 0:w.supportedByDefault}},properties:null==d?void 0:d.properties,readOnly:void 0!==(null==e?void 0:e.readOnly)?!!e.readOnly:null==d?void 0:d.readOnly,regEx:void 0!==(null==e?void 0:e.regularExpression)?null===(C=e.regularExpression)||void 0===C?void 0:C.toString():null==d?void 0:d.regEx,required:!(void 0===(null==e?void 0:e.required)||null!=e&&e.readOnly)&&!!e.required,sharedProfileValueResolvingMethod:void 0!==(null==e?void 0:e.sharedProfileValueResolvingMethod)?null==e?void 0:e.sharedProfileValueResolvingMethod:null==d?void 0:d.sharedProfileValueResolvingMethod,supportedByDefault:void 0!==(null==e?void 0:e.supportedByDefault)?!!e.supportedByDefault:null==d?void 0:d.supportedByDefault,uniquenessScope:void 0!==(null==e?void 0:e.uniquenessScope)?null==e?void 0:e.uniquenessScope:null==d?void 0:d.uniquenessScope};!De&&le||delete t.sharedProfileValueResolvingMethod,V(!0),(0,O.iC)(d.id,t).then((function(){y((0,f.V_)({description:at("claims:local.notifications.updateClaim.success.description"),level:m.QU.SUCCESS,message:at("claims:local.notifications.updateClaim.success.message")})),p(),y((0,f.wu)(!0)),(0,u.w7)().then((function(e){y((0,f.Um)(e))})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description&&y((0,f.V_)({description:e.response.data.description,level:m.QU.ERROR,message:at("console:manage.notifications.getProfileSchema.error.message")})),y((0,f.V_)({description:at("console:manage.notifications.getProfileSchema.genericError.description"),level:m.QU.ERROR,message:at("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){y((0,f.wu)(!1))}))})).catch((function(e){y((0,f.V_)({description:(null==e?void 0:e.description)||at("claims:local.notifications.updateClaim.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||at("claims:local.notifications.updateClaim.genericError.description")}))})).finally((function(){V(!1)}))};return g.createElement(g.Fragment,null,T&&g.createElement(h.cV,{onClose:function(){return N(!1)},type:"negative",open:T,assertionHint:at("claims:local.confirmation.hint"),assertionType:"checkbox",primaryAction:at("claims:local.confirmation.primaryAction"),secondaryAction:at("common:cancel"),onSecondaryActionClick:function(){return N(!1)},onPrimaryActionClick:function(){return $t(d.id)},"data-testid":"".concat(v,"-delete-confirmation-modal"),closeOnDimmerClick:!1},g.createElement(h.cV.Header,null,at("claims:local.confirmation.header")),g.createElement(h.cV.Message,{attached:!0,negative:!0},at("claims:local.confirmation.message")),g.createElement(h.cV.Content,null,at("claims:local.confirmation.content"))),g.createElement(h.pJ,{padded:"very"},g.createElement(U.Z,null,g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{tablet:16,computer:12,largeScreen:9,widescreen:6,mobile:16},g.createElement(Se.Z,null,g.createElement(Se.Z.Field,{"data-testid":"".concat(v,"-form-attribute-uri-readonly-input")},g.createElement("label",null,at("claims:local.attributes.attributeURI")),g.createElement(h.OR,{value:d?d.claimURI:""}),g.createElement(h.kW,null,"Unique identifier of the attribute.")))))),g.createElement(be.l0,{id:xe,uncontrolledForm:!0,onSubmit:function(e){Wt(e)},"data-testid":v},g.createElement(be.gN.Input,{ariaLabel:"name",inputType:"name",name:"name",label:at("claims:local.forms.name.label"),required:!0,message:at("claims:local.forms.name.requiredErrorMessage"),placeholder:at("claims:local.forms.name.placeholder"),value:null==d?void 0:d.displayName,ref:K,validation:function(e){if(!e.toString().match(/^[A-za-z0-9#+._\-\s]{1,30}$/))return at("claims:local.forms.name.validationErrorMessages.invalidName")},"data-testid":"".concat(v,"-form-name-input"),maxLength:30,minLength:1,hint:at("claims:local.forms.nameHint"),readOnly:je()||Ft}),g.createElement(be.gN.Textarea,{ariaLabel:"description",inputType:"description",name:"description",label:at("claims:local.forms.description.label"),required:!1,requiredErrorMessage:"",placeholder:at("claims:local.forms.description.placeholder"),ref:te,value:null==d?void 0:d.description,maxLength:255,minLength:3,"data-testid":"".concat(v,"-form-description-input"),hint:at("claims:local.forms.descriptionHint"),readOnly:je()||Ft}),!c.rk.localAttributes.createWizard.showRegularExpression&&!ce&&g.createElement(be.gN.Input,{ariaLabel:"regularExpression",inputType:"default",name:"regularExpression",label:at("claims:local.forms.regEx.label"),required:!1,requiredErrorMessage:"",placeholder:at("claims:local.forms.regEx.placeholder"),value:null==d?void 0:d.regEx,ref:J,"data-testid":"".concat(v,"-form-regex-input"),maxLength:x.Q.REGEX_FIELD_MAX_LENGTH,minLength:x.Q.REGEX_FIELD_MIN_LENGTH,hint:at("claims:local.forms.regExHint"),readOnly:je()||Ft}),le&&g.createElement(be.gN.Dropdown,{ariaLabel:"shared-profile-value-resolving-method-dropdown",name:x.Q.SHARED_PROFILE_VALUE_RESOLVING_METHOD_PROPERTY_NAME,label:at("claims:local.forms.sharedProfileValueResolvingMethod.label"),"data-componentid":"".concat(v,"-form-shared-profile-value-resolving-method-dropdown"),hint:at("claims:local.forms.sharedProfileValueResolvingMethod.hint"),disabled:je()||De||Ft,options:ct,value:(null==d?void 0:d.sharedProfileValueResolvingMethod)||m.Hk.FROM_ORIGIN}),d&&(null==ot?void 0:ot.isClaimUniquenessValidationEnabled)&&!ce&&!Le.includes(null==d?void 0:d.claimURI)&&g.createElement(be.gN.Dropdown,{ariaLabel:"uniqueness-scope-dropdown",name:x.Q.UNIQUENESS_SCOPE_PROPERTY_NAME,label:at("claims:local.forms.uniquenessScope.label"),"data-componentid":"".concat(v,"-form-uniqueness-scope-dropdown"),hint:at("claims:local.forms.uniquenessScopeHint"),disabled:je(),options:[{text:at("claims:local.forms.uniquenessScope.options.none"),value:m.UZ.NONE},{text:at("claims:local.forms.uniquenessScope.options.withinUserstore"),value:m.UZ.WITHIN_USERSTORE},{text:at("claims:local.forms.uniquenessScope.options.acrossUserstores"),value:m.UZ.ACROSS_USERSTORES}],value:(null==d?void 0:d.uniquenessScope)||m.UZ.NONE}),!Le.includes(null==d?void 0:d.claimURI)&&X?!ce&&!B&&g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},g.createElement(h.v0,{type:"info",content:g.createElement(g.Fragment,null,at("claims:local.forms.infoMessages.disabledConfigInfo"),g.createElement("div",null,"Add SCIM mapping from",g.createElement(h.rU,{external:!1,onClick:function(){return o.m.push(a.$.getPaths().get("SCIM_MAPPING"))}}," here"),"."))}))):null,it&&d&&!Le.includes(null==d?void 0:d.claimURI)&&d.claimURI!==x.Q.USER_ID_CLAIM_URI&&d.claimURI!==x.Q.USER_NAME_CLAIM_URI&&d.claimURI!==x.Q.GROUPS_CLAIM_URI&&!ce&&X&&g.createElement(be.gN.Checkbox,Ae({ariaLabel:"supportedByDefault",name:"supportedByDefault",label:at("claims:local.forms.supportedByDefault.label"),required:!1,defaultValue:null==d?void 0:d.supportedByDefault,listen:function(e){k(!(null==e||!e.supportedByDefault))},"data-testid":"".concat(v,"-form-supported-by-default-input"),readOnly:je()||Ft,disabled:!B||_e&&Te&&(null==d?void 0:d.claimURI)===x.Q.EMAIL_CLAIM_URI&&"true"===(null==me?void 0:me.enableValidator)},I?{checked:!0}:{defaultValue:null==d?void 0:d.supportedByDefault})),c.rk.editAttributes.showDisplayOrderInput&&!Le.includes(null==d?void 0:d.claimURI)&&_&&!ce&&g.createElement(be.gN.Input,{ariaLabel:"displayOrder",inputType:"default",name:"displayOrder",type:"number",min:"0",label:at("claims:local.forms.displayOrder.label"),required:!1,placeholder:at("claims:local.forms.displayOrder.placeholder"),value:(null==d?void 0:d.displayOrder.toString())||0,maxLength:50,minLength:1,ref:ee,"data-testid":"".concat(v,"-form-display-order-input"),hint:at("claims:local.forms.displayOrderHint"),readOnly:je()||Ft}),it&&d&&!Le.includes(null==d?void 0:d.claimURI)&&c.rk.editAttributes.showRequiredCheckBox&&d.claimURI!==x.Q.GROUPS_CLAIM_URI&&!ce&&X&&g.createElement(be.gN.Checkbox,Ae({ariaLabel:"required",name:"required",required:!1,requiredErrorMessage:"",label:at("claims:local.forms.required.label"),"data-testid":"".concat(v,"-form-required-checkbox"),readOnly:je()||Ft,hint:at("claims:local.forms.requiredHint"),listen:function(e){A(e)},disabled:D||!B||_e&&Te&&(null==d?void 0:d.claimURI)===x.Q.EMAIL_CLAIM_URI&&"true"===(null==me?void 0:me.enableValidator)},D?{value:!1}:{defaultValue:null==d?void 0:d.required})),_e&&!Le.includes(null==d?void 0:d.claimURI)&&Te&&"true"===(null==me?void 0:me.enableValidator)&&(null==d?void 0:d.claimURI)===x.Q.EMAIL_CLAIM_URI&&g.createElement(h.v0,{info:!0},g.createElement(S.Z,{name:"info circle"}),at("claims:local.forms.requiredWarning")),it&&d&&!Le.includes(null==d?void 0:d.claimURI)&&d.claimURI!==x.Q.USER_ID_CLAIM_URI&&d.claimURI!==x.Q.USER_NAME_CLAIM_URI&&d.claimURI!==x.Q.GROUPS_CLAIM_URI&&d.claimURI!==x.Q.EMAIL_CLAIM_URI&&!ce&&X&&g.createElement(be.gN.Checkbox,{ariaLabel:"readOnly",name:"readOnly",required:!1,label:at("claims:local.forms.readOnly.label"),requiredErrorMessage:"",defaultValue:null==d?void 0:d.readOnly,"data-testid":"".concat(v,"-form-readonly-checkbox"),readOnly:je()||Ft,hint:at("claims:local.forms.readOnlyHint"),listen:function(e){P(e)},disabled:!B}),!it&&d&&!ce&&X&&d.claimURI!==x.Q.GROUPS_CLAIM_URI&&g.createElement(g.Fragment,null,g.createElement(Re.Z,null),g.createElement(h.X6,{as:"h4"},at("claims:local.forms.profiles.attributeConfigurations.title")),g.createElement(h.X6,{as:"h6",color:"grey",compact:!0},at("claims:local.forms.profiles.attributeConfigurations.description")),g.createElement(Re.Z,{hidden:!0}),g.createElement(j.Z,{variant:"outlined",elevation:0},g.createElement(H,null,g.createElement(ue,null,g.createElement(ve,null,g.createElement($,null),g.createElement($,{align:"center"},at("claims:local.forms.profiles.administratorConsole")),g.createElement($,{align:"center"},at("claims:local.forms.profiles.endUserProfile")),g.createElement($,{align:"center"},at("claims:local.forms.profiles.selfRegistration")))),g.createElement(G,null,!Le.includes(null==d?void 0:d.claimURI)&&d.claimURI!==x.Q.USER_ID_CLAIM_URI&&d.claimURI!==x.Q.USER_NAME_CLAIM_URI&&(Bt=Ft||je()||!B||_e&&Te&&(null==d?void 0:d.claimURI)===x.Q.EMAIL_CLAIM_URI&&"true"===(null==me?void 0:me.enableValidator),g.createElement(ve,null,g.createElement($,null,at("claims:local.forms.profiles.displayByDefault"),g.createElement(h.u,{compact:!0,trigger:g.createElement(S.Z,{name:"info circle",color:"grey",className:"ml-1"}),content:at("claims:local.forms.profiles.displayByDefaultHint")})),g.createElement($,{align:"center"},g.createElement(be.gN.Checkbox,Ae({ariaLabel:"Display by default in console",name:"consoleSupportedByDefault",defaultValue:null!==(Mt=null==d||null===(Tt=d.profiles)||void 0===Tt||null===(Tt=Tt.console)||void 0===Tt?void 0:Tt.supportedByDefault)&&void 0!==Mt?Mt:null==d?void 0:d.supportedByDefault,"data-componentid":"".concat(v,"-form-console-supported-by-default-checkbox"),readOnly:Bt},Qe?{checked:!0}:{defaultValue:null!==(Nt=null==d||null===(Zt=d.profiles)||void 0===Zt||null===(Zt=Zt.console)||void 0===Zt?void 0:Zt.supportedByDefault)&&void 0!==Nt?Nt:null==d?void 0:d.supportedByDefault}))),g.createElement($,{align:"center"},g.createElement(be.gN.Checkbox,Ae({ariaLabel:"Display by default in My Account",name:"endUserSupportedByDefault",defaultValue:null!==(Dt=null==d||null===(Pt=d.profiles)||void 0===Pt||null===(Pt=Pt.endUser)||void 0===Pt?void 0:Pt.supportedByDefault)&&void 0!==Dt?Dt:null==d?void 0:d.supportedByDefault,"data-componentid":"".concat(v,"-form-end-user-supported-by-default-checkbox"),readOnly:Bt},He?{checked:!0}:{defaultValue:null!==(jt=null==d||null===(qt=d.profiles)||void 0===qt||null===(qt=qt.endUser)||void 0===qt?void 0:qt.supportedByDefault)&&void 0!==jt?jt:null==d?void 0:d.supportedByDefault}))),g.createElement($,{align:"center"},g.createElement(be.gN.Checkbox,Ae({ariaLabel:"Display by default in self-registration",name:"selfRegistrationSupportedByDefault",defaultValue:null!==(Qt=null==d||null===(Vt=d.profiles)||void 0===Vt||null===(Vt=Vt.selfRegistration)||void 0===Vt?void 0:Vt.supportedByDefault)&&void 0!==Qt?Qt:null==d?void 0:d.supportedByDefault,"data-componentid":"".concat(v,"-form-self-registration-supported-by-default-checkbox"),readOnly:Bt},Fe?{checked:!0}:{defaultValue:null!==(zt=null==d||null===(Ht=d.profiles)||void 0===Ht||null===(Ht=Ht.selfRegistration)||void 0===Ht?void 0:Ht.supportedByDefault)&&void 0!==zt?zt:null==d?void 0:d.supportedByDefault}))))),!Le.includes(null==d?void 0:d.claimURI)&&c.rk.editAttributes.showRequiredCheckBox&&(kt=Ft||je()||!B||_e&&Te&&(null==d?void 0:d.claimURI)===x.Q.EMAIL_CLAIM_URI&&"true"===(null==me?void 0:me.enableValidator),g.createElement(ve,null,g.createElement($,null,at("claims:local.forms.profiles.required"),g.createElement(h.u,{compact:!0,trigger:g.createElement(S.Z,{name:"info circle",color:"grey",className:"ml-1"}),content:at("claims:local.forms.profiles.requiredHint")})),g.createElement($,{align:"center"},g.createElement(be.gN.Checkbox,Ae({ariaLabel:"Required in console",name:"consoleRequired",defaultValue:null!==(Et=null==d||null===(St=d.profiles)||void 0===St||null===(St=St.console)||void 0===St?void 0:St.required)&&void 0!==Et?Et:null==d?void 0:d.required,"data-componentid":"".concat(v,"-form-console-required-checkbox"),readOnly:kt||Xe,listen:function(e){Ve(e)}},Xe?{value:!1}:{defaultValue:null!==(Rt=null==d||null===(It=d.profiles)||void 0===It||null===(It=It.console)||void 0===It?void 0:It.required)&&void 0!==Rt?Rt:null==d?void 0:d.required}))),g.createElement($,{align:"center"},g.createElement(be.gN.Checkbox,Ae({ariaLabel:"Required in My Account",name:"endUserRequired",defaultValue:null!==(wt=null==d||null===(Ct=d.profiles)||void 0===Ct||null===(Ct=Ct.endUser)||void 0===Ct?void 0:Ct.required)&&void 0!==wt?wt:null==d?void 0:d.required,"data-componentid":"".concat(v,"-form-end-user-required-checkbox"),readOnly:kt||Je,listen:function(e){Be(e)}},Je?{value:!1}:{defaultValue:null!==(At=null==d||null===(Ut=d.profiles)||void 0===Ut||null===(Ut=Ut.endUser)||void 0===Ut?void 0:Ut.required)&&void 0!==At?At:null==d?void 0:d.required}))),g.createElement($,{align:"center"},g.createElement(be.gN.Checkbox,Ae({ariaLabel:"Required in self-registration",name:"selfRegistrationRequired",defaultValue:null!==(Ot=null==d||null===(xt=d.profiles)||void 0===xt||null===(xt=xt.selfRegistration)||void 0===xt?void 0:xt.required)&&void 0!==Ot?Ot:null==d?void 0:d.required,"data-componentid":"".concat(v,"-form-self-registration-required-checkbox"),readOnly:kt||nt,listen:function(e){$e(e)}},nt?{value:!1}:{defaultValue:null!==(Lt=null==d||null===(_t=d.profiles)||void 0===_t||null===(_t=_t.selfRegistration)||void 0===_t?void 0:_t.required)&&void 0!==Lt?Lt:null==d?void 0:d.required}))))),!Le.includes(null==d?void 0:d.claimURI)&&d.claimURI!==x.Q.USER_ID_CLAIM_URI&&d.claimURI!==x.Q.USER_NAME_CLAIM_URI&&d.claimURI!==x.Q.EMAIL_CLAIM_URI&&(bt=Ft||je()||!B,g.createElement(ve,{hideBorder:!0},g.createElement($,null,at("claims:local.forms.profiles.readonly"),g.createElement(h.u,{compact:!0,trigger:g.createElement(S.Z,{name:"info circle",color:"grey",className:"ml-1"}),content:at("claims:local.forms.profiles.readonlyHint")})),g.createElement($,{align:"center"},g.createElement(be.gN.Checkbox,{ariaLabel:"Read-only in console",name:"consoleReadOnly",defaultValue:null!==(ft=null==d||null===(pt=d.profiles)||void 0===pt||null===(pt=pt.console)||void 0===pt?void 0:pt.readOnly)&&void 0!==ft?ft:null==d?void 0:d.readOnly,"data-componentid":"".concat(v,"-form-console-readOnly-checkbox"),readOnly:bt,listen:function(e){Ye(e)}})),g.createElement($,{align:"center"},g.createElement(be.gN.Checkbox,{ariaLabel:"Read-only in My Account",name:"endUserReadOnly",defaultValue:null!==(vt=null==d||null===(ht=d.profiles)||void 0===ht||null===(ht=ht.endUser)||void 0===ht?void 0:ht.readOnly)&&void 0!==vt?vt:null==d?void 0:d.readOnly,"data-componentid":"".concat(v,"-form-end-user-readOnly-checkbox"),readOnly:bt,listen:function(e){et(e)}})),g.createElement($,{align:"center"},g.createElement(h.u,{trigger:g.createElement(be.gN.Checkbox,{ariaLabel:"Read-only in self-registration",name:"selfRegistrationReadOnly",defaultValue:null!==(yt=null==d||null===(gt=d.profiles)||void 0===gt||null===(gt=gt.selfRegistration)||void 0===gt?void 0:gt.readOnly)&&void 0!==yt?yt:null==d?void 0:d.readOnly,"data-componentid":"".concat(v,"-form-self-registration-readOnly-checkbox"),listen:function(e){rt(e)},readOnly:!0}),content:at("claims:local.forms.profiles.selfRegistrationReadOnlyHint"),compact:!0})))))))),!ce&&!je()&&g.createElement(r.di,{when:null==re||null===(l=re.attributeDialects)||void 0===l||null===(l=l.scopes)||void 0===l?void 0:l.update},g.createElement(be.gN.Button,{form:xe,ariaLabel:"submit",size:"small",buttonType:"primary_btn",loading:Q,disabled:Q,label:at("common:update"),name:"submit"})))),g.createElement(Re.Z,{hidden:!0}),c.rk.editAttributes.showDangerZone&&!Le.includes(null==d?void 0:d.claimURI)&&!ce&&d.claimURI!==x.Q.EMAIL_CLAIM_URI&&!De&&g.createElement(r.di,{when:null==re||null===(s=re.attributeDialects)||void 0===s||null===(s=s.scopes)||void 0===s?void 0:s.delete},g.createElement(h.v9,{sectionHeader:at("common:dangerZone"),"data-testid":"".concat(v,"-danger-zone-group")},g.createElement(h.cN,{actionTitle:at("claims:local.dangerZone.actionTitle"),header:at("claims:local.dangerZone.header"),subheader:at("claims:local.dangerZone.subheader"),onActionClick:function(){return N(!0)},"data-testid":"".concat(v,"-local-claim-delete-danger-zone")}))))};_e.defaultProps={"data-testid":"local-claims-basic-details-edit"};var ke=n(77366),Me=n(23210),Te=n(91626),Ne=n(17498),Ze=n(89497);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==De(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){if(e){if("string"==typeof e)return He(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Be=function(e){var t,n,i=e.claim,a=e.update,l=e.userStores,o=e["data-componentid"],c=void 0===o?"edit-local-claims-mapped-attributes":o,u=(0,E.I0)(),s=Ve((0,g.useState)(!1),2),d=s[0],p=s[1],y=Ve((0,v.cC)(),2),S=y[0],R=y[1],I=(0,b.$)().t,w=(0,E.v9)((function(e){return e.config.ui.features})),C=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.hiddenUserStores})),A=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),L=!(0,r.EV)(null==w||null===(t=w.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),_=(0,g.useState)(function(e){var t,n,r=null==e||null===(t=e.properties)||void 0===t?void 0:t.find((function(e){var t;return(null==e||null===(t=e.key)||void 0===t?void 0:t.toLowerCase())===x.Q.EXCLUDED_USER_STORES_CLAIM_PROPERTY.toLowerCase()}));return(null==r||null===(n=r.value)||void 0===n?void 0:n.split(","))||[]}(i)),k=Ve(_,2),M=k[0],T=k[1];return g.createElement(h.pJ,{padded:"very"},g.createElement(U.Z,{"data-componentid":c},g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{tablet:16,computer:12,largeScreen:12,widescreen:9,mobile:16},g.createElement("p",null,I("claims:local.mappedAttributes.hint")),g.createElement(Re.Z,{hidden:!0}),g.createElement(v.Es,{submitState:S,onSubmit:function(e){var t,n,r,o,c,s=je({},i);delete s.id,delete s.dialectURI;var d,v=null===(t=Array.from(e))||void 0===t?void 0:t.map((function(e){var t=Ve(e,2),n=t[0],r=t[1];return{mappedAttribute:null==r?void 0:r.toString(),userstore:null==n?void 0:n.toString()}})),h=null!==(n=null==i||null===(r=i.attributeMapping)||void 0===r?void 0:r.filter((function(t){var n,r;if(null==t||!t.userstore)return!1;var i=null==t||null===(n=t.userstore)||void 0===n?void 0:n.toUpperCase(),a=[A.toUpperCase()].concat(Qe(null!==(r=null==C?void 0:C.map((function(e){return e.toUpperCase()})))&&void 0!==r?r:[]));return(null==a?void 0:a.includes(i))&&!(null!=e&&e.has(null==t?void 0:t.userstore))})))&&void 0!==n?n:[],y=null!==(o=null==M?void 0:M.filter((function(e){return null==l?void 0:l.find((function(t){var n;return(null==t||null===(n=t.name)||void 0===n?void 0:n.toUpperCase())===(null==e?void 0:e.toUpperCase())}))})))&&void 0!==o?o:[],g=je(je({},s),{},{attributeMapping:[].concat(Qe(h),Qe(v)),properties:[].concat(Qe((null==s||null===(c=s.properties)||void 0===c?void 0:c.filter((function(e){var t;return(null==e||null===(t=e.key)||void 0===t?void 0:t.toLowerCase())!==x.Q.EXCLUDED_USER_STORES_CLAIM_PROPERTY.toLowerCase()})))||[]),[{key:x.Q.EXCLUDED_USER_STORES_CLAIM_PROPERTY,value:null==y?void 0:y.join(",")}])});0===(null==y?void 0:y.length)&&(g.properties=null==g||null===(d=g.properties)||void 0===d?void 0:d.filter((function(e){return e.key!==x.Q.EXCLUDED_USER_STORES_CLAIM_PROPERTY})));p(!0),(0,O.iC)(i.id,g).then((function(){u((0,f.V_)({description:I("claims:local.notifications.updateClaim.success.description"),level:m.QU.SUCCESS,message:I("claims:local.notifications.updateClaim.success.message")})),a()})).catch((function(e){u((0,f.V_)({description:(null==e?void 0:e.description)||I("claims:local.notifications.updateClaim.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||I("claims:local.notifications.updateClaim.genericError.message")}))})).finally((function(){p(!1)}))}},l.map((function(e,t){if(e.enabled||e.id.toUpperCase()===A.toUpperCase())return g.createElement(ke.Z,{defaultExpanded:!0,expanded:!0,key:t,"data-componentid":"".concat(c,"-form-accordion-").concat(e.name)},g.createElement(Te.Z,null,g.createElement(Ze.Z,{variant:"h6"}," ",e.name," ")),g.createElement(Me.Z,null,g.createElement(U.Z,null,g.createElement(U.Z.Row,{columns:2,key:t,verticalAlign:"middle"},g.createElement(U.Z.Column,{width:6},g.createElement("p",null," ",I("claims:local.mappedAttributes.mappedAttributeName"))),g.createElement(U.Z.Column,{width:6},g.createElement(v.gN,{type:"text",name:e.name,placeholder:I("claims:local.forms.attribute.placeholder"),required:!0,requiredErrorMessage:I("claims:local.forms.attribute.requiredErrorMessage"),value:(n=e.name,l=null==i||null===(r=i.attributeMapping)||void 0===r||null===(r=r.find((function(e){return e.userstore.toLowerCase()===n.toLowerCase()})))||void 0===r?void 0:r.mappedAttribute,l||n===A?l:null==i||null===(a=i.attributeMapping)||void 0===a||null===(a=a.find((function(e){return e.userstore.toLowerCase()===A.toLowerCase()})))||void 0===a?void 0:a.mappedAttribute),"data-componentid":"".concat(c,"-form-attribute-name-input-\n                                                                        ").concat(e.name),readOnly:L}))),x.Q.USER_STORE_CONFIG_SUPPORTED_CLAIMS.includes(i.claimURI)&&g.createElement(U.Z.Row,{columns:2,key:t,verticalAlign:"middle"},g.createElement(U.Z.Column,{width:6},g.createElement("p",null,I("claims:local.mappedAttributes.enableForUserStore"))),g.createElement(U.Z.Column,{width:6},g.createElement(Ne.Z,{checked:!M.includes(e.name),onChange:function(t){return n=e.name,r=t.target.checked,void T(r?M.filter((function(e){return e!==n})):[].concat(Qe(M),[n]));var n,r},disabled:L,"data-componentid":"".concat(c)+"-form-userstore-support-checkbox"+"-".concat(e.name)}))))));var n,r,a,l}))))),g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:8},g.createElement(r.di,{when:null==w||null===(n=w.attributeDialects)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update},g.createElement(h.KM,{onClick:function(){R()},"data-componentid":"".concat(c,"-form-submit-button"),loading:d,disabled:d},I("common:update")))))))},Ge=n(99116);function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var We=function(e){var t,n,r=e.dialect,i=e.attributeType,a=e.onUpdate,l=e["data-testid"],o=(0,E.I0)(),c=(0,b.$)().t,u=(0,E.v9)((function(e){return e.config})),s=Fe((0,g.useState)(!1),2),d=s[0],p=s[1];return g.createElement(U.Z,null,g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:6},g.createElement(v.Es,{onSubmit:function(e){var t=e.get("dialectURI").toString();p(!0),(0,O.sD)(r.id,t).then((function(){o((0,f.V_)({description:c("claims:dialects.notifications.updateDialect.success.description"),level:m.QU.SUCCESS,message:c("claims:dialects.notifications.updateDialect.success.message")})),a(window.btoa(t).replace(/=/g,""))})).catch((function(e){o((0,f.V_)({description:(null==e?void 0:e.description)||c("claims:dialects.notifications.updateDialect.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||c("claims:dialects.notifications.updateDialect.genericError.message")}))})).finally((function(){p(!1)}))}},g.createElement(v.gN,{type:"text",placeholder:c("claims:dialects.forms.dialectURI.placeholder",{type:(0,Ge.i)(i,!0)}),value:null==r?void 0:r.dialectURI,required:!0,readOnly:!1===(null===(t=u.ui)||void 0===t?void 0:t.isDefaultDialectEditingEnabled)&&x.Q.DEFAULT_DIALECTS.includes(null==r?void 0:r.id),requiredErrorMessage:c("claims:dialects.forms.dialectURI.requiredErrorMessage"),label:c("claims:dialects.forms.dialectURI.label"),name:"dialectURI","data-testid":"".concat(l,"-form-dialect-uri-input")}),!1===(null===(n=u.ui)||void 0===n?void 0:n.isDefaultDialectEditingEnabled)&&x.Q.DEFAULT_DIALECTS.includes(null==r?void 0:r.id)?null:g.createElement(g.Fragment,null,g.createElement(Re.Z,{hidden:!0}),g.createElement(h.KM,{type:"submit","data-testid":"".concat(l,"-form-submit-button"),loading:d,disabled:d},c("claims:dialects.forms.submit")))))))};We.defaultProps={attributeType:x.Q.OTHERS,"data-testid":"edit-dialect-details"};var Xe=n(79408);function Ye(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||Je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(e){if("string"==typeof e)return et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tt=function(e){var t,n=e.claimID,r=e.update,i=e.dialectID,a=e.submit,l=e.claimURI,o=e.wizard,c=e.onSubmit,u=e.addedClaim,s=e.externalClaims,d=e.attributeType,p=e["data-testid"],y=Ke((0,g.useState)(),2),S=y[0],R=y[1],I=Ke((0,g.useState)(null),2),w=I[0],C=I[1],A=Ke((0,g.useState)(),2),x=A[0],L=A[1],_=Ke((0,g.useState)(!1),2),k=_[0],M=_[1],T=(0,E.I0)(),N=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),Z=(0,b.$)().t;(0,g.useEffect)((function(){M(!0);var e={"exclude-identity-claims":!N,filter:null,limit:null,offset:null,sort:null};(0,O.WN)(e).then((function(e){M(!1),R((0,Xe.f)(e,"displayName",!0))})).catch((function(e){var t,n;T((0,f.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||Z("claims:local.notifications.getClaims.genericError.description"),level:m.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||Z("claims:local.notifications.getClaims.genericError.message")}))})),o||(0,O.g0)(i,n).then((function(e){C(e)})).catch((function(e){var t,n;T((0,f.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||Z("claims:external.notifications.getExternalAttribute.genericError.description",{type:(0,Ge.i)(d)}),level:m.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||Z("claims:external.notifications.getExternalAttribute.genericError.message")}))}))}),[]),(0,g.useEffect)((function(){if(s&&S&&(w||u)){var e=Ye(S);s.forEach((function(t){e=Ye(P(t.mappedLocalClaimURI,e))})),e.unshift(j()),L(e)}}),[s,S,w,u]);var D,P=function(e,t){var n=t||S;return null==n?void 0:n.filter((function(t){return t.claimURI!==e}))},j=function(){return S.find((function(e){return o?(null==e?void 0:e.claimURI)===(null==u?void 0:u.mappedLocalClaimURI):(null==e?void 0:e.claimURI)===(null==w?void 0:w.mappedLocalClaimURI)}))};return g.createElement(v.Es,{onSubmit:function(e){o?(c(function(e){var t=u.claimURI.split(":");if(t.length>1){var n=t.filter((function(e,n){return n<t.length-1})).join(":")+":"+e.get("claimURI");e.set("claimURI",n)}return e}(e)),r()):(0,O.DW)(i,n,{claimURI:l,mappedLocalClaimURI:e.get("localClaim").toString()}).then((function(){T((0,f.V_)({description:Z("claims:external.notifications.updateExternalAttribute.success.description",{type:(0,Ge.i)(d)}),level:m.QU.SUCCESS,message:Z("claims:external.notifications.updateExternalAttribute.success.message",{type:(0,Ge.i)(d)})})),r()})).catch((function(e){var t,n;T((0,f.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||Z("claims:external.notifications.updateExternalAttribute.genericError.description",{type:(0,Ge.i)(d)}),level:m.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||Z("claims:external.notifications.updateExternalAttribute.genericError.message")}))}))},submitState:a},g.createElement(U.Z,null,g.createElement(U.Z.Row,{columns:o?2:1},o&&g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{name:"claimURI",label:Z("claims:external.forms.attributeURI.label",{type:(0,Ge.i)(d,!0)}),required:!0,requiredErrorMessage:Z("claims:external.forms.attributeURI.label",{type:(0,Ge.i)(d,!0)}),placeholder:Z("claims:external.forms.attributeURI.label",{type:(0,Ge.i)(d)}),type:"text",value:(D=u.claimURI.split(":"),D.length>1?D[D.length-1]:u.claimURI),"data-testid":"".concat(p,"-form-claim-uri-input"),validation:function(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Je(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw a}}}}(s);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(Z("claims:external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,Ge.i)(d)}));break}}}catch(i){r.e(i)}finally{r.f()}}})),g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{type:"dropdown",name:"localClaim",label:Z("claims:external.forms.localAttribute.label"),required:!0,requiredErrorMessage:Z("claims:external.forms.localAttribute.requiredErrorMessage"),placeholder:Z("claims:external.forms.attributeURI.placeholder"),search:!0,loading:k,value:o?u.mappedLocalClaimURI:null==w?void 0:w.mappedLocalClaimURI,children:null!==(t=null==x?void 0:x.map((function(e,t){return{key:t,text:g.createElement("div",{className:"multiline"},null==e?void 0:e.displayName,g.createElement(h.EK,{className:"description",compact:!0,withBackground:!1},null==e?void 0:e.claimURI)),value:null==e?void 0:e.claimURI}})))&&void 0!==t?t:[],"data-testid":"".concat(p,"-local-claim-dropdown")})))))};tt.defaultProps={attributeType:x.Q.OTHERS,"data-testid":"edit-external-claim"};var nt=n(37612),rt=n(25134),it=n(43974),at=n(50102),lt=n(42177),ot=n(47018),ct=n(37077),ut=n(95165);function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function dt(){dt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,l=Object.create(a.prototype),o=new L(r||[]);return i(l,"_invoke",{value:A(e,n,o)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var m="suspendedStart",f="suspendedYield",p="executing",v="completed",h={};function y(){}function g(){}function b(){}var E={};u(E,l,(function(){return this}));var S=Object.getPrototypeOf,R=S&&S(S(_([])));R&&R!==n&&r.call(R,l)&&(E=R);var I=b.prototype=y.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,l,o){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==st(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,o)}))}o(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=m;return function(a,l){if(i===p)throw Error("Generator is already running");if(i===v){if("throw"===a)throw l;return{value:e,done:!0}}for(r.method=a,r.arg=l;;){var o=r.delegate;if(o){var c=U(o,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?v:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function U(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,U(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var l=a.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(st(t)+" is not iterable")}return g.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(C.prototype),u(C.prototype,o,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var l=new C(s(e,n,r,i),a);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(I),u(I,c,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(c&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function mt(e,t,n,r,i,a,l){try{var o=e[a](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function ft(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){mt(a,r,i,l,o,"next",e)}function o(e){mt(a,r,i,l,o,"throw",e)}l(void 0)}))}}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ht=function(e){var t,n,r,a,l,o,u,s,d,m=e.submitState,f=e.onSubmit,p=e.values,y=e.claimURIBase,R=e.validateMapping,I=e.setValidateMapping,w=e["data-testid"],C=pt((0,g.useState)(""),2),A=C[0],O=C[1],L=pt((0,g.useState)(!1),2),_=L[0],k=L[1],M=pt((0,g.useState)(!1),2),T=M[0],N=M[1],Z=pt((0,g.useState)(!1),2),D=Z[0],P=Z[1],j=pt((0,g.useState)(!1),2),q=j[0],Q=j[1],V=pt((0,g.useState)(!1),2),z=V[0],H=V[1],B=pt((0,g.useState)(!1),2),G=B[0],F=B[1],$=pt((0,g.useState)(!1),2),W=$[0],X=$[1],Y=pt((0,g.useState)(!0),2),K=Y[0],J=Y[1],ee=pt((0,g.useState)(!0),2),te=ee[0],ne=ee[1],re=pt((0,g.useState)(!1),2),ie=re[0],ae=re[1],le=pt((0,g.useState)(null==p||null===(t=p.get("oidc"))||void 0===t?void 0:t.toString()),2),oe=le[0],ce=le[1],ue=pt((0,g.useState)(null==p||null===(n=p.get("scim"))||void 0===n?void 0:n.toString()),2),se=ue[0],de=ue[1],me=pt((0,g.useState)(!1),2),fe=me[0],pe=me[1],ve=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.userSchemaURI})),he=(0,g.useRef)(null),ye=(0,g.useRef)(null),ge=(0,g.useRef)(null),be=(0,g.useRef)(null),Ee=(0,g.useRef)(null),Se=(0,g.useRef)(null),Re=(0,g.useRef)(null),Ie=(0,g.useRef)(null),we=(0,b.$)().t;(0,g.useEffect)((function(){var e,t;k((null==p||null===(e=p.get("supportedByDefault"))||void 0===e?void 0:e.length)>0),O(null==p||null===(t=p.get("claimURI"))||void 0===t?void 0:t.toString())}),[p]),(0,g.useEffect)((function(){if(!te||!K){var e=ye.current.children[0].children[1].children[0];e.focus(),e.blur(),J(!0),ne(!0)}}),[te,K]);var Ce=function(e,t){t.current=setTimeout((function(){return e(!0)}),500)},Ae=function(e,t){clearTimeout(t.current),e(!1)};return g.createElement(v.Es,{onSubmit:function(e){var t,n,r,i,a,l,o={claimURI:y+"/"+e.get("claimURI").toString().trim(),description:null===(t=e.get("description"))||void 0===t?void 0:t.toString(),displayName:e.get("name").toString(),displayOrder:e.get("displayOrder")?parseInt(null===(n=e.get("displayOrder"))||void 0===n?void 0:n.toString()):0,readOnly:(null===(r=e.get("readOnly"))||void 0===r?void 0:r.length)>0,regEx:null===(i=e.get("regularExpression"))||void 0===i?void 0:i.toString(),required:(null===(a=e.get("required"))||void 0===a?void 0:a.length)>0,supportedByDefault:(null===(l=e.get("supportedByDefault"))||void 0===l?void 0:l.length)>0};if(c.rk.localAttributes.createWizard.customWIzard){if(ie)return;if(""===oe)return;""!==se&&e.set("scim",se),e.set("oidc",oe)}K&&te&&!R&&f(o,e)},submitState:m},g.createElement(U.Z,null,c.rk.localAttributes.createWizard.customWIzard&&g.createElement(g.Fragment,null,g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{type:"text",name:"claimURI",label:we("claims:local.forms.attributeID.label"),className:"mb-1",required:!0,requiredErrorMessage:we("claims:local.forms.attributeID.requiredErrorMessage"),placeholder:we("claims:local.forms.attributeID.placeholder"),value:null==p||null===(r=p.get("claimURI"))||void 0===r?void 0:r.toString(),maxLength:30,loading:R,listen:function(e){O(e.get("claimURI").toString()),ce(e.get("claimURI").toString()),de(e.get("claimURI").toString()),pe(!1)},onMouseOver:function(){Ce(P,Se)},onMouseOut:function(){Ae(P,Se)},validation:function(e,t){if(""===e)return J(!0),void ne(!0);var n=!0;return(!e.match(/^\w+(\.\w+)?$/)||e.length>30)&&(n=!1),n?K&&te?(I(!0),void(c.rk.localAttributes.createWizard.checkOIDCAvailability&&c.rk.localAttributes.checkAttributeNameAvailability(e,"BOTH").then((function(e){I(!1),e.has("SCIM")&&ne(e.get("SCIM")),e.has("OIDC")&&J(e.get("OIDC"))})))):(t.isValid=!1,void t.errorMessages.push(we("claims:dialects.forms.fields.attributeName.validation.alreadyExists"))):(t.isValid=!1,void t.errorMessages.push(we("claims:dialects.forms.fields.attributeName.validation.invalid")))},ref:ye,"data-testid":"".concat(w,"-form-claim-uri-input")}),g.createElement(h.GI,{content:we("claims:local.forms.attributeHint"),inverted:!0,open:D,onClose:function(){Ae(P,Se)},position:"bottom left",context:ye}),g.createElement(ct.Z,{className:"mb-3 ml-0"},g.createElement("em",null,"Attribute URI"),":\xa0","".concat(y,"/").concat(A||""))),g.createElement(U.Z.Column,{width:16},g.createElement(ut.Z,{fluid:!0},g.createElement(ut.Z.Content,null,g.createElement(ut.Z.Header,{className:"mb-2"},we("extensions:manage.attributes.generatedAttributeMapping.title")),g.createElement(ut.Z.Meta,{className:"mb-5"},we("extensions:manage.attributes.generatedAttributeMapping.description")),g.createElement(ut.Z.Description,{className:"mt-1 mb-1"},W&&g.createElement(h.v0,{className:"mb-4",size:"tiny",type:"error",content:"The SCIM mapping value entered contains illegal characters. Only alphabets, numbers, `_` are allowed."}),G&&g.createElement(h.v0,{className:"mb-4",size:"tiny",type:"error",content:"The OpenID Connect mapping value entered contains illegal characters. Only alphabets, numbers, `#`, and `_` are allowed."}),g.createElement(U.Z,{verticalAlign:"middle"},g.createElement(U.Z.Row,{columns:2},g.createElement(U.Z.Column,{width:5},g.createElement(h.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,i.r2)().oidc,spaced:"right",size:"micro",floated:"left"}),g.createElement("span",null,we("extensions:manage.attributes.generatedAttributeMapping.OIDCProtocol"))),g.createElement(U.Z.Column,{width:11},g.createElement(h._D,{maxLength:50,text:oe,errorHandler:function(e){F(e)},onEdit:function(e){ae(e)},onChangesSaved:function(){var e=ft(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return ce(t),e.next=4,c.rk.localAttributes.checkAttributeNameAvailability(t,"OIDC").then((function(e){J(e.get("OIDC"))}));case 4:F(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),!fe&&g.createElement(U.Z.Row,{columns:3},g.createElement(U.Z.Column,{width:3},g.createElement(h.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,i.r2)().scim,spaced:"right",size:"micro",floated:"left"}),g.createElement("span",null,we("extensions:manage.attributes.generatedAttributeMapping.SCIMProtocol"))),g.createElement(U.Z.Column,{width:11},g.createElement(h._D,{maxLength:30,textPrefix:"".concat(ve,":"),validation:"^[a-zA-Z0-9_.-]*$",errorHandler:function(e){X(e)},onEdit:function(e){ae(e)},onChangesSaved:function(){var e=ft(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return de(t),e.next=4,c.rk.localAttributes.checkAttributeNameAvailability(t,"SCIM").then((function(e){ne(e.get("SCIM"))}));case 4:X(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),text:se})),g.createElement(U.Z.Column,{width:2},se?g.createElement(h.GI,{trigger:g.createElement(S.Z,{name:"trash alternate",link:!0,onClick:function(){de(""),pe(!0)}}),content:"Remove Mapping",position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}):null))))))))),g.createElement(U.Z.Row,{columns:c.rk.localAttributes.createWizard.customWIzard?1:2},g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{onMouseOver:function(){Ce(N,Ee)},onMouseOut:function(){Ae(N,Ee)},type:"text",name:"name",label:we("claims:local.forms.name.label"),required:!0,requiredErrorMessage:we("claims:local.forms.name.requiredErrorMessage"),placeholder:we("claims:local.forms.name.placeholder"),value:null==p||null===(a=p.get("name"))||void 0===a?void 0:a.toString(),maxLength:30,ref:he,"data-testid":"".concat(w,"-form-name-input")}),g.createElement(h.GI,{content:we("claims:local.forms.nameHint"),inverted:!0,open:T,trigger:g.createElement("span",null),onClose:function(){Ae(N,Ee)},position:"bottom left",context:he}),c.rk.localAttributes.createWizard.customWIzard&&g.createElement(h.kW,null,we("extensions:manage.attributes.displayNameHint"))),!c.rk.localAttributes.createWizard.customWIzard&&g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{type:"text",name:"claimURI",label:we("claims:local.forms.attributeID.label"),required:!0,requiredErrorMessage:we("claims:local.forms.attributeID.requiredErrorMessage"),placeholder:we("claims:local.forms.attributeID.placeholder"),value:null==p||null===(l=p.get("claimURI"))||void 0===l?void 0:l.toString(),maxLength:30,listen:function(e){O(e.get("claimURI").toString())},onMouseOver:function(){Ce(P,Se)},onMouseOut:function(){Ae(P,Se)},ref:ye,"data-testid":"".concat(w,"-form-claim-uri-input")}),g.createElement(h.GI,{content:we("claims:local.forms.attributeHint"),inverted:!0,open:D,trigger:g.createElement("p",null),onClose:function(){Ae(P,Se)},position:"bottom left",context:ye}),A?g.createElement(ct.Z,null,g.createElement("em",null,"Attribute URI"),":\xa0",y+"/"+A):null)),g.createElement(U.Z.Row,{columns:2},!c.rk.localAttributes.createWizard.showOnlyMandatory&&g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{type:"textarea",name:"description",label:we("claims:local.forms.description.label"),required:!1,requiredErrorMessage:"",placeholder:we("claims:local.forms.description.placeholder"),value:null==p||null===(o=p.get("description"))||void 0===o?void 0:o.toString(),"data-testid":"".concat(w,"-form-description-input")})),!c.rk.localAttributes.createWizard.showOnlyMandatory||!c.rk.localAttributes.createWizard.showRegularExpression&&g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{type:"text",name:"regularExpression",label:we("claims:local.forms.regEx.label"),required:!1,requiredErrorMessage:"",placeholder:we("claims:local.forms.regEx.placeholder"),value:null==p||null===(u=p.get("regularExpression"))||void 0===u?void 0:u.toString(),onMouseOver:function(){Ce(Q,Re)},onMouseOut:function(){Ae(Q,Re)},ref:ge,"data-testid":"".concat(w,"-form-regex-input"),maxLength:x.Q.REGEX_FIELD_MAX_LENGTH,minLength:x.Q.REGEX_FIELD_MIN_LENGTH}),g.createElement(h.GI,{content:we("claims:local.forms.regExHint"),inverted:!0,open:q,trigger:g.createElement("span",null),onClose:function(){Ae(Q,Re)},position:"bottom left",context:ge}))),!c.rk.localAttributes.createWizard.showOnlyMandatory&&g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:16},g.createElement(v.gN,{type:"checkbox",name:"supportedByDefault",required:!1,requiredErrorMessage:"",children:[{label:we("claims:local.forms.supportedByDefault.label"),value:"Support"}],value:null==p?void 0:p.get("supportedByDefault"),listen:function(e){k((null==e?void 0:e.get("supportedByDefault").length)>0)},"data-testid":"".concat(w,"-form-supported-by-default-checkbox")}))),_&&c.rk.localAttributes.createWizard.showDisplayOrder&&g.createElement(U.Z.Row,{columns:16},g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{type:"number",min:"0",name:"displayOrder",label:we("claims:local.forms.displayOrder.label"),required:!1,requiredErrorMessage:"",placeholder:we("claims:local.forms.displayOrder.placeholder"),value:null!==(s=null==p||null===(d=p.get("displayOrder"))||void 0===d?void 0:d.toString())&&void 0!==s?s:"0",onMouseOver:function(){Ce(H,Ie)},onMouseOut:function(){Ae(H,Ie)},ref:be,"data-testid":"".concat(w,"-form-display-order-input")}),g.createElement(h.GI,{content:we("claims:local.forms.displayOrderHint"),inverted:!0,open:z,trigger:g.createElement("span",null),onClose:function(){Ae(H,Ie)},position:"bottom left",context:be}))),!c.rk.localAttributes.createWizard.showOnlyMandatory&&g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:16},g.createElement(v.gN,{type:"checkbox",name:"required",required:!1,requiredErrorMessage:"",children:[{label:we("claims:local.forms.required.label"),value:"Required"}],value:null==p?void 0:p.get("required"),"data-testid":"".concat(w,"-form-required-checkbox")}))),!c.rk.localAttributes.createWizard.showOnlyMandatory||c.rk.localAttributes.createWizard.showReadOnlyAttribute&&g.createElement(U.Z.Row,{column:1},g.createElement(U.Z.Column,null,g.createElement(v.gN,{type:"checkbox",name:"readOnly",required:!1,requiredErrorMessage:"",children:[{label:we("claims:local.forms.readOnly.label"),value:"ReadOnly"}],value:null==p?void 0:p.get("readOnly"),"data-testid":"".concat(w,"-form-readonly-checkbox")})))))};ht.defaultProps={currentStep:0,"data-testid":"local-claim-basic-details-form"};var yt=n(11626);function gt(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||Et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Rt=function(e){var t=e.onSubmit,n=e.submitState,r=e.values,i=e["data-testid"],a=bt((0,g.useState)([]),2),l=a[0],o=a[1],u=(0,E.v9)((function(e){return e.config.ui.hiddenUserStores})),s=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),d=(0,b.$)().t;return(0,g.useEffect)((function(){var e=[];c.rk.localAttributes.createWizard.showPrimaryUserStore&&e.push({description:"",enabled:!0,id:s,name:s,self:""}),(0,yt.ow)().then((function(t){u&&u.length>0?t.data.map((function(t){u.length>0&&!u.includes(t.name)&&e.push(t)})):e.push.apply(e,gt(t.data)),o(e)})).catch((function(){o(e)}))}),[]),g.createElement(U.Z,{"data-testid":i},g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:14},g.createElement("h4",null,d("claims:local.wizard.steps.mapAttributes")),g.createElement("p",null,d("claims:local.mappedAttributes.hint")),g.createElement(Re.Z,{hidden:!0}),g.createElement(Re.Z,{hidden:!0}),g.createElement(v.Es,{submitState:n,onSubmit:function(e){var n={attributeMapping:Array.from(e).map((function(e){var t=bt(e,2),n=t[0];return{mappedAttribute:t[1],userstore:n}}))};t(n,e)}},g.createElement(U.Z,null,l.map((function(e,t){var n;return g.createElement(g.Fragment,null,(null==e?void 0:e.enabled)&&g.createElement(U.Z.Row,{columns:2,key:t},g.createElement(U.Z.Column,{className:"centered-text",width:4},e.name),g.createElement(U.Z.Column,{width:12},g.createElement(v.gN,{type:"text",name:e.name,placeholder:d("claims:local.forms.attribute.placeholder"),required:!0,requiredErrorMessage:d("claims:local.forms.attribute.requiredErrorMessage"),value:null==r||null===(n=r.get(e.name))||void 0===n?void 0:n.toString(),"data-testid":"".concat(i,"-form-store-name-input")}))))})))))))};Rt.defaultProps={"data-testid":"mapped-attributes"};var It=n(73432),wt=n(66528),Ct=function(e){var t,n=e.data,r=e["data-testid"],i=(0,b.$)().t,a=function(e,t){return g.createElement(U.Z.Row,{className:"summary-field",columns:2},g.createElement(U.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},g.createElement("div",{className:"label"},e)),g.createElement(U.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},g.createElement("div",{className:"value"},t)))},l=function(e){return g.createElement(It.Z.Item,null,g.createElement(ct.Z,{basic:!0,circular:!0},e))};return g.createElement(U.Z,{className:"wizard-summary","data-testid":r},g.createElement(U.Z.Row,null,g.createElement(U.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},g.createElement("div",{className:"general-details"},g.createElement("h3",null,n.displayName),g.createElement("div",{className:"description"},n.description)))),g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{textAlign:"center"},g.createElement(It.Z,null,n.supportedByDefault&&l(i("claims:local.wizard.summary.supportedByDefault")),n.required&&l(i("claims:local.wizard.summary.required")),n.readOnly&&l(i("claims:local.wizard.summary.readOnly"))))),n.claimURI?a(i("claims:local.wizard.summary.attributeURI"),g.createElement(Se.Z.Field,null,g.createElement(h.OR,{value:n?null==n?void 0:n.claimURI:""}))):null,n.displayOrder?a(i("claims:local.wizard.summary.displayOrder"),n.displayOrder):null,n.regEx?a(i("claims:local.wizard.summary.regEx"),n.regEx):null,(null===(t=n.attributeMapping)||void 0===t?void 0:t.length)>0?a("Mapped attributes",g.createElement(wt.Z,null,g.createElement(wt.Z.Header,null,g.createElement(wt.Z.Row,null,g.createElement(wt.Z.HeaderCell,null,i("claims:local.wizard.summary.userstore")),g.createElement(wt.Z.HeaderCell,null,i("claims:local.wizard.summary.attribute")))),g.createElement(wt.Z.Body,null,n.attributeMapping.map((function(e,t){return g.createElement(wt.Z.Row,{key:t,columns:2},g.createElement(wt.Z.Cell,null,e.userstore),g.createElement(wt.Z.Cell,null,e.mappedAttribute))}))))):null)};Ct.defaultProps={"data-testid":"local-claims-summary"};var At=n(66470),Ut=function(e){var t,n=e.submitState,r=e.onSubmit,i=e.values,a=e["data-testid"],l=(0,b.$)().t;return g.createElement(v.Es,{onSubmit:function(e){r(e)},submitState:n},g.createElement(v.gN,{type:"text",name:"dialectURI",label:l("claims:dialects.forms.dialectURI.label",{type:(0,At.i)(x.Q.OTHERS,!0)}),required:!0,requiredErrorMessage:l("claims:dialects.forms.dialectURI.requiredErrorMessage"),placeholder:l("claims:dialects.forms.dialectURI.placeholder"),value:null==i||null===(t=i.get("dialectURI"))||void 0===t?void 0:t.toString(),"data-testid":"".concat(a,"-form-dialect-uri-input")}))};Ut.defaultProps={"data-testid":"dialect-details"};var Ot=n(25257),xt=n(29419),Lt=n(78880),_t=n(75456),kt=n(43);const Mt=(0,Lt.Z)((function(e,t){var n=(0,kt.Z)(t);return(0,_t.Z)(n)&&(n=void 0),(0,_t.Z)(e)?(0,Ot.Z)(e,(0,xt.Z)(t,1,_t.Z,!0),void 0,n):[]}));var Tt=n(51080),Nt=function(){return{general:Tt.r}},Zt=function(){return{general:Tt.r}};function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Dt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(){Qt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,l=Object.create(a.prototype),o=new L(r||[]);return i(l,"_invoke",{value:A(e,n,o)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var m="suspendedStart",f="suspendedYield",p="executing",v="completed",h={};function y(){}function g(){}function b(){}var E={};u(E,l,(function(){return this}));var S=Object.getPrototypeOf,R=S&&S(S(_([])));R&&R!==n&&r.call(R,l)&&(E=R);var I=b.prototype=y.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,l,o){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Dt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,o)}))}o(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=m;return function(a,l){if(i===p)throw Error("Generator is already running");if(i===v){if("throw"===a)throw l;return{value:e,done:!0}}for(r.method=a,r.arg=l;;){var o=r.delegate;if(o){var c=U(o,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?v:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function U(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,U(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var l=a.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Dt(t)+" is not iterable")}return g.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(C.prototype),u(C.prototype,o,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var l=new C(s(e,n,r,i),a);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(I),u(I,c,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(c&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Vt(e,t,n,r,i,a,l){try{var o=e[a](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ht(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Bt=function(e){var t=e.open,n=e.onClose,r=e.update,i=e.claimURIBase,l=e["data-testid"],s=zt((0,g.useState)(0),2),d=s[0],p=s[1],y=zt((0,g.useState)(null),2),R=y[0],I=y[1],w=zt((0,g.useState)(null),2),C=w[0],A=w[1],L=zt((0,g.useState)(null),2),_=L[0],k=L[1],M=zt((0,g.useState)(null),2),T=M[0],N=M[1],Z=zt((0,g.useState)(!1),2),D=Z[0],P=Z[1],j=zt((0,g.useState)(!1),2),q=j[0],Q=j[1],V=zt((0,g.useState)(!1),2),z=V[0],H=V[1],B=zt((0,g.useState)(!1),2),G=B[0],F=B[1],$=zt((0,g.useState)(!1),2),W=$[0],X=$[1],Y=zt((0,g.useState)(null),2),K=Y[0],J=Y[1],ee=(0,g.useRef)(!1),te=(0,E.v9)((function(e){return e.config.ui.hiddenUserStores})),ne=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),re=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.userSchemaURI})),ie=zt((0,v.cC)(),2),ae=ie[0],le=ie[1],oe=zt((0,v.cC)(),2),ce=oe[0],ue=oe[1],se=(0,E.I0)(),de=(0,b.$)().t,me=zt((0,h.IK)(),3),fe=me[0],pe=me[1],ve=me[2],he=it.l.getInstance(),ye=(0,yt.zU)(null).data;(0,g.useEffect)((function(){var e=!1;te&&te.length>0?c.rk.localAttributes.isUserStoresHidden(te).then((function(t){t.map((function(t){t.enabled&&(e=!0)})),P(t.length>0&&e)})):(null==ye?void 0:ye.length)>0?P(!0):P(!1)}),[te,ye]),(0,g.useEffect)((function(){W&&G&&K&&(o.m.push({pathname:a.$.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",K),search:x.Q.NEW_LOCAL_CLAIM_URL_SEARCH_PARAM}),Q(!1),n(),r())}),[W,G,K]);var ge=function(){var e,t=(e=Qt().mark((function e(t,i,a){return Qt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.rk.localAttributes.createCustomDialect){e.next=3;break}return e.next=3,c.rk.localAttributes.isSCIMCustomDialectAvailable().then((function(e){""===e&&(0,O.CM)(re)}));case 3:Q(!0),(0,O.ij)(t).then((function(e){if(he.publish("manage-attribute-add-new-attribute"),se((0,f.V_)({description:de("claims:local.notifications.addLocalClaim.success.description"),level:m.QU.SUCCESS,message:de("claims:local.notifications.addLocalClaim.success.message")})),c.rk.localAttributes.mapClaimToCustomDialect&&i?(a?F(!0):c.rk.localAttributes.isSCIMCustomDialectAvailable().then((function(e){(0,O.wg)(e,{claimURI:"".concat(re,":").concat(i.get("scim")),mappedLocalClaimURI:t.claimURI}).then((function(){be()})).finally((function(){return F(!0)}))})),c.rk.localAttributes.getDialect(x.Q.OIDC_MAPPING[0]).then((function(e){(0,O.wg)(e.id,{claimURI:"".concat(i.get("oidc")),mappedLocalClaimURI:t.claimURI}).finally((function(){return X(!0)}))}))):(X(!0),F(!0)),(0,Ee.Z)(e.headers.location))n(),r(),Q(!1);else{var l=e.headers.location,o=l.substring(l.lastIndexOf("/")+1);J(o)}})).catch((function(e){Q(!1),pe({description:(null==e?void 0:e.description)||de("claims:local.notifications.addLocalClaim.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||de("claims:local.notifications.addLocalClaim.genericError.message")})}));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){Vt(a,r,i,l,o,"next",e)}function o(e){Vt(a,r,i,l,o,"throw",e)}l(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}(),be=function(){se((0,f.wu)(!0)),(0,u.w7)().then((function(e){se((0,f.Um)(e))})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description&&se((0,f.V_)({description:e.response.data.description,level:m.QU.ERROR,message:de("console:manage.notifications.getProfileSchema.error.message")})),se((0,f.V_)({description:de("console:manage.notifications.getProfileSchema.genericError.description"),level:m.QU.ERROR,message:de("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){se((0,f.wu)(!1))}))},Se=[{content:g.createElement(ht,{submitState:ae,validateMapping:z,setValidateMapping:H,onSubmit:function(e,t){var n=jt(jt({},R),e),r=new Map;I(n),A(t),t.has("scim")?r.set("scim",t.get("scim").toString()):ee.current=!0,t.has("oidc")&&r.set("oidc",t.get("oidc").toString()),N(r),c.rk.localAttributes.createWizard.identifyAsCustomAttrib&&(n.properties&&n.properties.length>0?n.properties.push({key:"USER_CUSTOM_ATTRIBUTE",value:"TRUE"}):n.properties=[{key:"USER_CUSTOM_ATTRIBUTE",value:"TRUE"}]),D?p(1):(n.attributeMapping=[{mappedAttribute:n.claimURI.split("/").pop(),userstore:ne}],ge(n,r,!(null==ee||!ee.current)))},values:C,claimURIBase:i,"data-testid":"".concat(l,"-local-claims-basic-details")}),icon:Zt().general,title:de("claims:local.wizard.steps.general")},D?{content:g.createElement(Rt,{submitState:ce,onSubmit:function(e,t){var n=jt(jt({},R),e);I(n),k(t),c.rk.localAttributes.createWizard.showPrimaryUserStore||n.attributeMapping.push({mappedAttribute:n.claimURI.split("/").pop(),userstore:ne}),c.rk.localAttributes.createWizard.showSummary?p(2):ge(n,T,!(null==ee||!ee.current))},values:_,"data-testid":"".concat(l,"-mapped-attributes")}),icon:Zt().general,title:de("claims:local.wizard.steps.mapAttributes")}:void 0,c.rk.localAttributes.createWizard.showSummary?{content:g.createElement(Ct,{data:R,"data-testid":"".concat(l,"-local-claims-summary")}),icon:Zt().general,title:de("claims:local.wizard.steps.summary")}:void 0].filter((function(e){return void 0!==e})),Re=function(){if(1===Se.length&&le(),2===Se.length)switch(d){case 0:le();break;case 1:ue()}switch(d){case 0:le();break;case 1:ue();break;case 2:ge(R,T,!(null==ee||!ee.current))}};return g.createElement(ot.Z,{dimmer:"blurring",size:"small",className:"wizard application-create-wizard",open:t,onClose:n,"data-testid":l,closeOnDimmerClick:!1},g.createElement(ot.Z.Header,{className:"wizard-header"},de("claims:local.wizard.header"),C&&C.get("name")?" - "+C.get("name"):""),Se.length>1&&g.createElement(ot.Z.Content,{className:"steps-container","data-testid":"".concat(l,"-steps")},g.createElement(h.Rg.Group,{current:d},Se.map((function(e,t){return g.createElement(h.Rg.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(l,"-step-").concat(t)})})))),g.createElement(ot.Z.Content,{className:"content-container",scrolling:!0},fe&&ve,Se[d].content),g.createElement(ot.Z.Actions,null,g.createElement(U.Z,null,g.createElement(U.Z.Row,{column:1},g.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},g.createElement(h.Qj,{floated:"left",onClick:function(){return n()}},"Cancel")),g.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},d<Se.length-1&&g.createElement(h.KM,{floated:"right",onClick:Re,loading:z,"data-testid":"".concat(l,"-next-button")},de("common:next")," ",g.createElement(S.Z,{name:"arrow right"})),d===Se.length-1&&g.createElement(h.KM,{floated:"right",onClick:Re,"data-testid":"".concat(l,"-finish-button"),loading:q||z,disabled:q},de("common:finish")),d>0&&g.createElement(h.Qj,{floated:"right",onClick:function(){p(d-1)},"data-testid":"".concat(l,"-previous-button")},g.createElement(S.Z,{name:"arrow left"})," ",de("common:previous")))))))};function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Ft(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Kt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw a}}}}function $t(e){return function(e){if(Array.isArray(e))return Jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(){Wt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,l=Object.create(a.prototype),o=new L(r||[]);return i(l,"_invoke",{value:A(e,n,o)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var m="suspendedStart",f="suspendedYield",p="executing",v="completed",h={};function y(){}function g(){}function b(){}var E={};u(E,l,(function(){return this}));var S=Object.getPrototypeOf,R=S&&S(S(_([])));R&&R!==n&&r.call(R,l)&&(E=R);var I=b.prototype=y.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,l,o){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Gt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,o)}))}o(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=m;return function(a,l){if(i===p)throw Error("Generator is already running");if(i===v){if("throw"===a)throw l;return{value:e,done:!0}}for(r.method=a,r.arg=l;;){var o=r.delegate;if(o){var c=U(o,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?v:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function U(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,U(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var l=a.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Gt(t)+" is not iterable")}return g.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(C.prototype),u(C.prototype,o,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var l=new C(s(e,n,r,i),a);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(I),u(I,c,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(c&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Xt(e,t,n,r,i,a,l){try{var o=e[a](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||Kt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Bt.defaultProps={"data-testid":"add-local-claims-wizard"};var en=function(e){var t,n,r=e.dialectId,i=e.update,l=e.wizard,u=e.onSubmit,s=e.externalClaims,d=e.triggerSubmit,p=e.attributeType,y=e.claimDialectUri,S=e.mappedLocalClaims,R=e.cancel,I=e["data-testid"],w=Yt((0,g.useState)(),2),C=w[0],L=w[1],_=Yt((0,g.useState)(),2),k=_[0],M=_[1],T=Yt((0,g.useState)(),2),N=T[0],Z=T[1],D=Yt((0,g.useState)([]),2),P=D[0],j=D[1],q=Yt((0,g.useState)(!1),2),Q=q[0],V=q[1],z=Yt((0,g.useState)(""),2),H=z[0],B=z[1],G=Yt((0,g.useState)(!0),2),F=G[0],$=G[1],W=Yt((0,g.useState)(!1),2),X=W[0],Y=W[1],K=Yt((0,g.useState)(!1),2),J=K[0],ee=K[1],te=Yt((0,g.useState)(!0),2),ne=te[0],re=te[1],ie=Yt((0,g.useState)(!1),2),ae=ie[0],le=ie[1],oe=Yt((0,v.cC)(),2),ce=oe[0],ue=oe[1],se=(0,E.I0)(),de=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),me=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.userSchemaURI})),fe=(0,b.$)().t;(0,g.useEffect)((function(){"oidc"!==p&&y!==me&&(P&&k&&0!==P.length&&0!==k.length?ee(!1):ee(!0))}),[P,k]),(0,g.useEffect)((function(){c.k9.serverSupportedClaimsAvailable.includes(y)&&0===(null==P?void 0:P.length)?le(!0):le(!1),"oidc"!==p&&y!==me?P&&0!==P.length?k&&0!==k.length?ee(!1):ee(!0):ee(!1):"oidc"===p||y!==me||k&&0!==k.length?ee(!1):ee(!0)}),[P,k]),(0,g.useEffect)((function(){c.k9.serverSupportedClaimsAvailable.includes(y)?pe().finally():re(!1)}),[]);var pe=function(){var e,t=(e=Wt().mark((function e(){var t,n,i;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(!0),e.prev=1,e.next=4,(0,O.jb)(r);case 4:t=e.sent,j(t.attributes),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),se((0,f.V_)({description:(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)||fe("claims:local.notifications.getClaims.genericError.description"),level:m.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.message)||fe("claims:local.notifications.getClaims.genericError.message")}));case 11:return e.prev=11,re(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){Xt(a,r,i,l,o,"next",e)}function o(e){Xt(a,r,i,l,o,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,g.useEffect)((function(){if(s&&s.length&&!ne){var e=new Set(s.map((function(e){return e.claimURI})));j($t((null!=P?P:[]).filter((function(t){return!e.has(t)}))))}}),[s,ne]),(0,g.useEffect)((function(){var e={"exclude-identity-claims":!de,filter:null,limit:null,offset:null,sort:null};$(!0),(0,O.WN)(e).then((function(e){var t=e.sort((function(e,t){return e.displayName>t.displayName?1:-1}));L(t),Z(t),$(!1)})).catch((function(e){var t,n;se((0,f.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||fe("claims:local.notifications.getClaims.genericError.description"),level:m.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||fe("claims:local.notifications.getClaims.genericError.message")})),$(!1)}))}),[]),(0,g.useEffect)((function(){if(s&&C){var e=$t(C);null==S||S.forEach((function(t){e=$t(ve(t,e))})),Z(e),M(e)}}),[s,Q]),(0,g.useEffect)((function(){C&&V(!0)}),[C]);var ve=function(e,t){var n=t||C;return null==n?void 0:n.filter((function(t){return t.claimURI!==e}))};return F&&ne?g.createElement(h.pO,null):g.createElement(v.Es,{onSubmit:function(e){l?(u(e),B(""),ue()):(Y(!0),(0,O.wg)(r,{claimURI:e.get("claimURI").toString(),mappedLocalClaimURI:e.get("localClaim").toString()}).then((function(){se((0,f.V_)({description:fe("claims:external.notifications.addExternalAttribute.success.description",{type:(0,Ge.i)(p)}),level:m.QU.SUCCESS,message:fe("claims:external.notifications.addExternalAttribute.success.message",{type:(0,Ge.i)(p,!0)})})),ue(),i(),!l&&R&&R()})).catch((function(e){se((0,f.V_)({description:(null==e?void 0:e.description)||fe("claims:external.notifications.addExternalAttribute.genericError.description",{type:(0,Ge.i)(p)}),level:m.QU.ERROR,message:(null==e?void 0:e.message)||fe("claims:external.notifications.addExternalAttribute.genericError.message")}))})).finally((function(){Y(!1)})))},resetState:ce,submitState:d},g.createElement(U.Z,null,g.createElement(U.Z.Row,{columns:2},g.createElement(U.Z.Column,{width:8},c.k9.serverSupportedClaimsAvailable.includes(y)?g.createElement(v.gN,{name:"claimURI",label:fe("claims:external.forms.attributeURI.label",{type:(0,Ge.i)(p,!0)}),required:!0,requiredErrorMessage:fe("claims:external.forms.attributeURI.requiredErrorMessage",{type:(0,Ge.i)(p,!0)}),placeholder:fe("claims:external.forms.attributeURI.placeholder",{type:(0,Ge.i)(p)}),type:"dropdown","data-testid":"".concat(I,"-form-claim-uri-input"),listen:function(e){B(e.get("claimURI").toString())},validation:function(e,t){var n,r=Ft(s);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(fe("claims:external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,Ge.i)(p)}));break}}}catch(i){r.e(i)}finally{r.f()}},children:null!==(t=null==P?void 0:P.map((function(e,t){return{key:t,text:e.split(":").pop(),value:e.split(":").pop()}})))&&void 0!==t?t:[]}):g.createElement(v.gN,{name:"claimURI",label:fe("claims:external.forms.attributeURI.label",{type:(0,Ge.i)(p,!0)}),required:!0,requiredErrorMessage:fe("claims:external.forms.attributeURI.requiredErrorMessage",{type:(0,Ge.i)(p,!0)}),placeholder:fe("claims:external.forms.attributeURI.placeholder",{type:(0,Ge.i)(p)}),type:"text",listen:function(e){B(e.get("claimURI").toString())},maxLength:50,"data-testid":"".concat(I,"-form-claim-uri-input"),validation:function(e,t){var n,r=Ft(s);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(fe("claims:external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,Ge.i)(p)}));break}}}catch(i){r.e(i)}finally{r.f()}}})),g.createElement(U.Z.Column,{width:8},g.createElement(v.gN,{loading:F,type:"dropdown",name:"localClaim",label:fe("claims:external.forms.localAttribute.label"),required:!0,requiredErrorMessage:fe("claims:external.forms.localAttribute.requiredErrorMessage"),placeholder:fe("claims:external.forms.localAttribute.placeholder"),search:function(e){return e},onSearchChange:function(e,t){var n=t.searchQuery,r=k.filter((function(e){return e.displayName.toLowerCase().includes(n.toLowerCase())}));Z(r)},onClose:function(){Z(k)},children:null!==(n=null==N?void 0:N.map((function(e,t){return{key:t,text:g.createElement("div",{className:"multiline"},null==e?void 0:e.displayName,g.createElement(h.EK,{className:"description",compact:!0,withBackground:!1},e.claimURI)),value:e.claimURI}})))&&void 0!==n?n:[],"data-testid":"".concat(I,"-form-local-claim-dropdown")})),g.createElement(U.Z.Column,{width:16},p!==x.Q.OIDC&&p!==x.Q.OTHERS&&g.createElement(ct.Z,{className:"mb-3 mt-2 ml-0"},g.createElement("em",null,"Attribute URI"),":\xa0",H?"".concat(y).concat(p==x.Q.SCIM?":":"/").concat(H||""):""))),!F&&!ne&&(ae||J)&&g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:16,textAlign:"left",verticalAlign:"top"},g.createElement(h.v0,{visible:!0,type:"warning",content:g.createElement(g.Fragment,null,ae?g.createElement(A.c,{i18nKey:"claims:external.forms.emptyMessage"},"All the SCIM attributes are mapped to local claims."):g.createElement(g.Fragment,null,g.createElement(A.c,{i18nKey:"claims:external.forms.warningMessage"},"There are no local attributes available for mapping. Add new local attributes from"),g.createElement(h.rU,{external:!1,onClick:function(){return o.m.push(a.$.getPaths().get("LOCAL_CLAIMS"))}}," here"),"."))}))),l&&g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:16,textAlign:"right",verticalAlign:"top"},g.createElement(h.KM,{type:"submit","data-testid":"".concat(I,"-form-submit-button"),loading:X,disabled:X||J||ae},fe("claims:external.forms.submit"))))))};function tn(e){return function(e){if(Array.isArray(e))return an(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||rn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){if(e){if("string"==typeof e)return an(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}en.defaultProps={attributeType:x.Q.OTHERS,claimDialectUri:x.Q.CUSTOM_MAPPING,"data-testid":"add-external-claims"};var ln=function(e){var t=e.open,n=e.onClose,r=e.update,i=e.attributeType,a=e["data-testid"],l=nn((0,g.useState)(0),2),o=l[0],c=l[1],u=nn((0,g.useState)(null),2),s=u[0],d=u[1],p=nn((0,g.useState)([]),2),y=p[0],R=p[1],I=nn((0,g.useState)(!1),2),w=I[0],C=I[1],A=nn((0,v.cC)(),2),x=A[0],L=A[1],_=nn((0,v.cC)(),2),k=_[0],M=_[1],T=(0,E.I0)(),N=(0,b.$)().t,Z=nn((0,h.IK)(),3),D=Z[0],P=Z[1],j=Z[2],q=[{content:g.createElement(Ut,{submitState:x,onSubmit:function(e){c(1),d(e)},values:s,"data-testid":"".concat(a,"-dialect-details")}),icon:Nt().general,title:N("claims:dialects.wizard.steps.dialectURI")},{content:g.createElement(dn,{submitState:k,onSubmit:function(e){c(2),R(e)},values:y,onExternalClaimsChanged:function(e){R(tn(e))},"data-testid":"".concat(a,"-external-claims"),attributeType:i}),icon:Nt().general,title:N("claims:dialects.wizard.steps.externalAttribute",{type:(0,At.i)(i,!0)})},{content:g.createElement(fn,{dialectURI:null==s?void 0:s.get("dialectURI").toString(),claims:y,"data-testid":"".concat(a,"-summary"),attributeType:i}),icon:Nt().general,title:N("claims:dialects.wizard.steps.summary")}],Q=function(){switch(o){case 0:L();break;case 1:M();break;case 2:C(!0),(0,O.CM)(null==s?void 0:s.get("dialectURI").toString()).then((function(){var e=window.btoa(null==s?void 0:s.get("dialectURI").toString()).replace(/=/g,""),t=[];y.forEach((function(n){t.push((0,O.wg)(e,n))})),Promise.all(t).then((function(){T((0,f.V_)({description:N("claims:dialects.notifications.addDialect.success.description"),level:m.QU.SUCCESS,message:N("claims:dialects.notifications.addDialect.success.message")}))})).catch((function(){T((0,f.V_)({description:N("claims:dialects.notifications.addDialect.genericError.description"),level:m.QU.WARNING,message:N("claims:dialects.notifications.addDialect.genericError.message")}))})).finally((function(){n(),r()}))})).catch((function(e){P({description:(null==e?void 0:e.description)||N("claims:dialects.notifications.addDialect.error.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||N("claims:dialects.notifications.addDialect.error.message")})})).finally((function(){C(!1)}))}};return g.createElement(ot.Z,{dimmer:"blurring",size:"small",className:"wizard application-create-wizard",open:t,onClose:n,"data-testid":a,closeOnDimmerClick:!1},g.createElement(ot.Z.Header,{className:"wizard-header"},N("claims:dialects.wizard.header"),s&&s.get("dialectURI")?" - "+s.get("dialectURI"):""),g.createElement(ot.Z.Content,{className:"steps-container","data-testid":"".concat(a,"-steps")},g.createElement(h.Rg.Group,{current:o},q.map((function(e,t){return g.createElement(h.Rg.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(a,"-step-").concat(t)})})))),g.createElement(ot.Z.Content,{className:"content-container",scrolling:!0},D&&j,q[o].content),g.createElement(ot.Z.Actions,null,g.createElement(U.Z,null,g.createElement(U.Z.Row,{column:1},g.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},g.createElement(h.Qj,{floated:"left",onClick:function(){return n()},"data-testid":"".concat(a,"-cancel-button")},N("common:cancel"))),g.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},o<q.length-1&&g.createElement(h.KM,{floated:"right",onClick:Q,"data-testid":"".concat(a,"-next-button")},N("common:next")," ",g.createElement(S.Z,{name:"arrow right"})),o===q.length-1&&g.createElement(h.KM,{floated:"right",onClick:Q,"data-testid":"".concat(a,"-finish-button"),loading:w,disabled:w},N("common:finish")),o>0&&g.createElement(h.Qj,{floated:"right",onClick:function(){c(o-1)},"data-testid":"".concat(a,"-previous-button")},g.createElement(S.Z,{name:"arrow left"})," ",N("common:previous")))))))};function on(e){return function(e){if(Array.isArray(e))return sn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||un(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||un(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){if(e){if("string"==typeof e)return sn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sn(e,t):void 0}}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}ln.defaultProps={attributeType:x.Q.OTHERS,"data-testid":"add-dialect-wizard"};var dn=function(e){var t=e.onSubmit,n=e.submitState,r=e.values,a=e.onExternalClaimsChanged,l=e.shouldShowInitialValues,o=e.attributeType,c=e.claimDialectUri,u=e.wizard,s=e.dialectId,d=e.mappedLocalClaims,m=e.onClaimListChange,f=e["data-testid"],p=cn((0,g.useState)([]),2),v=p[0],E=p[1],S=cn((0,g.useState)([]),2),R=S[0],I=S[1],w=cn((0,g.useState)([]),2),C=w[0],A=w[1],O=(0,g.useRef)(!0),L=(0,g.useRef)(!0),_=(0,b.$)().t;(0,g.useEffect)((function(){A(d)}),[d]),(0,g.useEffect)((function(){O.current?O.current=!1:t(M())}),[n]),(0,g.useEffect)((function(){r&&(E(r),L.current&&(I(r),L.current=!1))}),[r]),(0,g.useEffect)((function(){"function"==typeof m&&(v.length===R.length?m(!0):m(!1))}),[v]);var k=function(e,t,n){switch(e){case x.Q.SCIM:return"".concat(t,":").concat(n);case x.Q.OIDC:case x.Q.OTHERS:return n;default:return"".concat(t,"/").concat(n)}},M=function(){return l?v:Mt(v,R,y.Z)};return g.createElement(U.Z,null,g.createElement(U.Z.Row,{columns:2},g.createElement(U.Z.Column,{width:16},g.createElement(en,{wizard:!0,onSubmit:function(e){var t={claimURI:k(o,c,e.get("claimURI").toString()),mappedLocalClaimURI:e.get("localClaim").toString()},n=[].concat(on(v),[t]);A((function(e){return[].concat(on(e),[t.mappedLocalClaimURI])})),E(n),a&&a(n)},externalClaims:v,"data-testid":"".concat(f,"-add-external-claims"),attributeType:o,claimDialectUri:c,dialectId:s,mappedLocalClaims:C}),g.createElement(Re.Z,{hidden:!0}),M().length>0?g.createElement(Cn,{isLoading:!1,list:M(),localClaim:wn.ADD_EXTERNAL,onEdit:function(e,t){var n,r=on(v),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=un(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw a}}}}(r);try{for(i.s();!(n=i.n()).done;){var l=n.value;(0,y.Z)(e,l)&&(x.Q.CLAIM_URI_ATTRIBUTE_KEY in e&&(l.claimURI=t.get("claimURI").toString(),l.mappedLocalClaimURI=t.get("localClaim").toString()))}}catch(o){i.e(o)}finally{i.f()}E(r),a&&a(r)},onDelete:function(e){var t=e,n=v.filter((function(t){return!(0,y.Z)(e,t)}));E(n),A(C.filter((function(e){return e!==t.mappedLocalClaimURI}))),a&&a(n)},"data-testid":"".concat(f,"-list"),attributeType:o,isEditable:!1}):u&&g.createElement(h.$J,{title:_("claims:external.placeholders.empty.title",{type:(0,Ge.i)(o,!0)}),subtitle:[_("claims:external.placeholders.empty.subtitle",{type:(0,Ge.i)(o)})],image:(0,i.jF)().emptyList,imageSize:"tiny","data-testid":"".concat(f,"-empty-placeholder")}))))};dn.defaultProps={attributeType:x.Q.OTHERS,"data-testid":"external-claims",mappedLocalClaims:[],shouldShowInitialValues:!0,wizard:!0};var mn=n(93682),fn=function(e){var t=e.dialectURI,n=e.claims,r=e.attributeType,i=e["data-testid"],a=(0,b.$)().t;return g.createElement(U.Z,{className:"wizard-summary","data-testid":i},g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},g.createElement("div",{className:"general-details"},g.createElement("h3",null,t)))),g.createElement(U.Z.Row,{columns:1},g.createElement(U.Z.Column,{width:16},g.createElement(wt.Z,null,g.createElement(wt.Z.Header,null,g.createElement(wt.Z.Row,null,g.createElement(wt.Z.HeaderCell,null),g.createElement(wt.Z.HeaderCell,null,a("claims:dialects.wizard.summary.externalAttribute",{type:(0,Ge.i)(r,!0)})),g.createElement(wt.Z.HeaderCell,null,a("claims:dialects.wizard.summary.mappedAttribute")))),g.createElement(wt.Z.Body,null,n.map((function(e,t){return g.createElement(wt.Z.Row,{key:t,columns:2},g.createElement(wt.Z.Cell,null,g.createElement(mn.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"mini"},g.createElement(h.Xo,null),g.createElement("span",{className:"claims-letter"},(n=e.claimURI,(r=n.replace("http://","").split("/"))[r.length-1][0].toLocaleUpperCase())))),g.createElement(wt.Z.Cell,null,e.claimURI),g.createElement(wt.Z.Cell,null,e.mappedLocalClaimURI));var n,r})),0===n.length&&g.createElement(wt.Z.Row,null,g.createElement(wt.Z.Cell,{colSpan:3,textAlign:"center"},g.createElement(h.v0,{type:"warning",content:a("claims:dialects.wizard.summary.notFound",{type:(0,Ge.i)(r,!0)})}))))))))};function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function vn(){vn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,l=Object.create(a.prototype),o=new L(r||[]);return i(l,"_invoke",{value:A(e,n,o)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var m="suspendedStart",f="suspendedYield",p="executing",v="completed",h={};function y(){}function g(){}function b(){}var E={};u(E,l,(function(){return this}));var S=Object.getPrototypeOf,R=S&&S(S(_([])));R&&R!==n&&r.call(R,l)&&(E=R);var I=b.prototype=y.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,l,o){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==pn(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,o)}))}o(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=m;return function(a,l){if(i===p)throw Error("Generator is already running");if(i===v){if("throw"===a)throw l;return{value:e,done:!0}}for(r.method=a,r.arg=l;;){var o=r.delegate;if(o){var c=U(o,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?v:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function U(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,U(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var l=a.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(pn(t)+" is not iterable")}return g.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(C.prototype),u(C.prototype,o,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var l=new C(s(e,n,r,i),a);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(I),u(I,c,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(c&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function hn(e,t,n,r,i,a,l){try{var o=e[a](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function yn(e){return function(e){if(Array.isArray(e))return En(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||bn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e,t){if(e){if("string"==typeof e)return En(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(e,t):void 0}}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}fn.defaultProps={attributeType:x.Q.OTHERS,"data-testid":"add-dialect-summary"};var Sn=function(e){var t,n,i,u,s,d,p=e.attributeType,y=e.attributeUri,R=e.mappedLocalClaims,I=e.isAttributeButtonEnabled,w=e.attributeButtonText,C=e.updateMappedClaims,A=e["data-testid"],L=(0,b.$)().t,_=[{key:0,text:L("claims:external.attributes.attributeURI",{type:(0,Ge.i)(p,!0,!0)}),value:"claimURI"},{key:1,text:L("claims:external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],k=(0,E.v9)((function(e){return e.config.ui.features})),M=(0,E.v9)((function(e){return e.config.ui.features.attributeDialects})),T=(0,E.v9)((function(e){return e.config.ui.features.oidcScopes})),N=(0,r.EV)(null==M||null===(t=M.scopes)||void 0===t?void 0:t.create),Z=(0,r.EV)(null==T||null===(n=T.scopes)||void 0===n?void 0:n.feature),D=gn((0,g.useState)(0),2),P=D[0],j=D[1],q=gn((0,g.useState)(l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),Q=q[0],V=q[1],z=gn((0,g.useState)([]),2),H=z[0],B=z[1],G=gn((0,g.useState)(_[0]),2),F=G[0],$=G[1],W=gn((0,g.useState)(!0),2),X=W[0],Y=W[1],K=gn((0,g.useState)(!1),2),J=K[0],ee=K[1],te=gn((0,g.useState)(""),2),ne=te[0],re=te[1],ie=gn((0,g.useState)(!1),2),ae=ie[0],le=ie[1],oe=gn((0,g.useState)(!0),2),ce=oe[0],ue=oe[1],se=gn((0,g.useState)(!1),2),de=se[0],me=se[1],fe=gn((0,g.useState)([]),2),pe=fe[0],ve=fe[1],he=gn((0,v.cC)(),2),ye=he[0],ge=he[1],be=gn((0,v.cC)(),2),Ee=be[0],Se=be[1],Ie=(0,E.I0)(),we=e.dialectID,Ce=e.claims,Ae=e.update,Ue=e.isLoading,Oe=it.l.getInstance();(0,g.useEffect)((function(){y&&we&&c.k9.serverSupportedClaimsAvailable.includes(y)&&ke()}),[we]),(0,g.useEffect)((function(){if(null!=H&&H.length){var e=new Set(H.map((function(e){return e.claimURI})));ve(yn((null!=pe?pe:[]).filter((function(t){return!e.has(t)}))))}}),[H]);var xe=(0,g.useMemo)((function(){return(null==pe?void 0:pe.length)>0}),[pe]);(0,g.useEffect)((function(){Ce&&(B(Ce),_e())}),[Ce]),(0,g.useEffect)((function(){B((0,Xe.f)(H,F.value,X))}),[F,X]);var Le=function(e){try{var t=(0,at.g)(Ce,e,F.value,X);B(t),re(e),j(0),Se()}catch(n){Ie((0,f.V_)({description:null==n?void 0:n.message,level:m.QU.ERROR,message:L("claims:external.advancedSearch.error")}))}},_e=function(){le(!ae),re(""),B(Ce)},ke=function(){var e,t=(e=vn().mark((function e(){var t,n,r;return vn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,O.jb)(we);case 3:t=e.sent,ve(t.attributes),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Ie((0,f.V_)({description:(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)||L("claims:local.notifications.getClaims.genericError.description"),level:m.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)||L("claims:local.notifications.getClaims.genericError.message")}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){hn(a,r,i,l,o,"next",e)}function o(e){hn(a,r,i,l,o,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return g.createElement(h.PS,{advancedSearch:g.createElement(rt.n,{onFilter:Le,filterAttributeOptions:[{key:0,text:L("claims:external.attributes.attributeURI",{type:(0,Ge.i)(p,!0,!0)}),value:"claimURI"},{key:1,text:L("claims:external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],filterAttributePlaceholder:L("claims:external.advancedSearch.form.inputs.filterAttribute.placeholder",{type:(0,Ge.i)(p,!0,!0)}),filterConditionsPlaceholder:L("claims:external.advancedSearch.form.inputs.filterCondition.placeholder",{type:(0,Ge.i)(p,!0,!0)}),filterValuePlaceholder:L("claims:external.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:L("claims:external.advancedSearch.placeholder",{type:(0,Ge.i)(p,!0,!0)}),defaultSearchAttribute:"claimURI",defaultSearchOperator:"co",triggerClearQuery:ae,"data-testid":"".concat(A,"-list-advanced-search")}),currentListSize:Q,listItemLimit:Q,onItemsPerPageDropdownChange:function(e,t){V(t.value)},onPageChange:function(e,t){j((t.activePage-1)*Q)},onSortStrategyChange:function(e,t){$(_.filter((function(e){return e.value===t.value}))[0])},onSortOrderChange:function(e){Y(e)},resetPagination:Ee,showPagination:!0,sortOptions:_,sortStrategy:F,showTopActionPanel:Ue||!(!ne&&(null==H?void 0:H.length)<=0),totalPages:Math.ceil((null==H?void 0:H.length)/Q),totalListSize:null==H?void 0:H.length,rightActionPanel:g.createElement(g.Fragment,null,(null===c.rk||void 0===c.rk||null===(i=c.rk.editAttributeMappings)||void 0===i?void 0:i.showAddExternalAttributeButton(we))&&N&&I&&(!c.k9.serverSupportedClaimsAvailable.includes(y)||xe)&&g.createElement(h.KM,{loading:Ce&&y!==(null===(u=Ce[0])||void 0===u?void 0:u.claimDialectURI),onClick:function(){var e;y===(null===(e=Ce[0])||void 0===e?void 0:e.claimDialectURI)&&ee(!0)},disabled:J||Ce&&y!==(null===(s=Ce[0])||void 0===s?void 0:s.claimDialectURI),"data-testid":"".concat(A,"-list-layout-add-button")},g.createElement(S.Z,{name:"add"}),w),p===x.Q.OIDC&&(null==k||null===(d=k.oidcScopes)||void 0===d?void 0:d.enabled)&&Z&&g.createElement(h.kq,{onClick:function(){o.m.push(a.$.getPaths().get("OIDC_SCOPES"))},"data-componentid":"".concat(A,"-oidc-scopes-button")},g.createElement(nt.NX,{fill:"black",className:"icon"}),L("console:develop.features.sidePanel.oidcScopes"))),"data-testid":"".concat(A,"-list-layout")},J&&g.createElement(ot.Z,{open:J,onClose:function(){ee(!1)},dimmer:"blurring",size:"small","data-testid":"".concat(A,"-add-external-claim-modal"),closeOnDimmerClick:!1},g.createElement(ot.Z.Header,null,L("claims:external.pageLayout.edit.header",{type:(0,Ge.i)(p,!0)})),g.createElement(ot.Z.Content,{scrolling:!0,className:"edit-attribute-mapping"},g.createElement(dn,{"data-testid":"".concat(A,"-add-external-claims"),onSubmit:function(e){!function(e){var t=e.map((function(e){return(0,O.wg)(we,{claimURI:e.claimURI,mappedLocalClaimURI:e.mappedLocalClaimURI})}));me(!0),Promise.all(t).then((function(){Ie((0,f.V_)({description:L("claims:external.notifications.addExternalAttribute.success.description",{type:(0,Ge.i)(p)}),level:m.QU.SUCCESS,message:L("claims:external.notifications.addExternalAttribute.success.message")})),Ae(),C(!0)})).catch((function(e){Ie((0,f.V_)({description:(null==e?void 0:e.description)||L("claims:external.notifications.addExternalAttribute.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||L("claims:external.notifications.addExternalAttribute.genericError.message")}))})).finally((function(){me(!1),ee(!1)}))}(e)},submitState:ye,values:Ce,shouldShowInitialValues:!1,attributeType:p,claimDialectUri:y,dialectId:we,wizard:!1,mappedLocalClaims:R,onClaimListChange:function(e){ue(e)}})),g.createElement(ot.Z.Actions,null,g.createElement(h.Qj,{onClick:function(){ee(!1)},"data-testid":"".concat(A,"-add-external-claim-modal-cancel-button")},L("common:cancel")),g.createElement(h.KM,{disabled:ce||de,loading:de,onClick:function(){Oe.publish("manage-attribute-mappings-add-new-attribute",{type:(0,lt.Z)(p)}),ge()},"data-testid":"".concat(A,"-add-external-claim-modal-save-button")},L("common:save")))),g.createElement(U.Z,{columns:1},g.createElement(U.Z.Column,{width:16},g.createElement(Re.Z,{hidden:!0}),g.createElement(Cn,{advancedSearch:g.createElement(rt.n,{onFilter:Le,filterAttributeOptions:[{key:0,text:L("claims:external.attributes.attributeURI",{type:(0,Ge.i)(p,!0,!0)}),value:"claimURI"},{key:1,text:L("claims:external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],filterAttributePlaceholder:L("claims:external.advancedSearch.form.inputs.filterAttribute.placeholder",{type:(0,Ge.i)(p,!0,!0)}),filterConditionsPlaceholder:L("claims:external.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:L("claims:external.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:L("claims:external.advancedSearch.placeholder",{type:(0,Ge.i)(p,!0,!0)}),defaultSearchAttribute:"claimURI",defaultSearchOperator:"co",triggerClearQuery:ae,"data-testid":"".concat(A,"-list-advanced-search")}),showTableHeaders:!0,isLoading:Ue,list:function(e,t,n){return null==e?void 0:e.slice(n,n+t)}(H,Q,P),localClaim:wn.EXTERNAL,update:function(){return Ae()},dialectID:we,onEmptyListPlaceholderActionClick:function(){return ee(!0)},onSearchQueryClear:_e,searchQuery:ne,"data-testid":"".concat(A,"-list"),attributeType:p,featureConfig:k,updateMappedClaims:C}))))};function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return In(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Sn.defaultProps={attributeType:x.Q.OTHERS,"data-testid":"edit-external-claims",isLoading:!0};var wn=function(e){return e[e.LOCAL=0]="LOCAL",e[e.EXTERNAL=1]="EXTERNAL",e[e.DIALECT=2]="DIALECT",e[e.ADD_EXTERNAL=3]="ADD_EXTERNAL",e}({}),Cn=function(e){var t,n,w,C=e.showTableHeaders,A=e.advancedSearch,U=e.defaultListItemLimit,L=e.featureConfig,_=e.list,k=e.localClaim,M=e.update,T=e.dialectID,N=e.onEdit,Z=e.onDelete,D=e.isLoading,P=e.onEmptyListPlaceholderActionClick,j=e.onListItemClick,q=e.onSearchQueryClear,Q=e.selection,V=e.searchQuery,z=e.attributeType,H=e.showListItemActions,B=e.isEditable,G=e.updateMappedClaims,F=e["data-testid"],$=Rn((0,g.useState)(!1),2),W=$[0],X=$[1],Y=Rn((0,g.useState)(null),2),K=Y[0],J=Y[1],ee=Rn((0,g.useState)(null),2),te=ee[0],ne=ee[1],re=Rn((0,g.useState)([]),2),ie=re[0],ae=re[1],le=Rn((0,g.useState)(""),2),oe=le[0],ce=le[1],ue=Rn((0,g.useState)(void 0),2),se=ue[0],de=ue[1],me=(0,r.EV)(null==L||null===(t=L.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create),fe=(0,r.EV)(null==L||null===(n=L.attributeDialects)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),pe=(0,r.EV)(null==L||null===(w=L.attributeDialects)||void 0===w||null===(w=w.scopes)||void 0===w?void 0:w.delete),ve=(0,E.I0)(),he=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),ye=Rn((0,v.cC)(),2),ge=ye[0],be=ye[1],Ee=(0,g.useRef)([]),Se=(0,g.useRef)([]),Re=(0,b.$)().t,Ie=Rn((0,h.ZK)(),3),we=Ie[0],Ce=Ie[1],Ae=Ie[2],Ue="oidc";null==_||_.forEach((function(e,t){Ee.current.push(Ee.current[t]||g.createRef()),Se.current.push(Se.current[t]||g.createRef())})),(0,g.useEffect)((function(){xe(_)&&(0,s.GN)(null).then((function(e){ae(e)})).catch((function(e){var t,n;ve((0,f.V_)({description:null!==(t=null==e?void 0:e.description)&&void 0!==t?t:Re("userstores:notifications.fetchUserstores.genericError.description"),level:m.QU.ERROR,message:null!==(n=null==e?void 0:e.message)&&void 0!==n?n:Re("userstores:notifications.fetchUserstores.genericError.message")}))}))}),[JSON.stringify(_)]);var Oe,xe=function(e){return k===wn.LOCAL},Le=function(e){return k===wn.DIALECT},_e=function(e){return k===wn.EXTERNAL},ke=function(){X(!1),ne(null),J(null)},Me=function(e){(0,O.wf)(e).then((function(){M(),ke(),G(!0),ve((0,f.V_)({description:Re("claims:local.notifications.deleteClaim.success.description"),level:m.QU.SUCCESS,message:Re("claims:local.notifications.deleteClaim.success.message")}))})).catch((function(e){ve(Ce({description:(null==e?void 0:e.description)||Re("claims:local.notifications.deleteClaim.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||Re("claims:local.notifications.deleteClaim.genericError.message")}))}))},Te=function(e,t){(0,O.q)(e,t.id).then((function(){M(),c.rk.localAttributes.isSCIMCustomDialectAvailable().then((function(){Ne()})),G(!0),ke(),ve((0,f.V_)({description:Re("claims:external.notifications.deleteExternalClaim.success.description",{type:t.claimURI}),level:m.QU.SUCCESS,message:Re("claims:external.notifications.deleteExternalClaim.success.message")}))})).catch((function(e){ve((0,f.V_)({description:(null==e?void 0:e.description)||Re("claims:external.notifications.deleteExternalClaim.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||Re("claims:external.notifications.deleteExternalClaim.genericError.message")}))}))},Ne=function(){ve((0,f.wu)(!0)),(0,u.w7)().then((function(e){ve((0,f.Um)(e))})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description&&ve((0,f.V_)({description:e.response.data.description,level:m.QU.ERROR,message:Re("console:manage.notifications.getProfileSchema.error.message")})),ve((0,f.V_)({description:Re("console:manage.notifications.getProfileSchema.genericError.description"),level:m.QU.ERROR,message:Re("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){ve((0,f.wu)(!1))}))},Ze=function(e){(0,O.Nx)(e).then((function(){M(),ke(),ve((0,f.V_)({description:Re("claims:dialects.notifications.deleteDialect.success.description"),level:m.QU.SUCCESS,message:Re("claims:dialects.notifications.deleteDialect.success.message")}))})).catch((function(e){ve((0,f.V_)({description:(null==e?void 0:e.description)||Re("claims:dialects.notifications.deleteDialect.genericError.description"),level:m.QU.ERROR,message:(null==e?void 0:e.message)||Re("claims:dialects.notifications.deleteDialect.genericError.message")}))}))},De=function(e,t){J(e),ne(t),X(!0)},Pe=function(){return V?g.createElement(h.$J,{action:g.createElement(h.Qj,{onClick:q},Re("console:manage.placeholders.emptySearchResult.action")),image:(0,i.jF)().emptySearch,imageSize:"tiny",title:Re("console:manage.placeholders.emptySearchResult.title"),subtitle:[Re("console:manage.placeholders.emptySearchResult.subtitles.0",{query:V}),Re("console:manage.placeholders.emptySearchResult.subtitles.1")],"data-testid":"".concat(F,"-empty-search-placeholder")}):0===(null==_?void 0:_.length)?g.createElement(h.$J,{action:g.createElement(r.di,{when:null==L||null===(e=L.oidcScopes)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},g.createElement(h.KM,{onClick:P},g.createElement(S.Z,{name:"add"}),xe(_)?Re("claims:list.placeholders.emptyList.action.local"):Le()?Re("claims:list.placeholders.emptyList.action.dialect",{type:(0,Ge.i)(z,!0)}):Re("claims:list.placeholders.emptyList.action.external",{type:(0,Ge.i)(z,!0)}))),image:(0,i.jF)().newList,imageSize:"tiny",title:xe(_)?Re("claims:list.placeholders.emptyList.title.local"):Le()?Re("claims:list.placeholders.emptyList.title.dialect"):Re("claims:list.placeholders.emptyList.title.external",{type:(0,Ge.i)(z,!0)}),subtitle:[],"data-testid":"".concat(F,"-empty-placeholder")}):null;var e},je=function(e){var t=e.claimURI.split("/");return t[t.length-1]};return g.createElement(g.Fragment,null,W?(Oe=xe(te)?{assertion:te.displayName,delete:Me,message:Re("claims:list.confirmation.local.message"),name:Re("claims:list.confirmation.local.name")}:Le()?{assertion:te.dialectURI,delete:Ze,message:Re("claims:list.confirmation.dialect.message"),name:Re("claims:list.confirmation.dialect.name")}:{assertion:te.claimURI,delete:Te,message:Re("claims:list.confirmation.external.message",{type:te.claimURI})+(z&&z===Ue?"If this attribute is attached to any scope, this action will also remove the attribute from the relevant scope.":x.Q.EMPTY_STRING),name:Re("claims:list.confirmation.external.name",{type:te.claimURI})},g.createElement(h.cV,{onClose:ke,type:"negative",open:W,assertionHint:Re("claims:list.confirmation.hint"),assertionType:"checkbox",primaryAction:Re("claims:list.confirmation.action"),secondaryAction:Re("common:cancel"),onSecondaryActionClick:function(){X(!1),Ce(null)},onPrimaryActionClick:function(){K===wn.EXTERNAL?Oe.delete(T,te):Oe.delete(te.id)},"data-testid":"".concat(F,"-delete-confirmation-modal"),closeOnDimmerClick:!1},g.createElement(h.cV.Header,{"data-testid":"".concat(F,"-delete-confirmation-modal-header")},Re("claims:list.confirmation.header")),g.createElement(h.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(F,"-delete-confirmation-modal-message")},Re("claims:list.confirmation.message",{name:Oe.name})),g.createElement(h.cV.Content,{"data-testid":"".concat(F,"-delete-confirmation-modal-content")},g.createElement("div",{className:"modal-alert-wrapper"}," ",we&&Ae),Re("claims:list.confirmation.content",{message:Oe.message})))):null,g.createElement(h.wQ,{className:"external-dialects-list",externalSearch:A,isLoading:D,loadingStateOptions:{count:null!=U?U:l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:function(){if(H)return xe(_)?[{icon:function(){return fe?"pencil alternate":"eye"},onClick:function(e,t){o.m.push(a.$.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",null==t?void 0:t.id))},popupText:function(){return Re(fe?"common:edit":"common:view")},renderer:"semantic-icon"},c.rk.attributes.deleteAction&&{hidden:function(){return!pe},icon:function(){return"trash alternate"},onClick:function(e,t){return De(wn.LOCAL,t)},popupText:function(){return Re("common:delete")},renderer:"semantic-icon"}]:Le()?[{hidden:function(){return!me},icon:function(){return"pencil alternate"},onClick:function(e,t){o.m.push(a.$.getPaths().get("EXTERNAL_DIALECT_EDIT").replace(":id",t.id))},popupText:function(){return Re("common:edit")},renderer:"semantic-icon"},c.rk.attributeMappings.deleteAction&&{hidden:function(){return!pe},icon:function(){return"trash alternate"},onClick:function(e,t){return De(wn.DIALECT,t)},popupText:function(){return Re("common:delete")},renderer:"semantic-icon"}]:_e()?[{hidden:function(e){return oe!==(null==e?void 0:e.id)},icon:function(){return"check"},onClick:function(){return be()},popupText:function(){return Re("common:update")},renderer:"semantic-icon"},c.rk.externalAttributes.showActions(T)&&{hidden:function(){return c.rk.externalAttributes.isAttributeEditable?!me:!c.rk.externalAttributes.isAttributeEditable},icon:function(e){return c.rk.externalAttributes.getEditIcon(e,oe)},link:function(e){return c.rk.externalAttributes.isEditActionClickable(e)},onClick:function(e,t){return c.rk.externalAttributes.editAttribute(t,oe,ce)},popupText:function(e){return c.rk.externalAttributes.getEditPopupText(e,oe)},renderer:"semantic-icon"},c.rk.externalAttributes.showDeleteIcon(T,_)&&{hidden:function(e){var t;return!(pe&&!c.rk.externalAttributes.hideDeleteIcon(e))||!(null==e||null===(t=e.properties)||void 0===t||!t.some((function(e){return e.key===x.Q.SYSTEM_CLAIM_PROPERTY_NAME&&"true"===e.value})))},icon:function(){return"trash alternate"},onClick:function(e,t){return De(wn.EXTERNAL,t)},popupText:function(){return Re("common:delete")},renderer:"semantic-icon"}]:[{hidden:function(e){return!(0,y.Z)(se,e)},icon:function(){return"check"},onClick:function(){return be()},popupText:function(){return Re("common:update")},renderer:"semantic-icon"},{hidden:function(){return!B},icon:function(e){return(0,y.Z)(se,e)?"times":"pencil alternate"},onClick:function(e,t){de(se?void 0:t)},popupText:function(){return Re("common:edit")},renderer:"semantic-icon"},{icon:function(){return"trash alternate"},onClick:function(e,t){return Z(t)},popupText:function(){return Re("common:delete")},renderer:"semantic-icon"}]}(),columns:function(){if(xe(_))return[{allowToggleVisibility:!1,dataIndex:"displayName",id:"displayName",key:"displayName",render:function(e){var t=function(e){var t,n,r=[];return null==ie||ie.forEach((function(t){var n,i;null!==(n=null==e||null===(i=e.attributeMapping)||void 0===i?void 0:i.find((function(e){return e.userstore.toLowerCase()===t.name.toLowerCase()})))&&void 0!==n||r.push(t.name)})),null!==(t=null==e||null===(n=e.attributeMapping)||void 0===n?void 0:n.find((function(e){return e.userstore===he})))&&void 0!==t||r.push(p.StringUtils.isEqualCaseInsensitive(he,d.pH)?Re("console:manage.features.users.userstores.userstoreOptions.primary"):he),r}(e),n=t.length>0;return g.createElement(R.Z,{as:"h6",image:!0},g.createElement(g.Fragment,null,c.rk.attributes.showUserstoreMappingWarningIcon&&n&&g.createElement(h.GI,{trigger:g.createElement(S.Z,{className:"notification-icon",name:"warning circle",size:"small",color:"red"}),content:g.createElement("div",null,Re("claims:list.warning"),g.createElement("ul",null,t.map((function(e,t){return g.createElement("li",{key:t},e)})))),inverted:!0}),g.createElement(h.JT,{image:g.createElement(h.Xo,{name:je(e),size:"mini","data-testid":"".concat(F,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(F,"-item-image")})),g.createElement(R.Z.Content,null,e.displayName,g.createElement(R.Z.Subheader,null,g.createElement("code",{className:"inline-code compact transparent"},e.claimURI))))},title:Re("claims:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:x.Q.EMPTY_STRING}];if(Le())return[{allowToggleVisibility:!1,dataIndex:"dialectURI",id:"dialectURI",key:"dialectURI",render:function(e){return g.createElement(R.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(F,"-item-heading")},g.createElement(h.JT,{image:g.createElement(h.Xo,{name:e.dialectURI,size:"mini","data-testid":"".concat(F,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(F,"-item-image")}),g.createElement(R.Z.Content,null,e.dialectURI))},title:Re("claims:list.columns.dialectURI")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:x.Q.EMPTY_STRING}];if(_e()){return[{allowToggleVisibility:!1,dataIndex:"claimURI",id:"claimURI",key:"claimURI",render:function(e){return g.createElement(R.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(F,"-item-heading")},g.createElement(h.JT,{image:g.createElement(h.Xo,{name:e.claimURI,size:"mini","data-testid":"".concat(F,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(F,"-item-image")}),g.createElement(h.GI,{inverted:!0,position:"top center",key:"".concat(e.claimURI,"-popup"),content:e.claimURI,trigger:g.createElement(R.Z.Content,{className:"ellipsis"},e.claimURI)}))},title:z&&z===x.Q.SCIM?Re("claims:list.columns.claimURI"):Re("claims:list.columns.name"),width:8},{allowToggleVisibility:!1,dataIndex:"dialectURI",id:"dialectURI",key:"dialectURI",render:function(e){return oe===(null==e?void 0:e.id)?g.createElement(tt,{claimID:e.id,dialectID:T,update:function(){ce(""),M()},submit:ge,claimURI:e.claimURI,externalClaims:_,"data-testid":"".concat(F,"-edit-external-claim"),attributeType:z}):g.createElement(h.GI,{inverted:!0,position:"top center",key:"".concat(e.mappedLocalClaimURI,"-popup"),content:e.mappedLocalClaimURI,trigger:g.createElement("code",null,e.mappedLocalClaimURI)})},title:Re("claims:list.columns.dialectURI"),width:6},(e=c.rk.externalAttributes.showActions(T)&&c.rk.externalAttributes.isAttributeEditable&&me,t=c.rk.externalAttributes.showDeleteIcon(T,_)&&pe,e||t?{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:x.Q.EMPTY_STRING}:null)].filter(Boolean)}var e,t;return[{allowToggleVisibility:!1,dataIndex:"claimURI",id:"claimURI",key:"claimURI",render:function(e){return e?(0,y.Z)(se,e)?g.createElement(tt,{dialectID:T,update:function(){de(void 0)},submit:ge,claimURI:e.claimURI,onSubmit:function(t){N(e,t)},wizard:!0,addedClaim:e,externalClaims:_}):g.createElement(R.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(F,"-item-heading")},g.createElement(h.JT,{name:e.claimURI,image:g.createElement(h.Xo,{name:e.claimURI,size:"mini","data-testid":"".concat(F,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(F,"-item-image")}),g.createElement(R.Z.Content,null,e.claimURI,g.createElement(R.Z.Subheader,null,e.mappedLocalClaimURI))):null},title:Re("claims:list.columns.dialectURI")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:x.Q.EMPTY_STRING}]}(),data:_,onRowClick:function(e,t){if(fe){if(xe(_))o.m.push(a.$.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",t.id));else if(Le())o.m.push(a.$.getPaths().get("EXTERNAL_DIALECT_EDIT").replace(":id",t.id));else if(_e()&&c.rk.externalAttributes.isRowClickable(T,I.Z))c.rk.externalAttributes.isAttributeEditable&&ce(oe?"":t.id);else{if(!B)return;de(t)}j&&j(e,t)}},placeholders:Pe(),selectable:Q,showHeader:C,transparent:!D&&null!==Pe(),"data-testid":F,isRowSelectable:function(e){return c.rk.isRowSelectable(e)},fixed:z!==Ue}))};Cn.defaultProps={attributeType:x.Q.OTHERS,"data-testid":"claims-list",selection:!0,showListItemActions:!0,showTableHeaders:!1}},99116:(e,t,n)=>{n.d(t,{i:()=>r.i});var r=n(66470)},66470:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(12252),i=function(e,t,n){switch(e){case r.Q.OIDC:return n?"OIDC":"OpenID Connect";case r.Q.SCIM:return"SCIM";case r.Q.AXSCHEMA:return"Axschema";case r.Q.EIDAS:return"eIDAS";default:return t?"Custom":"custom"}}}}]);