"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[3819],{3819:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var o=n(52820),a=n(60486),r=n(40838),i=n(21257),l=n(68591),s=n(35887),c=n(86329),d=n(90979),u=n(2802),m=n(22669),v=n(86105),f=n(6833),p=n(82406),g=n(43516),h=n(44194),A=n(10479),E=n(59673),O=n(47245),S=n(26154),y=n(13692);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,l=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var b=function(e){var t,n=e["data-componentid"],_=(0,A.$)().t,b=(0,O.I0)(),I=(0,i.z)().isSuperOrganization,N=(0,O.v9)((function(e){return e.config.ui.features})),M=(0,O.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),R=(0,O.v9)((function(e){return e.profile.profileInfo})),T=C((0,h.useState)(f.I),2),U=T[0],w=T[1],k=C((0,h.useState)(!1),2),G=k[0],D=k[1],P=C((0,h.useState)(!1),2),L=P[0],B=P[1],H=C((0,h.useState)(void 0),2),x=H[0],z=H[1],F=C((0,h.useState)(!1),2),j=F[0],Q=F[1];(0,h.useEffect)((function(){if(!I){var e=[];(0,l.aA)(s.vH.ACCOUNT_MANAGEMENT_CATEGORY_ID).then((function(t){t.map((function(t){t.id!==s.vH.ACCOUNT_DISABLING_CONNECTOR_ID&&t.id!==s.vH.ADMIN_FORCE_PASSWORD_RESET_CONNECTOR_ID||t.properties.map((function(t){e.push(t)}))})),(0,l.aA)(s.vH.USER_ONBOARDING_CONNECTOR_ID).then((function(t){t.map((function(t){t.id===s.vH.SELF_SIGN_UP_CONNECTOR_ID&&t.properties.map((function(t){t.name===s.vH.ACCOUNT_LOCK_ON_CREATION&&e.push(t)}))})),z(e)}))}))}}),[]),(0,h.useEffect)((function(){var e=r.m.location.pathname.split("/"),t=e[e.length-1];Z(t)}),[]);var V,X,Z=function(e){D(!0),(0,c.M_)(e,null).then((function(e){w(e)})).catch((function(){})).finally((function(){D(!1)}))},$=function(e){Z(e),m.QH.isAuthenticatedUser(null==R?void 0:R.userName,null==U?void 0:U.userName)&&b((0,o.G)())};return h.createElement(u.Z,null,h.createElement(g.O9,{isLoading:G,title:h.createElement(h.Fragment,null,void 0!==(null==U?void 0:U.active)?h.createElement(h.Fragment,null,null!=U&&U.active?h.createElement(g.GI,{trigger:h.createElement(S.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"}),content:_("common:enabled"),inverted:!0}):h.createElement(g.GI,{trigger:h.createElement(S.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"orange"}),content:_("common:disabled"),inverted:!0}),(0,v.nk)(U,null,"Administrator")):h.createElement(h.Fragment,null,(0,v.nk)(U,null,"Administrator"))),pageTitle:"Edit User",description:_(""+U.emails&&void 0!==U.emails?(V=null==U?void 0:U.emails,X="",V&&Array.isArray(V)&&V.length>0&&(X=V.find((function(e){return"string"==typeof e}))),X):U.userName),image:h.createElement(g.Yt,{editable:(0,v.Xr)(null==N?void 0:N.users,null==N||null===(t=N.users)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update,M),name:(0,v.nk)(U),size:"tiny",image:null==U?void 0:U.profileUrl,onClick:function(){var e;return(0,v.Xr)(null==N?void 0:N.users,null==N||null===(e=N.users)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,M)&&B(!0)}}),loadingStateOptions:{count:5,imageType:"circular"},backButton:{"data-testid":"user-mgt-edit-user-back-button",onClick:function(){r.m.push(a.$.getPaths().get("CONSOLE_SETTINGS")+"#tab=".concat(y.w.ADMINISTRATORS))},text:_("consoleSettings:administrators.edit.backButton")},titleTextAlign:"left",bottomMargin:!1,"data-componentid":n},h.createElement(d.X,{featureConfig:N,user:U,handleUserUpdate:$,connectorProperties:x,isLoading:G}),L&&h.createElement(g.Oi,{open:L,name:(0,v.nk)(U),emails:(0,v.r1)(null==U?void 0:U.emails),onClose:function(){return B(!1)},closeOnDimmerClick:!1,onCancel:function(){return B(!1)},onSubmit:function(e,t){var n={Operations:[{op:"replace",value:{profileUrl:t}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};Q(!0),(0,c.gS)(null==U?void 0:U.id,n).then((function(){b((0,p.V_)({description:_("user:profile.notifications.updateProfileInfo.success.description"),level:f.QU.SUCCESS,message:_("user:profile.notifications.updateProfileInfo.success.message")})),$(null==U?void 0:U.id)})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?b((0,p.V_)({description:e.response.data.description||e.response.data.detail,level:f.QU.ERROR,message:_("user:profile.notifications.updateProfileInfo.error.message")})):b((0,p.V_)({description:_("user:profile.notifications.updateProfileInfo.genericError.description"),level:f.QU.ERROR,message:_("user:profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){B(!1),Q(!1)}))},imageUrl:null==R?void 0:R.profileUrl,isSubmitting:j,heading:_("console:common.modals.editAvatarModal.heading"),submitButtonText:_("console:common.modals.editAvatarModal.primaryButton"),cancelButtonText:_("console:common.modals.editAvatarModal.secondaryButton"),translations:{gravatar:{errors:{noAssociation:{content:h.createElement(E.c,{i18nKey:"console:common.modals.editAvatarModal.content.gravatarerrors.noAssociation.content"},"It seems like the selected email is not registered on Gravatar. Sign up for a Gravatar account by visiting",h.createElement("a",{href:"https://www.gravatar.com"}," Gravatar Official Website"),"or use one of the following."),header:_("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.header")}},heading:_("console:common.modals.editAvatarModal.content.gravatar.heading")},hostedAvatar:{heading:_("console:common.modals.editAvatarModal.content.hostedAvatar.heading"),input:{errors:{http:{content:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.content"),header:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.header")},invalid:{content:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.content"),pointing:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.pointing")}},hint:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.hint"),placeholder:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.placeholder"),warnings:{dataURL:{content:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.content"),header:_("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.header")}}}},systemGenAvatars:{heading:_("console:common.modals.editAvatarModal.content.systemGenAvatars.heading"),types:{initials:_("console:common.modals.editAvatarModal.content.systemGenAvatars.types.initials")}}}})))};b.defaultProps={"data-componentid":"console-administrators-edit-page"};const I=b}}]);