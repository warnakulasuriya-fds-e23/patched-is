"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6779],{95202:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var i=t(4203),o=t(49748),a=t(63068),r=t(93139),c=t(11192),l=t(89497),s=t(9821),u=t(17800),d=t(12252),m=t(60486),f=t(40838),g=t(68591),p=t(35887),v=t(22669),y=t(33839),b=t(6833),h=t(82406),E=t(30382),C=t(43516),L=t(50699),I=t(44194),S=t(10479),O=t(47245),A=t(26154);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function w(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){x(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function x(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=R(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==R(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,o,a,r,c=[],l=!0,s=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=a.call(t)).done)&&(c.push(i.value),c.length!==n);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(s)throw o}}return c}}(e,n)||P(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,n){if(e){if("string"==typeof e)return T(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,n):void 0}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var j="alternative-login-identifier-form",M=function(e){var n=e["data-componentid"],t=(0,S.$)().t,R=(0,O.I0)(),N=(0,O.v9)((function(e){var n;return null==e||null===(n=e.config)||void 0===n||null===(n=n.ui)||void 0===n?void 0:n.enableIdentityClaims})),x=p.vH.ACCOUNT_MANAGEMENT_CATEGORY_ID,T=p.vH.MULTI_ATTRIBUTE_LOGIN_CONNECTOR_ID,M=_((0,I.useState)(!1),2),k=M[0],Z=M[1],V=_((0,I.useState)(void 0),2),Q=V[0],D=V[1],B=_((0,I.useState)([]),2),F=B[0],H=B[1],W=_((0,I.useState)(!1),2),q=W[0],G=W[1],$=_((0,I.useState)(!1),2),Y=$[0],z=$[1],J=_((0,I.useState)(void 0),2),K=J[0],X=J[1],ee=[d.Q.EMAIL_CLAIM_URI,d.Q.MOBILE_CLAIM_URI],ne=_((0,I.useState)(!1),2),te=ne[0],ie=ne[1],oe=_((0,I.useState)(!1),2),ae=oe[0],re=oe[1],ce=_((0,I.useState)(null),2),le=ce[0],se=ce[1],ue=(0,y.W)().data,de=function(){(0,g.PP)(x,T).then((function(e){D(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.detail?R((0,h.V_)({description:t("governanceConnectors:notifications.getConnector.error.description",{description:e.response.data.description}),level:b.QU.ERROR,message:t("governanceConnectors:notifications.getConnector.error.message")})):R((0,h.V_)({description:t("governanceConnectors:notifications.getConnector.genericError.description"),level:b.QU.ERROR,message:t("governanceConnectors:notifications.getConnector.genericError.message")}))}))},me=function(){var e={"exclude-identity-claims":!N,filter:null,limit:null,offset:null,sort:null};(0,u.WN)(e).then((function(e){var n=null==e?void 0:e.filter((function(e){return ee.includes(e.claimURI)}));H(n)})).catch((function(){R((0,h.V_)({description:t("claims:local.notifications.fetchLocalClaims.genericError.description"),level:b.QU.ERROR,message:t("claims:local.notifications.fetchLocalClaims.genericError.message")}))}))},fe=function(e,n){var i={operation:"UPDATE",properties:[]};for(var o in e)i.properties.push({name:o,value:e[o]});z(!0),G(!0),(0,g.u9)(i,x,T).then((function(){n.length>0&&ve(n),R((0,h.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.notification.success.description"),level:b.QU.SUCCESS,message:t("governanceConnectors:notifications.updateConnector.success.message")})),de()})).catch((function(e){!function(e){e.response&&e.response.data&&e.response.data.detail?R((0,h.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.notification.error.description"),level:b.QU.ERROR,message:t("governanceConnectors:notifications.updateConnector.error.message")})):R((0,h.V_)({description:t("governanceConnectors:notifications.updateConnector.genericError.description"),level:b.QU.ERROR,message:t("governanceConnectors:notifications.updateConnector.genericError.message")}))}(e)})).finally((function(){z(!1),G(!1)}))},ge=function(e,n){var t=(null==n?void 0:n.includes(e.claimURI))&&e.uniquenessScope!==b.UZ.ACROSS_USERSTORES;return{isClaimUpdate:t,updatedClaim:t?U(U({},e),{},{uniquenessScope:b.UZ.ACROSS_USERSTORES}):e}},pe=function(e){var n=null==e?void 0:e.id;return delete e.dialectURI,delete e.id,(0,u.iC)(n,e).then((function(){R((0,h.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.success.description",{claimName:e.displayName}),level:b.QU.SUCCESS,message:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.success.message")})),me()})).catch((function(e){R((0,h.V_)({description:(null==e?void 0:e.description)||t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.error.description"),level:b.QU.ERROR,message:(null==e?void 0:e.message)||t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.error.description")}))}))},ve=function(e){var n,t=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=P(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return r=e.done,e},e:function(e){c=!0,a=e},f:function(){try{r||null==t.return||t.return()}finally{if(c)throw a}}}}(F);try{for(t.s();!(n=t.n()).done;){var i=n.value,o=ge(i,e),a=o.isClaimUpdate,r=o.updatedClaim;a&&pe(r)}}catch(c){t.e(c)}finally{t.f()}},ye=function(e){var n,t,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e){var n=U({},e),t=F.filter((function(e){var t,i;return void 0!==n[null==e||null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase()]&&n[null==e||null===(i=e.displayName)||void 0===i?void 0:i.toLowerCase()]})).map((function(e){return null==e?void 0:e.claimURI}));return te||(t=t.filter((function(e){return e!==d.Q.EMAIL_CLAIM_URI}))),t}(e),r=(n=a,t=d.Q.USER_NAME_CLAIM_URI,{"account.multiattributelogin.handler.allowedattributes":i=[t].concat(w(n)).join(","),"account.multiattributelogin.handler.enable":i!==t}),c=function(e){return e.some((function(e){return F.find((function(n){return n.claimURI===e})).uniquenessScope!==b.UZ.ACROSS_USERSTORES}))}(a);if(!o&&c)return se(e),void re(!0);fe(r,a)};return(0,I.useEffect)((function(){f.m.location.state===s.j.APPLICATION_STATE&&Z(!0)}),[]),(0,I.useEffect)((function(){q||function(){var e,n;if(!(0,L.Z)(null==Q?void 0:Q.properties)&&!(0,L.Z)(F)){var t=K,i="true"===(null==Q||null===(e=Q.properties)||void 0===e?void 0:e.find((function(e){return"account.multiattributelogin.handler.enable"===e.name})).value),o=null==Q||null===(n=Q.properties)||void 0===n?void 0:n.find((function(e){return"account.multiattributelogin.handler.allowedattributes"===e.name})),a=null==o?void 0:o.value.split(",").map((function(e){return e.trim()}));t=U(U({},t),{},{email:i&&(null==a?void 0:a.includes(d.Q.EMAIL_CLAIM_URI))||!te,mobile:i&&(null==a?void 0:a.includes(d.Q.MOBILE_CLAIM_URI))}),X(t)}}()}),[F,Q,q]),(0,I.useEffect)((function(){var e;ue&&ie("true"===(null===(e=(0,v.t$)(ue))||void 0===e?void 0:e.enableValidator))}),[ue]),(0,I.useEffect)((function(){G(!0),me(),de(),G(!1)}),[]),I.createElement(I.Fragment,null,!q&&K?I.createElement(C.Xg,{pageTitle:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.pageTitle"),title:I.createElement(I.Fragment,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.pageTitle")),description:I.createElement(I.Fragment,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.description")),"data-componentid":"".concat(n,"-page-layout"),backButton:{"data-testid":"".concat(n,"-page-back-button"),onClick:function(){k?f.m.push(m.$.getPaths().get("APPLICATIONS")):f.m.push(m.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:t(k?"extensions:manage.accountLogin.goBackToApplication":"governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0},I.createElement(o.Z,{className:"mt-3"},I.createElement(C.pJ,{className:"form-wrapper",padded:"very"},I.createElement(E.l0,{id:j,initialValues:K,uncontrolledForm:!1,validate:null,onSubmit:function(e){return function(e){ye(e,!1)}(e)}},I.createElement(l.Z,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.loginIdentifierTypes")),I.createElement(C.v0,{warning:!0},I.createElement(A.Z,{className:"warning circle icon"}),t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.warning")),I.createElement(a.Z,{disablePadding:!0},null==F?void 0:F.map((function(e,o){var a=null==e?void 0:e.displayName.toLowerCase();return I.createElement(I.Fragment,null,I.createElement(r.Z,{key:o,disablePadding:!0,disabled:!te&&"email"===a},I.createElement(E.gN.OxygenCheckbox,{disabled:!te&&"email"===a,ariaLabel:a,key:o,name:a,required:!1,"data-componentid":"".concat(n,"-").concat(a,"-checkbox"),className:"alternative-login-identifier-checkbox"}),I.createElement(c.Z,{className:"alternative-login-identifier-item-text ",primary:null==e?void 0:e.displayName,secondary:I.createElement(i.Z,{className:"alternative-login-identifier-code"},null==e?void 0:e.claimURI)})),te||"email"!==a?I.createElement(I.Fragment,null):I.createElement(C.v0,{info:!0,className:"alternative-login-identifier-info"},I.createElement(A.Z,{className:"info circle"}),t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.info")))}))),I.createElement(E.gN.Button,{form:j,size:"small",buttonType:"primary_btn",ariaLabel:"Alternative Login Identifier update button",name:"update-button","data-testid":"".concat(n,"-submit-button"),disabled:Y,loading:Y,label:t("common:update"),hidden:null}))))):I.createElement(C.pO,null),I.createElement(C.cV,{"data-componentid":"".concat(n,"-confirmation-modal"),onClose:function(){re(!1)},type:"warning",open:ae,assertion:t("common:confirm"),assertionHint:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateConfirmation.assertionHint"),assertionType:"checkbox",primaryAction:t("common:confirm"),secondaryAction:t("common:cancel"),onSecondaryActionClick:function(){re(!1)},onPrimaryActionClick:function(){le&&(ye(le,!0),re(!1))},closeOnDimmerClick:!1},I.createElement(C.cV.Header,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateConfirmation.header")),I.createElement(C.cV.Message,{attached:!0,warning:!0},t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateConfirmation.message")),I.createElement(C.cV.Content,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateConfirmation.content"))))};M.defaultProps={"data-componentid":"alternative-login-identifier-edit-page"};const k=M},4203:(e,n,t)=>{t.d(n,{Z:()=>l});var i=t(92336),o=t(31549),a=t(14517),r=t(44194),c=t(14581);const l=(0,r.forwardRef)(((e,n)=>{var{className:t,children:r,filled:l=!0,outlined:s=!1}=e,u=(0,i.__rest)(e,["className","children","filled","outlined"]);const d=(0,a.Z)("oxygen-code",{filled:l,outlined:s},t);return(0,o.jsx)(c.Z,Object.assign({ref:n,component:"code",className:d},u,{children:r}))}));var s,u,d;s='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-code {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  font-size: inherit;\n  padding: 1px 3px;\n  border-radius: 5px; }\n  .oxygen-code.filled {\n    background-color: var(--oxygen-palette-customComponents-Code-background); }\n  .oxygen-code.outlined {\n    border: 1px solid var(--oxygen-palette-divider); }\n',u=document.getElementsByTagName("head")[0],(d=document.createElement("style")).setAttribute("type","text/css"),d.appendChild(document.createTextNode(s)),u.appendChild(d)}}]);