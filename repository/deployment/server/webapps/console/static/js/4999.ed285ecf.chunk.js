"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4999],{44999:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var o=n(46461),a=n(55007),r=n(52820),i=n(1989),s=n(60486),l=n(40838),c=n(41355),m=n(64643),d=n(68591),u=n(35887),p=n(58613),v=n(86105),f=n(6833),g=n(82406),h=n(16590),E=n(43516),A=n(44194),I=n(10479),S=n(59673),N=n(47245),b=n(26154),O=n(37077),_=n(92e3),R=n(90979),C=n(2802),y=n(6643);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,s=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}const M=function(){var e,t,n,U,M,k,P,w,D=(0,I.$)().t,G=(0,N.I0)(),L=(0,p.Z)().mutateUserStoreList,B=(0,N.v9)((function(e){return e.config.ui.features})),H=(0,N.v9)((function(e){return e.profile.profileInfo})),V=(0,a.EV)(null==B||null===(e=B.users)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update),F=T((0,A.useState)(!1),2),Z=F[0],z=F[1],Q=T((0,A.useState)(void 0),2),$=Q[0],x=Q[1],X=T((0,A.useState)(!1),2),j=X[0],J=X[1],W=l.m.location.pathname.split("/"),Y=W[W.length-1],q=(0,_.vU)(Y),K=q.data,ee=q.isLoading,te=q.isValidating,ne=q.mutate,oe=q.error,ae=(0,d.XJ)(u.vH.ACCOUNT_MANAGEMENT_CATEGORY_ID).data,re=(0,d.XJ)(u.vH.USER_ONBOARDING_CONNECTOR_ID).data,ie=(0,d.XJ)(u.vH.OTHER_SETTINGS_CONNECTOR_CATEGORY_ID).data,se=(0,A.useMemo)((function(){return K||(0,f.I)()}),[K]),le=void 0===(null==se||null===(t=se.name)||void 0===t?void 0:t.familyName)&&void 0===(null==se||null===(n=se.name)||void 0===n?void 0:n.givenName);(0,A.useEffect)((function(){L()}),[]),(0,A.useEffect)((function(){var e=[];ae&&ae.map((function(t){t.id!==u.vH.ACCOUNT_DISABLING_CONNECTOR_ID&&t.id!==u.vH.ADMIN_FORCE_PASSWORD_RESET_CONNECTOR_ID||t.properties.map((function(t){e.push(t)}))})),re&&re.map((function(t){t.id===u.vH.SELF_SIGN_UP_CONNECTOR_ID&&t.properties.map((function(t){t.name===u.vH.ACCOUNT_LOCK_ON_CREATION&&e.push(t)}))})),ie&&ie.map((function(t){t.id===u.vH.USER_CLAIM_UPDATE_CONNECTOR_ID&&t.properties.map((function(t){t.name!==u.vH.ENABLE_EMAIL_VERIFICATION&&t.name!==u.vH.ENABLE_MOBILE_VERIFICATION&&t.name!==u.vH.ENABLE_MOBILE_VERIFICATION_BY_PRIVILEGED_USER||e.push(t)}))})),x(e)}),[ae,re,ie]),(0,A.useEffect)((function(){oe&&(oe.response&&oe.response.data&&oe.response.data.description?G((0,g.V_)({description:oe.response.data.description,level:f.QU.ERROR,message:D("console:manage.notifications.getProfileInfo.error.message")})):G((0,g.V_)({description:D("console:manage.notifications.getProfileSchema.genericError.description"),level:f.QU.ERROR,message:D("console:manage.notifications.getProfileSchema.genericError.message")})))}),[oe]);var ce=function(){ne(),y.QH.isAuthenticatedUser(null==H?void 0:H.userName,null==se?void 0:se.userName)&&G((0,r.G)())},me=function(){return!le&&y.QH.resolveUserListSubheaderName(se)};return oe?A.createElement(E.$J,{action:A.createElement(o.Z,{variant:"text",onClick:h.CommonUtils.refreshPage},D("console:common.placeholders.brokenPage.action")),image:(0,i.jF)().brokenPage,imageSize:"tiny",subtitle:[D("console:common.placeholders.brokenPage.subtitles.0"),D("console:common.placeholders.brokenPage.subtitles.1")],title:D("console:common.placeholders.brokenPage.title")}):A.createElement(C.Z,null,A.createElement(E.O9,{isLoading:ee||te,loadingStateOptions:{count:5,imageType:"circular"},title:A.createElement(A.Fragment,null,void 0!==(null==se?void 0:se.active)?A.createElement(A.Fragment,null,null!=se&&se.active?A.createElement(E.GI,{trigger:A.createElement(b.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"}),content:D("common:enabled"),inverted:!0}):A.createElement(E.GI,{trigger:A.createElement(b.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"orange"}),content:D("common:disabled"),inverted:!0}),(0,v.WX)(null==se?void 0:se.userName)):A.createElement(A.Fragment,null,(0,v.WX)(null==se?void 0:se.userName))),pageTitle:"Edit User",description:A.createElement("div",null,me(),(null===(U=se[c.k.scim.systemSchema])||void 0===U?void 0:U.userSourceId)&&A.createElement(O.Z,{className:"profile-user-source-label"},A.createElement(E.dn,{className:"mt-1 mb-0",square:!0,inline:!0,size:"default",transparent:!0,icon:function(e){switch(e){case"Google":return(0,m.nI)().google;case"facebook":return(0,m.nI)().facebook;case"Github":return(0,m.nI)().github;case"Microsoft":return(0,m.nI)().microsoft;case"Apple":return(0,m.nI)().apple;default:return(0,m.nI)().enterprise}}(null===(M=se[c.k.scim.systemSchema])||void 0===M?void 0:M.idpType),verticalAlign:"middle"}),A.createElement(O.Z.Detail,{className:"mt-1 ml-0 mb-1"},null===(k=se[c.k.scim.systemSchema])||void 0===k?void 0:k.userSourceId)),(null===(P=se[c.k.scim.systemSchema])||void 0===P?void 0:P.userSource)&&A.createElement(O.Z,{className:me()?"profile-user-source-label":"profile-user-source-label ml-0"},A.createElement(E.dn,{className:"mt-1 mb-0",square:!0,inline:!0,size:"default",transparent:!0,icon:(0,i.Uz)().userStore,verticalAlign:"middle"}),A.createElement(O.Z.Detail,{className:"mt-1 ml-0 mb-1"},null===(w=se[c.k.scim.systemSchema])||void 0===w?void 0:w.userSource))),image:A.createElement(E.Yt,{editable:V,name:(0,v.nk)(se),size:"tiny",image:null==se?void 0:se.profileUrl,onClick:function(){return V&&z(!0)}}),backButton:{"data-testid":"user-mgt-edit-user-back-button",onClick:function(){window.location.href.includes(s.$.getPaths().get("ADMINISTRATORS"))?l.m.push(s.$.getPaths().get("ADMINISTRATORS")):l.m.push(s.$.getPaths().get("USERS"))},text:window.location.href.includes(s.$.getPaths().get("ADMINISTRATORS"))?D("pages:usersEdit.backButton",{type:"Administrators"}):D("pages:usersEdit.backButton",{type:"Users"})},titleTextAlign:"left",bottomMargin:!1},A.createElement(R.X,{featureConfig:B,user:se,handleUserUpdate:ce,connectorProperties:$,isLoading:ee||te}),Z&&A.createElement(E.Oi,{open:Z,name:(0,v.nk)(se),emails:(0,v.r1)(null==se?void 0:se.emails),onClose:function(){return z(!1)},closeOnDimmerClick:!1,onCancel:function(){return z(!1)},onSubmit:function(e,t){var n={Operations:[{op:"replace",value:{profileUrl:t}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};J(!0),(0,_.gS)(null==se?void 0:se.id,n).then((function(){G((0,g.V_)({description:D("user:profile.notifications.updateProfileInfo.success.description"),level:f.QU.SUCCESS,message:D("user:profile.notifications.updateProfileInfo.success.message")})),ce()})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?G((0,g.V_)({description:e.response.data.description||e.response.data.detail,level:f.QU.ERROR,message:D("user:profile.notifications.updateProfileInfo.error.message")})):G((0,g.V_)({description:D("user:profile.notifications.updateProfileInfo.genericError.description"),level:f.QU.ERROR,message:D("user:profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){z(!1),J(!1)}))},imageUrl:null==H?void 0:H.profileUrl,isSubmitting:j,heading:D("console:common.modals.editAvatarModal.heading"),submitButtonText:D("console:common.modals.editAvatarModal.primaryButton"),cancelButtonText:D("console:common.modals.editAvatarModal.secondaryButton"),translations:{gravatar:{errors:{noAssociation:{content:A.createElement(S.c,{i18nKey:"console:common.modals.editAvatarModal.content.gravatarerrors.noAssociation.content"},"It seems like the selected email is not registered on Gravatar. Sign up for a Gravatar account by visiting",A.createElement("a",{href:"https://www.gravatar.com"},"Gravatar Official Website"),"or use one of the following."),header:D("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.header")}},heading:D("console:common.modals.editAvatarModal.content.gravatar.heading")},hostedAvatar:{heading:D("console:common.modals.editAvatarModal.content.hostedAvatar.heading"),input:{errors:{http:{content:D("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.content"),header:D("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.header")},invalid:{content:D("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.content"),pointing:D("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.pointing")}},hint:D("console:common.modals.editAvatarModal.content.hostedAvatar.input.hint"),placeholder:D("console:common.modals.editAvatarModal.content.hostedAvatar.input.placeholder"),warnings:{dataURL:{content:D("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.content"),header:D("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.header")}}}},systemGenAvatars:{heading:D("console:common.modals.editAvatarModal.content.systemGenAvatars.heading"),types:{initials:D("console:common.modals.editAvatarModal.content.systemGenAvatars.types.initials")}}}})))}}}]);