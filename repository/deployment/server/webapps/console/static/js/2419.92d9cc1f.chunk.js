"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[2419],{2123:(e,t,n)=>{n.d(t,{O:()=>s,h:()=>l});var r=n(11526),a=n(76271),i=n(6833),o=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),s=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.f2.POST,url:a.h.getState().config.endpoints.guests};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},l=function(e){var t={headers:{"Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.f2.DELETE,url:a.h.getState().config.endpoints.guestsList+"/"+e};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},17370:(e,t,n)=>{n.d(t,{M:()=>o});var r=n(96124),a=n(76271),i=n(6833),o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{"Content-Type":"application/json"},method:i.f2.GET,url:a.h.getState().config.endpoints.guestsList},n=(0,r.Z)(e?t:null),o=n.data,s=n.error;return{data:o,error:s,isLoading:!s&&!o,isValidating:n.isValidating,mutate:n.mutate}}},69005:(e,t,n)=>{n.d(t,{YV:()=>r,jI:()=>a});var r=function(e){return e.SUCCESS="Successful",e.FAIL="Failed",e}({}),a=function(e){return e.ERROR_CODE_USER_NOT_FOUND="OUI-10011",e.ERROR_CODE_ACTIVE_INVITATION_EXISTS="OUI-10018",e.ERROR_CODE_INVITED_USER_EMAIL_NOT_FOUND="OUI-10030",e.ERROR_CODE_USER_ALREADY_EXISTS_INVITED_ORGANIZATION="OUI-10032",e}({})},72419:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Bt});var r=n(9779),a=n(55007),i=n(25134),o=n(1989),s=n(60486),l=n(90302),u=n(40838),c=n(43974),d=n(51021),m=n(63264),p=n(75120),f=n(29314),v=n(21257),g=n(80659),h=n(38463),E=n(58613),y=n(6833),b=n(82406),S=n(43516),I=n(47513),w=n(44194),U=n(10479),C=n(59673),O=n(47245),R=n(26154),A=n(47625),T=n(92e3),k=n(17370),L=n(12638),_=n(51907),N=n(92283),P=n(66796),z=n(2123);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z,j=function(e){var t,n,r=e.guestUsersList,i=e.getGuestUsersList,s=e.isGuestUsersRequestLoading,l=e.invitationStatusOption,u=e.searchQuery,c=e.onSearchQueryClear,d=e.userTypeSelection,m=e["data-componentid"],p=(0,U.$)().t,f=(0,O.I0)(),v=x((0,w.useState)(!1),2),g=v[0],h=v[1],E=x((0,w.useState)(void 0),2),I=E[0],C=E[1],R=x((0,w.useState)(!1),2),A=R[0],T=R[1],k=x((0,w.useState)(void 0),2),M=k[0],Z=k[1],j=x((0,w.useState)(!1),2),D=j[0],W=j[1],F=(0,O.v9)((function(e){return e.config.ui.features})),V=(0,a.EV)(null==F||null===(t=F.users)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),H=function(e){W(!0),d===N.rb.EXTERNAL?function(e){return(0,z.h)(e).then((function(){f((0,b.V_)({description:p("invite:notifications.deleteInvite.success.description"),level:y.QU.SUCCESS,message:p("invite:notifications.deleteInvite.success.message")})),i()})).catch((function(e){var t,n,r,a,i,o,s;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,b.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.deleteInvite.error.description"),level:y.QU.ERROR,message:null!==(o=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==o?o:p("invite:notifications.deleteInvite.error.message")})):f((0,b.V_)({description:p("invite:notifications.deleteInvite.genericError.description"),level:y.QU.ERROR,message:p("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){W(!1),h(!1),i()})):function(e){return(0,_.UF)(e).then((function(){f((0,b.V_)({description:p("invite:notifications.deleteInvite.success.description"),level:y.QU.SUCCESS,message:p("invite:notifications.deleteInvite.success.message")})),i()})).catch((function(e){var t,n,r,a,i,o,s;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,b.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.deleteInvite.error.description"),level:y.QU.ERROR,message:null!==(o=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==o?o:p("invite:notifications.deleteInvite.error.message")})):f((0,b.V_)({description:p("invite:notifications.deleteInvite.genericError.description"),level:y.QU.ERROR,message:p("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){W(!1),h(!1),i()}))},Q=function(e){W(!0),function(e){return(0,_.c_)(e).then((function(){f((0,b.V_)({description:p("invite:notifications.resendInvite.success.description"),level:y.QU.SUCCESS,message:p("invite:notifications.resendInvite.success.message")}))})).catch((function(e){var t,n,r,a,i,o,s;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,b.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.resendInvite.error.description"),level:y.QU.ERROR,message:null!==(o=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==o?o:p("invite:notifications.resendInvite.error.message")})):f((0,b.V_)({description:p("invite:notifications.resendInvite.genericError.description"),level:y.QU.ERROR,message:p("invite:notifications.resendInvite.genericError.message")}))}))}(e).finally((function(){W(!1),T(!1),i()}))},G=function(){return u&&0===(null==r?void 0:r.length)?w.createElement(S.$J,{action:w.createElement(S.Qj,{onClick:c},p("invite:placeholder.emptySearchResultPlaceholder.clearButton")),image:(0,o.jF)().emptySearch,imageSize:"tiny",title:p("invite:placeholder.emptySearchResultPlaceholder.title"),subtitle:[p("invite:placeholder.emptySearchResultPlaceholder.subTitle.0",{query:u}),p("invite:placeholder.emptySearchResultPlaceholder.subTitle.1")]}):0===(null==r?void 0:r.length)?l===P.XC.EXPIRED?w.createElement(S.$J,{image:(0,o.jF)().newList,imageSize:"tiny",subtitle:[d===N.rb.EXTERNAL?p("parentOrgInvitations:emptyPlaceholder.noExpiredInvitations"):p("parentOrgInvitations:emptyPlaceholder.noCollaboratorUserInvitations")]}):w.createElement(S.$J,{image:(0,o.jF)().newList,imageSize:"tiny",subtitle:[d===N.rb.EXTERNAL?p("parentOrgInvitations:emptyPlaceholder.noPendingInvitations"):"There are no collaborator users with pending invitations at the moment."]}):w.createElement(S.$J,{image:(0,o.jF)().newList,imageSize:"tiny",subtitle:[p("parentOrgInvitations:emptyPlaceholder.noInvitations")]})};return w.createElement(w.Fragment,null,w.createElement(S.wQ,{showSearch:!0,isLoading:s,loadingStateOptions:{count:5,imageType:"circular"},placeholders:G(),actions:[{hidden:function(){return d===N.rb.EXTERNAL||!V},icon:function(){return"redo alternate"},onClick:function(e,t){Z(t),T(!0)},popupText:function(){return"resend"},renderer:"semantic-icon"},{"data-componentid":"".concat(m,"-users-list-item-delete-invitation-button"),hidden:function(){return!V},icon:function(){return"trash alternate"},onClick:function(e,t){C(t),h(!0)},popupText:function(){return"delete"},renderer:"semantic-icon"}],data:r,columns:(n=[{allowToggleVisibility:!1,dataIndex:"email",id:"email",key:0,render:function(e){return w.createElement(L.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(m,"-item-image")},w.createElement(S.Yt,{"data-componentid":"".concat(m,"-item-image-inner"),name:e.email,size:"mini",image:e.email,spaced:"right"}),w.createElement(L.Z.Content,null,d===N.rb.EXTERNAL?null==e?void 0:e.username:null==e?void 0:e.email))},title:"User"},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:1,render:function(e){var t=e.status;return w.createElement(L.Z,{as:"h6","data-componentid":"".concat(m,"-invite-status")},w.createElement(L.Z.Content,null,w.createElement(L.Z.Subheader,null,t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())))},textAlign:"left",title:"Invitation Status"},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:3,textAlign:"right",title:""}],n),onRowClick:function(){return null},showHeader:!1,transparent:!s&&null!==G()}),g&&w.createElement(S.cV,{primaryActionLoading:D,"data-componentid":"".concat(m,"-confirmation-modal"),onClose:function(){return h(!1)},type:"negative",open:g,assertion:I.email,assertionHint:p("invite:confirmationModal.deleteInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return h(!1)},onPrimaryActionClick:function(){return H(I.id)},closeOnDimmerClick:!1},w.createElement(S.cV.Header,{"data-componentid":"".concat(m,"-confirmation-modal-header")},p("invite:confirmationModal.deleteInvite.header")),w.createElement(S.cV.Message,{"data-componentid":"".concat(m,"-confirmation-modal-message"),attached:!0,negative:!0},p("invite:confirmationModal.deleteInvite.message")),w.createElement(S.cV.Content,{"data-componentid":"".concat(m,"-confirmation-modal-content")},p("invite:confirmationModal.deleteInvite.content"))),A&&w.createElement(S.cV,{primaryActionLoading:D,"data-componentid":"".concat(m,"-confirmation-modal"),onClose:function(){return T(!1)},type:"warning",open:A,assertion:M.email,assertionHint:p("invite:confirmationModal.resendInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return T(!1)},onPrimaryActionClick:function(){return Q(M.id)},closeOnDimmerClick:!1},w.createElement(S.cV.Header,{"data-componentid":"".concat(m,"-confirmation-modal-header")},p("invite:confirmationModal.resendInvite.header")),w.createElement(S.cV.Message,{"data-componentid":"".concat(m,"-confirmation-modal-message"),attached:!0,warning:!0},p("invite:confirmationModal.resendInvite.message")),w.createElement(S.cV.Content,{"data-componentid":"".concat(m,"-confirmation-modal-content")},p("invite:confirmationModal.resendInvite.content"))))},D=n(41355),W=n(74411),F=n(48704),V=n(86105),H=n(16590),Q=n(37077),G=["title","titleId"];function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(null,arguments)}var B=function(e,t){var n=e.title,r=e.titleId,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,G);return w.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",className:"icon",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?w.createElement("title",{id:r},n):null,Z||(Z=w.createElement("path",{id:"remove-circle",d:"M7,14a7,7,0,1,1,7-7A7.008,7.008,0,0,1,7,14ZM3.5,6.69v.6h7v-.6Z"})))},X=(0,w.forwardRef)(B);n.p;var $,Y=["title","titleId"];function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(null,arguments)}var J=function(e,t){var n=e.title,r=e.titleId,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Y);return w.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",className:"icon",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?w.createElement("title",{id:r},n):null,$||($=w.createElement("path",{d:"M12,22a7,7,0,0,0,5-11.894V7A5,5,0,0,0,7,7v3.106A7,7,0,0,0,12,22Zm1-6.277V18a1,1,0,0,1-2,0V15.723a2,2,0,1,1,2,0ZM9,7a3,3,0,0,1,6,0V8.683a6.93,6.93,0,0,0-6,0Z"})))},ee=(0,w.forwardRef)(J);n.p;var te=n(22669);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t,n,r,i,c=e.advancedSearch,d=e.defaultListItemLimit,m=e.onUserDelete,p=e.isLoading,f=e.featureConfig,g=e.onColumnSelectionChange,h=e.onListItemClick,I=e.onSearchQueryClear,C=e.searchQuery,A=e.selection,k=e.showListItemActions,_=e.showMetaContent,P=e.userMetaListContent,z=e.usersList,x=e.isReadOnlyUserStore,M=e["data-testid"],Z=(0,U.$)().t,j=(0,O.I0)(),G=(0,v.z)().isSubOrganization,K=(0,E.Z)().readOnlyUserStoreNamesList,B=oe((0,w.useState)(!1),2),$=B[0],Y=B[1],q=oe((0,w.useState)(void 0),2),J=q[0],ne=q[1],re=oe((0,w.useState)(!1),2),ie=re[0],le=re[1],ue=(0,O.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.providedUsername})),ce=(0,O.v9)((function(e){return e.auth.isPrivilegedUser})),de=!(null!=f&&null!==(t=f.users)&&void 0!==t&&null!==(t=t.disabledFeatures)&&void 0!==t&&t.includes(N._F.FEATURE_DICTIONARY.get("USER_SHARED_PROFILES"))),me=(0,a.EV)(null==f||null===(n=f.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),pe=(0,a.EV)(null==f||null===(r=f.users)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.delete),fe=function(e){u.m.push(s.$.getPaths().get("USER_EDIT").replace(":id",e))},ve=function(){return C?w.createElement(S.$J,{action:w.createElement(S.Qj,{onClick:I},Z("users:usersList.search.emptyResultPlaceholder.clearButton")),image:(0,o.jF)().emptySearch,imageSize:"tiny",title:Z("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[Z("users:usersList.search.emptyResultPlaceholder.subTitle.0",{query:C}),Z("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}):0===(null==z?void 0:z.totalResults)?w.createElement(S.$J,{"data-testid":"".concat(M,"-empty-placeholder"),image:(0,o.jF)().newList,imageSize:"tiny",title:Z(x?"users:usersList.list.emptyResultPlaceholder.emptyUsers":"users:usersList.list.emptyResultPlaceholder.title"),subtitle:x?[Z("users:usersList.list.emptyResultPlaceholder.subTitle.0")]:[Z("users:usersList.list.emptyResultPlaceholder.subTitle.0"),Z("users:usersList.list.emptyResultPlaceholder.subTitle.1"),Z("users:usersList.list.emptyResultPlaceholder.subTitle.2")]}):null};return w.createElement(w.Fragment,null,w.createElement(S.wQ,{className:"users-table",externalSearch:c,isLoading:p,loadingStateOptions:{count:null!=d?d:l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},actions:function(){if(k){var e=[{"data-componentid":"users-list-item-edit-button","data-testid":"users-list-item-edit-button",hidden:function(){return!(0,V.cr)(null==f?void 0:f.users,N._F.FEATURE_DICTIONARY.get("USER_READ"))},icon:function(e){var t,n,r,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:F.w.primaryUserstoreName;return!me||!(0,V.cr)(null==f?void 0:f.users,N._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=K&&K.includes(a.toString())||!de&&null!==(r=e[D.k.scim.systemSchema])&&void 0!==r&&r.managedOrg?"eye":"pencil alternate"},onClick:function(e,t){return fe(null==t?void 0:t.id)},popupText:function(e){var t,n,r,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:F.w.primaryUserstoreName;return!me||!(0,V.cr)(null==f?void 0:f.users,N._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=K&&K.includes(a.toString())||!de&&null!==(r=e[D.k.scim.systemSchema])&&void 0!==r&&r.managedOrg?Z("common:view"):Z("common:edit")},renderer:"semantic-icon"}];return e.push({"data-componentid":"users-list-item-delete-button","data-testid":"users-list-item-delete-button",hidden:function(e){var t,n,r,a,i,o,s=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:F.w.primaryUserstoreName;return!(!G()||null===(r=e[null===D.k||void 0===D.k||null===(a=D.k.scim)||void 0===a?void 0:a.systemSchema])||void 0===r||!r.sharedType||(null===(i=e[null===D.k||void 0===D.k||null===(o=D.k.scim)||void 0===o?void 0:o.systemSchema])||void 0===i?void 0:i.sharedType)==N.P2.INVITED)||(!(0,V.cr)(null==f?void 0:f.users,N._F.FEATURE_DICTIONARY.get("USER_DELETE"))||!pe||(null==K?void 0:K.includes(s.toString()))||ue===(0,V.WX)(null==e?void 0:e.userName)&&ce)},icon:function(){return"trash alternate"},onClick:function(e,t){Y(!0),ne(t)},popupText:function(){return Z("users:usersList.list.iconPopups.delete")},renderer:"semantic-icon"}),e}}(),columns:function(){var e=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,r,a,i=(0,V.WX)(null==e?void 0:e.userName),o=te.QH.resolveUserListSubheader(e),s=void 0===(null===(t=e.name)||void 0===t?void 0:t.familyName)&&void 0===(null===(n=e.name)||void 0===n?void 0:n.givenName);return w.createElement(L.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(M,"-item-heading")},w.createElement(S.Yt,{"data-componentid":"users-list-item-image",name:te.QH.resolveAvatarUsername(e),size:"mini",image:e.profileUrl,spaced:"right","data-hj-suppress":""}),function(e){var t,n,r,a,i,o,s="true"===(null===(t=e[W.x.userProfileSchema])||void 0===t?void 0:t.accountLocked)||!0===(null===(n=e[W.x.userProfileSchema])||void 0===n?void 0:n.accountLocked),l="true"===(null===(r=e[W.x.userProfileSchema])||void 0===r?void 0:r.accountDisabled)||!0===(null===(a=e[W.x.userProfileSchema])||void 0===a?void 0:a.accountDisabled),u=null===(i=e[W.x.userProfileSchema])||void 0===i?void 0:i.lockedReason,c=null!==(o=N.Dk[u])&&void 0!==o?o:N.Dk.DEFAULT;return l?w.createElement(S.GI,{trigger:w.createElement(R.Z,{className:"disabled-icon",size:"small"},w.createElement(X,null)),content:Z("user:profile.accountDisabled"),inverted:!0}):s?w.createElement(S.GI,{trigger:w.createElement(R.Z,{className:"locked-icon",size:"small"},w.createElement(ee,null)),content:Z(c),inverted:!0}):null}(e),w.createElement(L.Z.Content,{className:"pl-0"},w.createElement("div",null,i,(null===W.x||void 0===W.x?void 0:W.x.disableManagedByColumn)&&(null===(r=e[null===D.k||void 0===D.k||null===(a=D.k.scim)||void 0===a?void 0:a.systemSchema])||void 0===r?void 0:r.managedOrg)&&w.createElement(Q.Z,{size:"mini",className:"client-id-label"},Z("parentOrgInvitations:invitedUserLabel"))),!s&&w.createElement(L.Z.Subheader,{"data-componentid":"".concat(M,"-item-sub-heading")},o)))},title:"User"}];if(!W.x.disableManagedByColumn&&e.push({allowToggleVisibility:!1,dataIndex:"idpType",id:"idpType",key:"idpType",render:function(e){return function(e){var t,n,r,a,i;if(null!==(t=e[null===D.k||void 0===D.k||null===(n=D.k.scim)||void 0===n?void 0:n.systemSchema])&&void 0!==t&&t.managedOrg)return N._F.MANAGED_BY_PARENT_TEXT;var o=(null==e||null===(r=e.userName)||void 0===r?void 0:r.split("/").length)>1?null==e||null===(a=e.userName)||void 0===a||null===(a=a.split("/")[0])||void 0===a?void 0:a.toUpperCase():F.w.primaryUserstoreName,s=null===(i=e[D.k.scim.systemSchema])||void 0===i?void 0:i.idpType;return s?s.split("/").length>1?null!=K&&K.includes(o.toString())?s.split("/")[1]+"-remote":s.split("/")[1]:s:"N/A"}(e)},title:w.createElement(w.Fragment,null,w.createElement("div",{className:"header-with-popup"},w.createElement("span",null,Z("extensions:manage.users.list.columns.idpType")),w.createElement(S.GI,{trigger:w.createElement("div",{className:"inline"},w.createElement(R.Z,{disabled:!0,name:"info circle",className:"link pointing pl-1"})),content:Z("extensions:manage.users.list.popups.content.idpTypeContent"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0})))}),e.push({allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""}),!_||!P)return e;var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=se(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(P.entries());try{for(r.s();!(t=r.n()).done;){var a=oe(t.value,2),i=a[0],o=a[1];if("name"!==i&&"emails"!==i&&"profileUrl"!==i&&""!==o){var s={allowToggleVisibility:!0,dataIndex:o,id:i,key:i,title:o};"meta.lastModified"===i&&(s=ae(ae({},s),{},{render:function(e){var t;return H.CommonUtils.humanizeDateDifference(null==e||null===(t=e.meta)||void 0===t?void 0:t.lastModified)}})),"userName"===i&&(s=ae(ae({},s),{},{render:function(e){return(0,V.WX)(null==e?void 0:e.userName)}})),n.push(s)}}}catch(l){r.e(l)}finally{r.f()}return n.unshift(e[0]),n.push(e[1]),n}(),data:null==z?void 0:z.Resources,onColumnSelectionChange:g,onRowClick:function(e,t){fe(null==t?void 0:t.id),h&&h(e,t)},placeholders:ve(),selectable:A,showHeader:!0,transparent:!p&&null!==ve(),"data-testid":M}),w.createElement(S.cV,{primaryActionLoading:ie,"data-testid":"".concat(M,"-confirmation-modal"),"data-componentid":"".concat(M,"-confirmation-modal"),onClose:function(){return Y(!1)},type:"negative",open:$,assertionHint:Z("user:deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){Y(!1)},onPrimaryActionClick:function(){var e;le(!0),(e=null==J?void 0:J.id,(0,T.h8)(e).then((function(){j((0,b.V_)({description:Z("users:notifications.deleteUser.success.description"),level:y.QU.SUCCESS,message:Z("users:notifications.deleteUser.success.message")})),m()})).catch((function(e){e.response&&e.response.data&&e.response.data.description?j((0,b.V_)({description:e.response.data.description,level:y.QU.ERROR,message:Z("users:notifications.deleteUser.error.message")})):j((0,b.V_)({description:Z("users:notifications.deleteUser.genericError.description"),level:y.QU.ERROR,message:Z("users:notifications.deleteUser.genericError.message")}))}))).finally((function(){le(!1),ne(void 0),Y(!1)}))},closeOnDimmerClick:!1},w.createElement(S.cV.Header,{"data-testid":"".concat(M,"-confirmation-modal-header"),"data-componentid":"".concat(M,"-confirmation-modal-header")},Z("user:deleteUser.confirmationModal.header")),w.createElement(S.cV.Message,{"data-testid":"".concat(M,"-confirmation-modal-message"),attached:!0,negative:!0},Z("user:deleteUser.confirmationModal.message")),w.createElement(S.cV.Content,{"data-testid":"".concat(M,"-confirmation-modal-content"),"data-componentid":"".concat(M,"-confirmation-modal-content")},J&&null!==(i=J[D.k.scim.systemSchema])&&void 0!==i&&i.userSourceId?Z("user:deleteJITUser.confirmationModal.content"):Z("user:deleteUser.confirmationModal.content"))))};ue.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0};var ce=n(32409),de=n(55584),me=n(5315),pe=n(88248),fe=n(84882),ve=n(48461),ge=n(92793),he=n(73405),Ee=n(89497),ye=n(6894),be=n(12252),Se=n(17028),Ie=n(39203),we=n(11626),Ue=n(33839),Ce=n(34194),Oe=n(76004),Re=n.n(Oe),Ae=n(30601);const Te=function(e){return(0,Ae.Z)(e).toUpperCase()};var ke=n(89141),Le=n(10909),_e=n(77757),Ne=n(78768),Pe=n(6643),ze=n(30325),xe=n(15022),Me=n(63317);function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var De=function(e){var t=e.responseList,n=e.isLoading,r=e.bulkResponseSummary,a=e.hasError,s=e.successAlert,u=e["data-componentid"],c=Ze((0,w.useState)(!1),2),d=c[0],m=c[1],p=Ze((0,w.useState)(""),2),f=p[0],v=p[1],g=Ze((0,w.useState)(N.IC.ALL),2),h=g[0],E=g[1],y=Ze((0,w.useState)([]),2),b=y[0],I=y[1],O=Ze((0,w.useState)(N.tr.USER_CREATION),2),R=O[0],T=O[1],k=Ze((0,w.useState)(0),2),_=k[0],P=k[1],z=(0,U.$)().t,x=r.failedUserCreation+r.successUserCreation,M=r.failedUserAssignment+r.successUserAssignment,Z=l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,j=[{key:0,text:"All",value:N.IC.ALL},{key:1,text:z("user:modals.bulkImportUserWizard.wizardSummary.tableStatus.success"),value:N.IC.SUCCESS},{key:2,text:z("user:modals.bulkImportUserWizard.wizardSummary.tableStatus.failed"),value:N.IC.FAILED}],D=[{key:0,text:z("user:modals.bulkImportUserWizard.wizardSummary.responseOperationType.userCreation"),value:N.tr.USER_CREATION},{key:1,text:z("user:modals.bulkImportUserWizard.wizardSummary.responseOperationType.roleAssignment"),value:N.tr.ROLE_ASSIGNMENT}];(0,w.useEffect)((function(){W()}),[t]),(0,w.useEffect)((function(){K(),E(N.IC.ALL),W()}),[R]);var W=function(){var e=t.filter((function(e){return e.operationType===R}));I(e)};(0,w.useEffect)((function(){!function(){var e=null==t?void 0:t.filter((function(e){return(null==e?void 0:e.operationType)===R}));if(f&&""!==f){var n=Ze(f.split(" "),3),r=n[1],a=n[2];e=e.filter((function(e){var t,n,i;if(h!==N.IC.ALL&&e.statusCode!==h)return!1;switch(r){case"sw":return null===(t=e.resourceIdentifier)||void 0===t?void 0:t.startsWith(a);case"ew":return null===(n=e.resourceIdentifier)||void 0===n?void 0:n.endsWith(a);case"co":return null===(i=e.resourceIdentifier)||void 0===i?void 0:i.includes(a);case"eq":return e.resourceIdentifier===a;default:return!1}}))}h!==N.IC.ALL&&(e=e.filter((function(e){return e.statusCode===h&&e.operationType===R}))),I(e)}()}),[f,h]);var F,V,H,G,K=function(){m(!d),v("")},B=function(e,t){var n=D.find((function(e){return e.key===t}));n&&(T(n.value),P(t))},X=R===N.tr.USER_CREATION?[{key:0,text:z("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"}]:[{key:1,text:z("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),value:"roleName"}];return w.createElement(w.Fragment,null,w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},n||a?null:0===r.failedUserCreation&&0===r.failedUserAssignment?null!=s?s:w.createElement(pe.Z,{severity:"success","data-componentid":"".concat(u,"-success-alert")},w.createElement(ze.Z,{"data-componentid":"".concat(u,"-success-alert-title")},z("user:modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.message")),z("user:modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.description")):w.createElement(pe.Z,{severity:"error","data-componentid":"".concat(u,"-error-alert")},w.createElement(ze.Z,{"data-componentid":"".concat(u,"-error-alert-title")},z("user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.message")),0!==r.failedUserCreation&&w.createElement("li",null,w.createElement(C.c,{i18nKey:"user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.userCreation",tOptions:{failedUserCreationCount:r.failedUserCreation}},"Issues encountered in",w.createElement("b",null,r.failedUserCreation," user creations"),".")),0!==r.failedUserAssignment&&w.createElement("li",null,w.createElement(C.c,{i18nKey:"user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.groupAssignment",tOptions:{failedUserAssignmentCount:r.failedUserAssignment}},"Issues encountered in",w.createElement("b",null,r.failedUserAssignment," group assignments"),". Users in the affected groups were created but not assigned. Please navigate to User Management section to review  and assign groups to the users."))))),w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},w.createElement(Me.Z,{value:_,onChange:B,"component-id":"".concat(u,"-operation-type-tab")},D.map((function(e){return w.createElement(xe.Z,{key:e.key,label:w.createElement("div",{className:"beta-feature-tab-item"},w.createElement(Ee.Z,{sx:{fontWeight:500}},e.text)),"data-componentid":"".concat(u,"-").concat(e.value,"-tab")})}))))),w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},w.createElement(S.PS,{advancedSearch:w.createElement(i.n,{onFilter:function(e){v(e),e||W()},filterAttributeOptions:X,filterAttributePlaceholder:R===N.tr.USER_CREATION?z("users:advancedSearch.form.dropdown.filterAttributeOptions.username"):z("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),filterConditionsPlaceholder:z("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:z("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:R===N.tr.USER_CREATION?z("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByUsername"):z("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByGroup"),defaultSearchAttribute:"resourceName",defaultSearchOperator:"co",triggerClearQuery:d,"data-testid":"".concat(u,"-advanced-search"),"data-componentid":"".concat(u,"-advanced-search")}),rightActionPanel:w.createElement(w.Fragment,null,w.createElement(A.Z,{"data-testid":"".concat(u,"-filter-status-dropdown"),"data-componentid":"".concat(u,"-filter-status-dropdown"),selection:!0,options:j,onChange:function(e,t){var n=t.value;E(n),m(!d)},value:h,disabled:(F=R===N.tr.USER_CREATION,V=R===N.tr.ROLE_ASSIGNMENT,H=0===r.failedUserCreation||0===r.successUserCreation,G=0===r.failedUserAssignment||0===r.successUserAssignment,F&&H||V&&G)})),showPagination:!1,showTopActionPanel:!0,totalPages:Math.ceil(x/Z),totalListSize:x,isLoading:n,listItemLimit:l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,"data-testid":"".concat(u,"-list-layout"),"data-componentid":"".concat(u,"-list-layout"),onPageChange:function(){return null},disableRightActionPanel:!1},w.createElement(Ee.Z,{variant:"body2",style:{textAlign:"right"}},R===N.tr.USER_CREATION?z("user:modals.bulkImportUserWizard.wizardSummary.totalUserCreationCount")+" : "+x:z("user:modals.bulkImportUserWizard.wizardSummary.totalUserAssignmentCount")+" : "+M),w.createElement(S.wQ,{className:"addon-field-wrapper",isLoading:n,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return w.createElement(L.Z,{as:"h6","data-componentid":"".concat(u,"-username-item-heading")},w.createElement(L.Z.Content,null,e.resourceIdentifier))},title:z("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return w.createElement(L.Z,{as:"h6","data-componentid":"".concat(u,"-status-item-heading")},w.createElement(L.Z.Content,null,w.createElement(Q.Z,{"data-componentid":"".concat(u,"-bulk-label"),content:e.status,size:"small",color:e.statusCode===N.IC.SUCCESS?"green":"red",className:"group-label"})))},title:z("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return w.createElement(L.Z,{as:"h6","data-componentid":"".concat(u,"-status-item-heading")},w.createElement(L.Z.Content,null,e.message))},title:z("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:b,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:w.createElement(S.$J,{"data-testid":"".concat(u,"-empty-search-result"),"data-componentid":"".concat(u,"-empty-search-result"),action:f?w.createElement(S.Qj,{onClick:K},z("users:usersList.search.emptyResultPlaceholder.clearButton")):null,image:(0,o.jF)().emptySearch,imageSize:"tiny",title:z("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[z("users:usersList.search.emptyResultPlaceholder.subTitle.0",{query:f||h}),z("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(u,"-data-table"),"data-componentid":"".concat(u,"-data-table"),loadingStateOptions:{count:l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}})))))};function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(null,arguments)}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==We(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Be(){Be=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new k(r||[]);return a(o,"_invoke",{value:O(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var m="suspendedStart",p="suspendedYield",f="executing",v="completed",g={};function h(){}function E(){}function y(){}var b={};u(b,o,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(L([])));I&&I!==n&&r.call(I,o)&&(b=I);var w=y.prototype=h.prototype=Object.create(b);function U(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,i,o,s){var l=d(e[a],e,i);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==We(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function O(t,n,r){var a=m;return function(i,o){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var l=R(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=f;var u=d(t,n,r);if("normal"===u.type){if(a=r.done?v:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function R(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(We(t)+" is not iterable")}return E.prototype=y,a(w,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:E,configurable:!0}),E.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},U(C.prototype),u(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new C(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},U(w),u(w,l,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return s.type="throw",s.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Xe(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function $e(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Xe(i,r,a,o,s,"next",e)}function s(e){Xe(i,r,a,o,s,"throw",e)}o(void 0)}))}}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}De.defaultProps={isLoading:!1,responseList:[]};var et="identity/askPassword",tt="Data validation error",nt="TIMEOUT_ERROR",rt="addresses#home",at="addresses",it="bulkId",ot=function(e){var t=e.closeWizard,n=e.userstore,a=e["data-componentid"],i=(0,U.$)().t,l=(0,v.z)().isSubOrganization,c=(0,O.I0)(),d=Ye((0,w.useState)(null),2),p=d[0],f=d[1],g=Ye((0,w.useState)(),2),I=g[0],k=g[1],L=Ye((0,w.useState)(!1),2),_=L[0],z=L[1],x=Ye((0,w.useState)(!1),2),M=x[0],Z=x[1],j=Ye((0,w.useState)(!1),2),D=j[0],W=j[1],F=Ye((0,w.useState)([]),2),V=F[0],H=F[1],Q=Ye((0,w.useState)([]),2),G=Q[0],K=Q[1],B=Ye((0,w.useState)(!1),2),X=B[0],$=B[1],Y=Ye((0,w.useState)(!1),2),q=Y[0],J=Y[1],ee=Ye((0,w.useState)(st),2),te=ee[0],ne=ee[1],re=Ye((0,w.useState)(st),2),ae=re[0],ie=re[1],oe=Ye((0,w.useState)(P.Wv.MANUAL),2),se=oe[0],le=oe[1],ue=Ye((0,w.useState)(),2),ce=ue[0],Oe=ue[1],Ae=Ye((0,w.useState)(!1),2),ze=Ae[0],xe=Ae[1],Me=Ye((0,w.useState)(""),2),Ze=Me[0],je=Me[1],We=Ye((0,w.useState)(),2),Ve=We[0],Xe=We[1],qe=Ye((0,S.IK)({"data-componentid":"".concat(a,"-alert")}),3),Je=qe[0],ot=qe[1],lt=qe[2],ut=Ye((0,S.IK)({"data-componentid":"".concat(a,"-manual-invite-alert")}),3),ct=ut[0],dt=ut[1],mt=ut[2],pt=Ye((0,w.useState)([]),2),ft=pt[0],vt=pt[1],gt=Ye((0,w.useState)(m.wO.primaryUserstoreName),2),ht=gt[0],Et=gt[1],yt=Ye((0,w.useState)(!1),2),bt=yt[0],St=yt[1],It=Ye((0,w.useState)(!1),2),wt=It[0],Ut=It[1],Ct=(0,Ue.W)().data,Ot=(0,S.fQ)().getLink,Rt=(0,Pe.t$)(Ct),At="true"===(null==Rt?void 0:Rt.enableValidator),Tt=(0,O.v9)((function(e){return e.config.ui.features.bulkUserImport.fileImportTimeout})),kt=(0,O.v9)((function(e){return e.config.ui.features.bulkUserImport.userLimit})),Lt=(0,w.useMemo)((function(){return new S.Wc(void 0,m.x8.bulkUserImportLimit.fileSize*S.Wc.KILOBYTE,kt||m.x8.bulkUserImportLimit.userCount)}),[kt]),_t=(0,E.Z)().isUserStoreReadOnly,Nt=[],Pt=(0,Ie.Ug)(ht,"members",null,!0),zt=Pt.data,xt=Pt.error;(0,w.useEffect)((function(){var e,t,n,r,a,o;xt&&c((0,b.V_)({description:null!==(e=null!==(t=null==xt||null===(n=xt.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:null==xt||null===(r=xt.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==e?e:i("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:y.QU.ERROR,message:null!==(a=null==xt||null===(o=xt.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)&&void 0!==a?a:i("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}),[xt]),(0,w.useEffect)((function(){Et(n),Mt()}),[n]);var Mt=function(){W(!0);var e=[{key:-1,text:m.wO.primaryUserstoreName,value:m.wO.primaryUserstoreName}],t={requiredAttributes:[h.u4.USER_STORE_PROPERTY_READ_ONLY,h.u4.USER_STORE_PROPERTY_DISABLED,h.u4.USER_STORE_PROPERTY_BULK_IMPORT_SUPPORTED,h.u4.USER_STORE_PROPERTY_IS_BULK_IMPORT_SUPPORTED].join(",")};(0,we.GN)(t).then((function(t){null==t||t.forEach(function(){var t=$e(Be().mark((function t(n,r){return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Zt(n)&&e.push({key:r,text:n.name,value:n.name});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),St(!1),vt(e)})).catch((function(e){var t,n,r,a,o,s,l;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?c((0,b.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.detail)&&void 0!==n?n:i("userstores:notifications.fetchUserstores.error.description"),level:y.QU.ERROR,message:null!==(s=null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==s?s:i("userstores:notifications.fetchUserstores.error.message")})):(c((0,b.V_)({description:i("userstores:notifications.fetchUserstores.genericError.description"),level:y.QU.ERROR,message:i("userstores:notifications.fetchUserstores.genericError.message")})),St(!0))})).finally((function(){W(!1)}))},Zt=function(e){var t,n,r=!_t(null==e?void 0:e.name),a=!(null!==(t=e.properties)&&void 0!==t&&t.some((function(e){var t,n;return[h.u4.USER_STORE_PROPERTY_BULK_IMPORT_SUPPORTED.toLowerCase(),h.u4.USER_STORE_PROPERTY_IS_BULK_IMPORT_SUPPORTED.toLowerCase()].includes(null==e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase())&&"false"===(null==e||null===(n=e.value)||void 0===n?void 0:n.toLowerCase())}))),i=null===(n=e.properties)||void 0===n?void 0:n.some((function(e){var t,n;return(null==e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase())===h.u4.USER_STORE_PROPERTY_DISABLED.toLowerCase()&&"true"===(null==e||null===(n=e.value)||void 0===n?void 0:n.toLowerCase())}));return r&&a&&!i},jt=function(){return!(null!==m.x8&&void 0!==m.x8&&m.x8.enableBulkImportSecondaryUserStore&&!bt)||(ft?0===(null==ft?void 0:ft.length)||1===(null==ft?void 0:ft.length)&&(null===(e=ft[0])||void 0===e?void 0:e.value)===n:void 0);var e},Dt=function(){var e=$e(Be().mark((function e(){var t,n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Ie.hI)(ht);case 3:return n=e.sent,r=null==n||null===(t=n.data)||void 0===t||null===(t=t.Resources)||void 0===t?void 0:t.reduce((function(e,t){return e[null==t?void 0:t.displayName.toLowerCase()]={displayName:null==t?void 0:t.displayName,id:null==t?void 0:t.id,members:[]},e}),{}),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),z(!0),c((0,b.V_)({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:y.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,w.useEffect)((function(){le(At&&null!==m.x8&&void 0!==m.x8&&m.x8.enableUsernameValidation?P.Wv.META_FILE:P.Wv.MANUAL)}),[At]);var Wt,Ft=function(){var e=$e(Be().mark((function e(){var t,n,r,a,o,s,l,u,d,m,p;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.prev=1,e.next=4,(0,ye.Pq)();case 4:t=e.sent,n=null==t?void 0:t.Resources,a=Ke(n);try{for(a.s();!(o=a.n()).done;)"User"===(null==(s=o.value)?void 0:s.id)&&(l=null==s?void 0:s.schemaExtensions,(r=l.map((function(e){return e.schema}))).push(null==s?void 0:s.schema))}catch(f){a.e(f)}finally{a.f()}return e.next=10,(0,ye.jp)({});case 10:return u=e.sent,d=u.filter((function(e){return r.includes(e.dialectURI)})),e.abrupt("return",d);case 15:e.prev=15,e.t0=e.catch(1),z(!0),c((0,b.V_)({description:(null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.description)||i("claims:dialects.notifications.fetchDialects.genericError.description"),level:y.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.message)||i("claims:dialects.notifications.fetchDialects.genericError.message")}));case 19:return e.prev=19,W(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),Vt=function(){var e=$e(Be().mark((function e(){var t,n,r,a,o,s;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push((0,ye.gR)(e.id,null))})),e.prev=5,W(!0),e.next=9,Re().all(n);case 9:return r=e.sent,a=[],r.forEach((function(e){var t=e.map((function(e){return{attributeName:null==e?void 0:e.mappedLocalClaimURI.replace(N._F.WSO2_LOCAL_CLAIM_DIALECT+"/","").toLowerCase(),mappedLocalClaimURI:null==e?void 0:e.mappedLocalClaimURI,mappedSCIMAttributeURI:null==e?void 0:e.claimURI,mappedSCIMClaimDialectURI:null==e?void 0:e.claimDialectURI}}));a.push.apply(a,Ge(t))})),e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(5),z(!0),c((0,b.V_)({description:(null===(o=e.t0[0])||void 0===o||null===(o=o.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description)||i("claims:dialects.notifications.fetchExternalClaims.genericError.description"),level:y.QU.ERROR,message:(null===(s=e.t0[0])||void 0===s||null===(s=s.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)||i("claims:dialects.notifications.fetchExternalClaims.genericError.message")}));case 19:return e.prev=19,W(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),Ht=function(e){return 0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},Qt=function(e){return 0===e.length},Gt=function(e){return!e||""===e.trim()},Kt=function(e){ot({description:i("users:notifications.bulkImportUser.validation.".concat(e.descriptionKey),e.descriptionValues||{}),level:y.QU.ERROR,message:i("users:notifications.bulkImportUser.validation.".concat(e.messageKey))})},Bt=function(e,t){var n,r=e.headers,a=e.items,i=At?Object.values(N.NS):[N.NS.USERNAME],o=function(e,t){return t.filter((function(t){return!e.some((function(e){return e.toLowerCase()===t.toLowerCase()}))}))}(r,i),s=(n=r.reduce((function(e,t){var n=t.toLowerCase();return e[n]=(e[n]||0)+1,e}),{}),Object.keys(n).filter((function(e){return n[e]>1}))),l=Object.values(N.GU),u=function(e,t){return e.filter((function(e){return t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(r,l),c=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(r,t),d=function(e){return e.map((function(e,t){return Gt(e)?t:-1})).filter((function(e){return-1!==e}))}(r);return!!function(e){var t,n=Ke(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.check())return Kt(r.error),!1}}catch(a){n.e(a)}finally{n.f()}return!0}([{check:function(){return!(Qt(r)||Qt(a))},error:{descriptionKey:"emptyRowError.description",messageKey:"emptyRowError.message"}},{check:function(){return a.every((function(e){return e.length===r.length}))},error:{descriptionKey:"columnMismatchError.description",messageKey:"columnMismatchError.message"}},{check:function(){return 0===d.length},error:{descriptionKey:"emptyHeaderError.description",messageKey:"emptyHeaderError.message"}},{check:function(){return 0===o.length},error:{descriptionKey:"missingRequiredHeaderError.description",descriptionValues:{headers:Ht(o)},messageKey:"missingRequiredHeaderError.message"}},{check:function(){return 0===u.length},error:{descriptionKey:"blockedHeaderError.description",descriptionValues:{headers:Ht(u)},messageKey:"blockedHeaderError.message"}},{check:function(){return 0===s.length},error:{descriptionKey:"duplicateHeaderError.description",descriptionValues:{headers:Ht(s)},messageKey:"duplicateHeaderError.message"}},{check:function(){return 0===c.length},error:{descriptionKey:"invalidHeaderError.description",descriptionValues:{headers:Ht(c)},messageKey:"invalidHeaderError.message"}}])},Xt=function(e,t){var n=e.map((function(e){return t.find((function(t){return e.toLowerCase()===t.attributeName.toLowerCase()}))})).filter(Boolean);return n.push(t.find((function(e){return e.attributeName.toLowerCase()===et.toLowerCase()}))),n},$t=function(e){z(!0),Kt({descriptionKey:"emptyDataField.description",descriptionValues:{dataField:e},messageKey:"emptyDataField.message"})},Yt=function(e,t,n){var r,a={},o=new Set([N._F.SCIM2_USER_SCHEMA]),s="",l=Ke(t);try{var u=function(){var t=r.value,l=t.mappedSCIMAttributeURI.replace("".concat(t.mappedSCIMClaimDialectURI,":"),""),u=e[n.indexOf(t.attributeName.toLowerCase())],c=l.includes("#");if(t.attributeName===N._F.ROLES||t.attributeName===N._F.GROUPS)return 0;if(l===N.NS.USERNAME){if(s=u,Gt(u))throw $t(t.attributeName),new Error(tt);return a[N.NS.USERNAME]=ht&&ht.toLowerCase()!==h.pH.toLowerCase()?"".concat(ht,"/").concat(u):u,0}if(t.attributeName===N.NS.EMAILADDRESS){if(!At)return 0;if(Gt(u))throw $t(t.attributeName),new Error(tt);if(!Ce.I.email(u))throw ot({description:i("user:forms.addUserForm.inputs.email.validations.invalid"),level:y.QU.ERROR,message:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage")}),new Error(tt)}if(t.attributeName.toLowerCase()===et.toLowerCase())return a[t.mappedSCIMClaimDialectURI]=He(He({},a[t.mappedSCIMClaimDialectURI]||{}),{},Qe({},l,"true")),0;var d=Object.values(N.DD).find((function(e){return l.includes(e)}));if(!c&&d){var m=l.includes(d+".")?{type:l.split(".")[1],value:u}:{primary:!0,value:u};return a[d]=a[d]||[],a[d].push(m),0}if(l.includes(rt))return a[at]=a[at]||[],a[at].push(Qe({type:"home"},l.replace("".concat(rt,"."),""),u)),0;o.add(t.mappedSCIMClaimDialectURI);var p=c?l.split("#")[0]:l;if(!p.includes(".")){var f=t.mappedSCIMClaimDialectURI===N._F.SCIM2_USER_SCHEMA?a:a[t.mappedSCIMClaimDialectURI]||(a[t.mappedSCIMClaimDialectURI]={});return f[p]=c?(f[p]||[]).concat(u):u,0}if(p.includes(".")){var v=Ye(p.split("."),2),g=v[0],E=v[1],b=t.mappedSCIMClaimDialectURI===N._F.SCIM2_USER_SCHEMA?a:a[t.mappedSCIMClaimDialectURI]||(a[t.mappedSCIMClaimDialectURI]={});return c?b[g]=(b[g]||[]).concat(Qe({},E,u)):(b[g]||(b[g]={}),b[g][E]=u),0}};for(l.s();!(r=l.n()).done;)u()}catch(c){l.e(c)}finally{l.f()}return At||(a[N.DD.Emails]=[{primary:!0,value:s}]),He({schema:Array.from(o)},a)},qt=function(e,t,n,r){var a=(0,Ne.Z)(),i="".concat(it,":").concat(e[n.indexOf(N.NS.USERNAME.toLowerCase())],":").concat(a),o=e[n.indexOf(N.NS.USERNAME.toLowerCase())],s=He({},r);if(n.includes(N._F.GROUPS)){var l=e[n.indexOf(N._F.GROUPS)].split("|");Ge(new Set(l)).forEach((function(e){if(!Gt(e)){var t=ht&&ht.toLowerCase()!==h.pH.toLowerCase()?"".concat(ht,"/").concat(e):e;if(!(t.toLowerCase()in r))throw Kt({descriptionKey:"invalidGroup.description",descriptionValues:{group:t},messageKey:"invalidGroup.message"}),new Error(tt);s=Jt(t,{display:o,value:"bulkId:".concat(i)},s)}}))}var u={bulkId:i,data:Yt(e,t,n),method:y.f2.POST,path:N._F.SCIM_USER_PATH};return{newGroupMemberAssociations:s,userOperation:u}},Jt=function(e,t,n){var r=He({},n),a=r[e.toLowerCase()];return r[e.toLowerCase()]=He(He({},a),{},{members:Array.from(new Set([].concat(Ge(a.members),[t])))}),r},en=function(e){var t=(0,Ne.Z)();return Object.values(e).filter((function(e){return e.members.length>0})).map((function(e){return{bulkId:"".concat(it,":").concat(e.displayName,":").concat(t),data:{Operations:[{op:"add",value:{members:e.members.map((function(e){return{display:e.display,value:e.value}}))}}]},method:y.f2.PATCH,path:"".concat(N._F.SCIM_GROUP_PATH,"/").concat(e.id)}}))},tn=function(){var e=$e(Be().mark((function e(t){var n,r,a,i,o,s,l,u,c,d;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.headers.map((function(e){return e.toLowerCase()})),r=I.items,a=Xt(n,t),e.next=5,Dt();case 5:for(i=e.sent,o=[],s=[],l=0;l<r.length;l++)u=r[l],c=qt(u,a,n,i),o.push(c.userOperation),i=c.newGroupMemberAssociations;return n.includes(N._F.GROUPS)&&(s=en(i)),d=o.concat(s),e.abrupt("return",{Operations:d,failOnErrors:0,schemas:[N._F.BULK_REQUEST_SCHEMA]});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nn=function(){var e=[],t=[],n=(0,Ne.Z)();return null==ce||ce.map((function(r){var a=Qe({emails:[{primary:!0,value:r}],schemas:["urn:ietf:params:scim:schemas:core:2.0:User","urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"],userName:ht.toLowerCase()!==h.pH.toLowerCase()?"".concat(ht,"/").concat(r):r},N._F.SYSTEMSCHEMA,{askPassword:"true"}),i={bulkId:"bulkId:".concat(r,":").concat(n),data:a,method:y.f2.POST,path:N._F.SCIM_USER_PATH},o={display:r,value:"bulkId:bulkId:".concat(r,":").concat(n)};t.push(o),e.push(i)})),null==Ve||Ve.map((function(r){var a={Operations:[{op:"add",value:{members:t}}]},i={bulkId:"bulkId:".concat(null==r?void 0:r.displayName,":").concat(n),data:a,method:y.f2.PATCH,path:"".concat(N._F.SCIM_GROUP_PATH,"/").concat(null==r?void 0:r.id)};e.push(i)})),{Operations:e,failOnErrors:0,schemas:[N._F.BULK_REQUEST_SCHEMA]}},rn=function(){var e=$e(Be().mark((function e(){var t,n,r;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=nn(),e.prev=1,e.next=4,(0,T.er)(t);case 4:if(n=e.sent,J(!0),200===n.status){e.next=8;break}throw new Error("Failed to import users.");case 8:r=n.data.Operations.map(sn),K(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),z(!0),dt({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:y.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")});case 16:return e.prev=16,Z(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(){return e.apply(this,arguments)}}(),an=function(){var e=$e(Be().mark((function e(){var t,n,r,a,o,s,l;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,Vt();case 4:if(t=e.sent,n=t.map((function(e){return e.attributeName})),Bt(I,n)){e.next=10;break}return z(!0),Z(!1),e.abrupt("return");case 10:return e.next=12,tn(t);case 12:return r=e.sent,$(!0),a=(0,T.er)(r),o=new Promise((function(e,t){setTimeout((function(){return t(new Error(nt))}),Tt||6e4)})),e.next=18,Promise.race([a,o]);case 18:if(200===(s=e.sent).status){e.next=21;break}throw new Error("Failed to import users.");case 21:l=s.data.Operations.map(on),H(l),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),z(!0),e.t0.message===nt?(Ut(!0),ot({description:i("users:notifications.bulkImportUser.timeOut.description"),level:y.QU.WARNING,message:i("users:notifications.bulkImportUser.timeOut.message")})):e.t0.message!==tt&&ot({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:y.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")});case 29:return e.prev=29,W(!1),Z(!1),e.finish(29);case 33:case"end":return e.stop()}}),e,null,[[1,25,29,33]])})));return function(){return e.apply(this,arguments)}}(),on=function(e){var t,n,r=null==e?void 0:e.bulkId.split(":")[1],a=null==e||null===(t=e.status)||void 0===t?void 0:t.code,o=N.tr.USER_CREATION,s=i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),l={};(null==e?void 0:e.method)===y.f2.POST?l={201:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(n=e.response)&&void 0!==n&&n.includes(N._F.USERNAME_REGEX_ERROR_CODE)?i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===y.f2.PATCH&&(o=N.tr.ROLE_ASSIGNMENT,l={200:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:r}),400:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:r}),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:r})});ne((function(t){var n=(null==e?void 0:e.method)===y.f2.PATCH&&200===a?t.successUserAssignment+1:t.successUserAssignment,r=(null==e?void 0:e.method)===y.f2.PATCH&&200!==a?t.failedUserAssignment+1:t.failedUserAssignment,i=(null==e?void 0:e.method)!==y.f2.POST||201!==a&&202!==a?t.successUserCreation:t.successUserCreation+1,o=(null==e?void 0:e.method)===y.f2.POST&&201!==a&&202!==a?t.failedUserCreation+1:t.failedUserCreation;return He(He({},t),{},{failedUserAssignment:r,failedUserCreation:o,successUserAssignment:n,successUserCreation:i})}));var u=N.IC.FAILED;return 201!==a&&202!==a&&200!==a||(u=N.IC.SUCCESS),{message:l[a]||s,operationType:o,resourceIdentifier:r,status:ln(a),statusCode:u}},sn=function(e){var t,n,r=null==e?void 0:e.bulkId.split(":")[1],a=null==e||null===(t=e.status)||void 0===t?void 0:t.code,o=N.tr.USER_CREATION,s=i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),l={};(null==e?void 0:e.method)===y.f2.POST?l={201:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(n=e.response)&&void 0!==n&&n.includes(N._F.USERNAME_REGEX_ERROR_CODE)?i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===y.f2.PATCH&&(o=N.tr.ROLE_ASSIGNMENT,l={200:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:r}),400:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:r}),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:r})});ie((function(t){var n=(null==e?void 0:e.method)===y.f2.PATCH&&200===a?t.successUserAssignment+1:t.successUserAssignment,r=(null==e?void 0:e.method)===y.f2.PATCH&&200!==a?t.failedUserAssignment+1:t.failedUserAssignment,i=(null==e?void 0:e.method)!==y.f2.POST||201!==a&&202!==a?t.successUserCreation:t.successUserCreation+1,o=(null==e?void 0:e.method)===y.f2.POST&&201!==a&&202!==a?t.failedUserCreation+1:t.failedUserCreation;return He(He({},t),{},{failedUserAssignment:r,failedUserCreation:o,successUserAssignment:n,successUserCreation:i})}));var u=N.IC.FAILED;return 201!==a&&202!==a&&200!==a||(u=N.IC.SUCCESS),{message:l[a]||s,operationType:o,resourceIdentifier:r,status:ln(a),statusCode:u}},ln=function(e){return i(201===e||200===e?"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.success":202===e?"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.warning":"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.failed")},un=function(){return w.createElement(_e.Z.Field,{required:!0},w.createElement(ge.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"spacing-bottom","data-componentid":"".concat(a,"-userstore-label")},i("user:forms.addUserForm.inputs.domain.label")),w.createElement(A.Z,{className:"mt-2",fluid:!0,selection:!0,labeled:!0,options:ft,loading:!1,"data-testid":"".concat(a,"-userstore-dropdown"),"data-componentid":"".concat(a,"-userstore-dropdown"),name:"userstore",disabled:!1,readOnly:!1,value:ht,onChange:function(e,t){Et(t.value.toString())},tabIndex:1,maxLength:60}))},cn=function(){return u.m.push(s.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",be.Q.SCIM))};return w.createElement(Se.wv,{"data-testid":a,"data-componentid":a,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},w.createElement(Se.wv.MainPanel,null,w.createElement(Se.wv.Header,{className:"wizard-header"},i("user:modals.bulkImportUserWizard.title"),w.createElement(S.X6,{as:"h6"},i("user:modals.bulkImportUserWizard.subTitle"),w.createElement(S.eb,{link:Ot("manage.users.bulkUsers.learnMore")},i("common:learnMore")))),w.createElement(Se.wv.Content,{className:"content-container"},w.createElement(ke.Z,null,w.createElement(w.Fragment,null,w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,null,w.createElement(S.v0,{icon:"mail",content:i("user:modals.bulkImportUserWizard.wizardSummary.inviteEmailInfo"),hideDefaultIcon:!0})))),w.createElement(ke.Z.Row,null,w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},w.createElement(Le.Z.Group,{size:"large",labeled:!0,basic:!0},Object.values(P.Wv).map((function(e,t){return w.createElement(w.Fragment,null,w.createElement(S.GI,{trigger:w.createElement("div",{className:"inline-button"},w.createElement(Le.Z,{disabled:At&&e===P.Wv.MANUAL&&(null===m.x8||void 0===m.x8?void 0:m.x8.enableUsernameValidation),"data-componentid":"".concat(a,"-").concat(e,"-tab-option"),key:t,active:se===e,className:"multiple-users-config-mode-wizard-tab",content:Pe.QH.resolveMultipleInvitesDisplayName(e),onClick:function(t){t.preventDefault(),le(e)}})),content:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.disabledHint"),size:"mini",wide:!0,disabled:e===P.Wv.META_FILE||!At||!(null!==m.x8&&void 0!==m.x8&&m.x8.enableUsernameValidation),"data-componentid":"".concat(a,"-disabled-hint")}))}))))),se==P.Wv.MANUAL?w.createElement(w.Fragment,null,ct&&w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},mt)),q?w.createElement(w.Fragment,null,ct&&w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},mt)),w.createElement(De,{isLoading:M,"data-componentid":"".concat(a,"-manual-response-list"),hasError:_,responseList:G,bulkResponseSummary:ae,successAlert:w.createElement(pe.Z,{severity:"success","data-componentid":"".concat(a,"-success-alert")},w.createElement(me.Z,{"data-componentid":"".concat(a,"-success-alert-title")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.message")),i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.description"))})):w.createElement(w.Fragment,null,!(null!==m.x8&&void 0!==m.x8&&m.x8.enableBulkImportSecondaryUserStore)&&w.createElement(ke.Z.Row,{columns:1,className:"mb-0 pb-0"},w.createElement(ke.Z.Column,{mobile:16},w.createElement(pe.Z,{severity:"info"},w.createElement(C.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.userstoreMessage",tOptions:{userstore:Te(n)}},"The created users will be added to the ",w.createElement("b",null,Te(n))," user store.")))),!jt()&&w.createElement(ke.Z.Row,{columns:1,className:"mb-0 pb-0"},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},un())),w.createElement(de.Z,{size:"small",limitTags:m.x8.bulkUserImportLimit.inviteEmails,fullWidth:!0,multiple:!0,id:"tags-filled",options:Nt.map((function(e){return e})),defaultValue:[],freeSolo:!0,renderTags:function(e,t){return e.map((function(e,n){return w.createElement(r.Z,Fe({key:n,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:n})))}))},renderInput:function(e){return w.createElement(w.Fragment,null,w.createElement(ge.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(a,"-emails-label")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsLabel")),w.createElement(he.Z,Fe({id:"tags-filled",margin:"normal",error:ze,helperText:ze&&Ze,InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsPlaceholder"),"data-componentid":"".concat(a,"-email-input")})))},onChange:function(e,t){var n;Oe(t),n=t,Ce.I.email(n[n.length-1])||(xe(!0),je(i("users:guestUsers.fields.username.validations.regExViolation")),n.pop())},onInputChange:function(){xe(!1)}}),w.createElement(S.kW,null,i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),w.createElement(de.Z,{size:"small",multiple:!0,fullWidth:!0,disablePortal:!0,id:"combo-box-demo",options:null!==(Wt=null==zt?void 0:zt.Resources)&&void 0!==Wt?Wt:[],getOptionLabel:function(e){return null==e?void 0:e.displayName},renderOption:function(e,t){return w.createElement(fe.Z,Fe({component:"li"},e),w.createElement(Ee.Z,{sx:{fontWeight:500}},null==t?void 0:t.displayName))},renderInput:function(e){return w.createElement(w.Fragment,null,w.createElement(ge.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(a,"-roles-label")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsLabel")),w.createElement(he.Z,Fe({id:"tags-filled",margin:"normal",InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsPlaceholder"),"data-componentid":"".concat(a,"-roles-input")})))},onChange:function(e,t){Xe(t)},renderTags:function(e,t){return e.map((function(e,n){return w.createElement(r.Z,Fe({key:n,size:"small",className:"oxygen-chip-beta",label:w.createElement("label",null,null==e?void 0:e.displayName)},t({index:n})))}))}}))):se===P.Wv.META_FILE?X?w.createElement(w.Fragment,null,Je&&w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},lt)),!wt&&w.createElement(De,{isLoading:M,"data-componentid":"".concat(a,"-response-list"),hasError:_,responseList:V,bulkResponseSummary:te})):w.createElement(w.Fragment,null,Je&&w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},lt)),!(null!==m.x8&&void 0!==m.x8&&m.x8.enableBulkImportSecondaryUserStore)&&w.createElement(ke.Z.Row,{columns:1,className:"mb-0 pb-0"},w.createElement(ke.Z.Column,{mobile:16},w.createElement(pe.Z,{severity:"info"},w.createElement(C.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.userstoreMessage",tOptions:{userstore:Te(n)}},"The created users will be added to the ",w.createElement("b",null,Te(n))," user store.")))),!D&&!jt()&&w.createElement(ke.Z.Row,{columns:1,className:"mb-0 pb-0"},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},un())),w.createElement(ke.Z.Row,{columns:1,className:"pt-0"},w.createElement(ke.Z.Column,{mobile:16},w.createElement(S.GB,{key:1,fileStrategy:Lt,file:p,onChange:function(e){f(e.file),k(e.serialized),ot(null),z(!1)},uploadButtonText:"Upload CSV File",dropzoneText:"Drag and drop a CSV file here.","data-testid":"".concat(a,"-form-wizard-csv-file-picker"),"data-componentid":"".concat(a,"-form-wizard-csv-file-picker"),icon:(0,o._5)().uploadPlaceholder,placeholderIcon:w.createElement(R.Z,{name:"file code",size:"huge"}),normalizeStateOnRemoveOperations:!0,emptyFileError:!1,hidePasteOption:!0}))),w.createElement(S.kW,null,i("user:modals.bulkImportUserWizard.wizardSummary.fileBased.hint"))):void 0)),w.createElement(Se.wv.Actions,null,w.createElement(ke.Z,null,se==P.Wv.MANUAL?w.createElement(ke.Z.Row,{column:1},w.createElement(ke.Z.Column,{mobile:8,tablet:8,computer:8},w.createElement(S.Qj,{"data-testid":"".concat(a,"-close-button"),"data-componentid":"".concat(a,"-close-button"),floated:"left",onClick:function(){t(),J(!1)},disabled:M},i("common:close"))),!q||M?w.createElement(ke.Z.Column,{mobile:8,tablet:8,computer:8},w.createElement(S.KM,{"data-testid":"".concat(a,"-invite-button"),"data-componentid":"".concat(a,"-invite-button"),floated:"right",onClick:rn,loading:M,disabled:D||M||_||!ce||0===(null==ce?void 0:ce.length)},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.primaryButton"))):null):w.createElement(ke.Z.Row,{column:1},w.createElement(ke.Z.Column,{mobile:8,tablet:8,computer:8},w.createElement(S.Qj,{"data-testid":"".concat(a,"-cancel-button"),"data-componentid":"".concat(a,"-cancel-button"),floated:"left",onClick:function(){t(),$(!1)},disabled:M},i("common:close"))),!X||M?w.createElement(ke.Z.Column,{mobile:8,tablet:8,computer:8},w.createElement(S.KM,{"data-testid":"".concat(a,"-finish-button"),"data-componentid":"".concat(a,"-finish-button"),floated:"right",onClick:an,loading:M,disabled:D||M||_||!p},i("user:modals.bulkImportUserWizard.buttons.import"))):null)))),w.createElement(Se.wv.SidePanel,null,w.createElement(Se.wv.Header,{className:"wizard-header help-panel-header muted"},w.createElement("div",{className:"help-panel-header-text"},i("applications:wizards.minimalAppCreationWizard.help.heading"))),w.createElement(Se.wv.Content,null,w.createElement(w.Suspense,{fallback:w.createElement(S.pO,null)},w.createElement(S.X6,{as:"h5"},i("user:modals.bulkImportUserWizard.sidePanel.manual")),w.createElement("p",null,i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),w.createElement(ve.Z,null),w.createElement(S.X6,{as:"h5"},i("user:modals.bulkImportUserWizard.sidePanel.fileBased")),w.createElement("p",null,i("user:modals.bulkImportUserWizard.wizardSummary.fileBased.hint")),w.createElement(S.X6,{as:"h6"},i("user:modals.bulkImportUserWizard.sidePanel.fileFormatTitle")),w.createElement("p",null,l()?w.createElement(C.c,{i18nKey:"user:modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to",w.createElement("b",null,"local attribute")," names."):w.createElement(C.c,{i18nKey:"user:modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to local ",w.createElement(S.rU,{onClick:cn},"attribute names"),".")),w.createElement("p",null," ",i("user:modals.bulkImportUserWizard.sidePanel.fileFormatSampleHeading")),w.createElement("p",null,At?w.createElement("code",null,"username,givenname,emailaddress,groups",w.createElement("br",null),"user1,john,john@test.com,group1|group2",w.createElement("br",null),"user2,jake,jake@test.com,group2",w.createElement("br",null),"user3,jane,jane@test.com,group1",w.createElement("br",null)):w.createElement("code",null,"username,givenname,groups",w.createElement("br",null),"user1,john,group1|group2",w.createElement("br",null),"user2,jake,group2",w.createElement("br",null),"user3,jane,group1",w.createElement("br",null)))))))},st={failedUserAssignment:0,failedUserCreation:0,successUserAssignment:0,successUserCreation:0},lt=n(47018),ut=n(30382),ct=n(22557),dt=n.n(ct),mt=n(50699),pt=n(51835),ft=n.n(pt),vt=n(27975),gt=n.n(vt),ht=n(55900),Et=n.n(ht),yt=n(21555),bt=n.n(yt),St=n(3621),It=n.n(St),wt=n(5062),Ut=n.n(wt),Ct=n(88404),Ot={};Ot.styleTagTransform=Ut(),Ot.setAttributes=bt(),Ot.insert=Et().bind(null,"head"),Ot.domAPI=gt(),Ot.insertStyleElement=It();ft()(Ct.Z,Ot);Ct.Z&&Ct.Z.locals&&Ct.Z.locals;function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rt.apply(null,arguments)}var At=function(e){var t=e.onSubmit,n=e["data-componentid"],a=(0,U.$)().t,i=(0,Ie.Ug)(null===F.w||void 0===F.w?void 0:F.w.primaryUserstoreName,"members",null,!0).data,o=(0,w.useMemo)((function(){var e;return(0,mt.Z)(null==i?void 0:i.Resources)?[]:null==i||null===(e=i.Resources)||void 0===e?void 0:e.map((function(e){return{group:e,key:e.id,label:e.displayName}}))}),[i]);return w.createElement(ut.vy,{initialValues:null,keepDirtyOnReinitialize:!0,"data-componentid":"".concat(n,"-external-form"),onSubmit:t,validate:function(e){var t={groups:void 0,username:void 0};return e.username||(t.username=a("parentOrgInvitations:addUserWizard.username.validations.required")),t},render:function(e){var t=e.handleSubmit;return w.createElement("form",{id:N._F.INVITE_PARENT_ORG_USER_FORM_ID,onSubmit:t,className:"invite-parent-org-user-form"},w.createElement(S.v0,{type:"info",className:"add-user-info",content:a("parentOrgInvitations:addUserWizard.hint")}),w.createElement(ut.SE,{fullWidth:!0,ariaLabel:"Usernames field","data-componentid":"".concat(n,"-external-form-username-input"),label:a("parentOrgInvitations:addUserWizard.username.label"),name:"username",placeholder:a("parentOrgInvitations:addUserWizard.username.placeholder"),required:!0,helperText:w.createElement(S.kW,null,w.createElement(Ee.Z,{variant:"inherit"},a("parentOrgInvitations:addUserWizard.username.hint"))),component:ut.KQ,options:[],renderTags:function(e,t){return e.map((function(e,n){return w.createElement(r.Z,Rt({key:n,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:n})))}))},filterOptions:function(e,t){var n=t.inputValue;return""!==n?["".concat(n)]:[]},renderOption:function(e,t){return w.createElement("li",Rt({},e,{className:dt()("press-enter-prompt",e.className)}),t,w.createElement("p",null,w.createElement(C.c,{i18nKey:"common:pressEnterPrompt"},"Press ",w.createElement("kbd",null,"Enter")," to select")))},multipleValues:!0,freeSolo:!0}),w.createElement(ut.SE,{fullWidth:!0,multipleValues:!0,ariaLabel:"Groups field","data-componentid":"".concat(n,"-form-groups-field"),name:"groups",label:a("parentOrgInvitations:addUserWizard.groups.label"),helperText:w.createElement(S.kW,null,w.createElement(Ee.Z,{variant:"inherit"},a("parentOrgInvitations:addUserWizard.groups.hint"))),placeholder:a("parentOrgInvitations:addUserWizard.groups.placeholder"),component:ut.KQ,options:o,renderTags:function(e,t){return e.map((function(e,n){return w.createElement(r.Z,Rt({key:n,size:"medium",label:e.label},t({index:n})))}))}}))}})};At.defaultProps={"data-componentid":"invite-parent-org-user"};var Tt=n(69005);function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=kt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e){return function(e){if(Array.isArray(e))return Mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||xt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){if(e){if("string"==typeof e)return Mt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mt(e,t):void 0}}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Zt=function(e){var t=e.response,n=e.isLoading,r=e.hasError,a=e["data-componentid"],i=(0,U.$)().t,s=zt((0,w.useState)([]),2),u=s[0],c=s[1],d=zt((0,w.useState)({failedCount:0,successCount:0,totalCount:0}),2),m=d[0],p=d[1];(0,w.useEffect)((function(){t&&(null==t?void 0:t.length)>0&&t.map((function(e){var t=i("invite:notifications.sendInvite.success.message");if(e.result.errorCode)switch(e.result.errorCode){case Tt.jI.ERROR_CODE_USER_NOT_FOUND:t=i("user:modals.inviteParentUserWizard.tableMessages.userNotFound");break;case Tt.jI.ERROR_CODE_ACTIVE_INVITATION_EXISTS:t=i("user:modals.inviteParentUserWizard.tableMessages.activeInvitationExists");break;case Tt.jI.ERROR_CODE_INVITED_USER_EMAIL_NOT_FOUND:t=i("user:modals.inviteParentUserWizard.tableMessages.userEmailNotFound");break;case Tt.jI.ERROR_CODE_USER_ALREADY_EXISTS_INVITED_ORGANIZATION:t=i("user:modals.inviteParentUserWizard.tableMessages.userAlreadyExist")}c((function(n){return[].concat(Pt(n),[{message:t,status:e.result.status,username:e.username}])})),e.result.status===Tt.YV.SUCCESS?p((function(e){return _t(_t({},e),{},{successCount:e.successCount+1,totalCount:e.totalCount+1})})):p((function(e){return _t(_t({},e),{},{failedCount:e.failedCount+1,totalCount:e.totalCount+1})}))}))}),[t]);return w.createElement(ke.Z,null,w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},n||r?null:0===(null==m?void 0:m.failedCount)?w.createElement(pe.Z,{severity:"success","data-componentid":"".concat(a,"-success-alert")},w.createElement(ze.Z,{"data-componentid":"".concat(a,"-success-alert-title")},i("user:modals.inviteParentUserWizard.successAlert.message")),i("user:modals.inviteParentUserWizard.successAlert.description")):w.createElement(pe.Z,{severity:"error","data-componentid":"".concat(a,"-error-alert")},w.createElement(ze.Z,{"data-componentid":"".concat(a,"-error-alert-title")},i("user:modals.inviteParentUserWizard.errorAlert.message")),w.createElement(C.c,{i18nKey:"user:modals.inviteParentUserWizard.errorAlert.description",tOptions:{failedCount:null==m?void 0:m.failedCount}},"An error occurred while inviting ",null==m?void 0:m.failedCount," user(s)..")))),w.createElement(ke.Z.Row,{columns:1},w.createElement(ke.Z.Column,{mobile:16,tablet:16,computer:16},w.createElement(Ee.Z,{variant:"body2",style:{textAlign:"right"}},i("user:modals.inviteParentUserWizard.totalInvitations")+" : "+(null==m?void 0:m.totalCount)),w.createElement(S.wQ,{className:"addon-field-wrapper",isLoading:n,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return w.createElement(L.Z,{as:"h6","data-componentid":"".concat(a,"-username-item-heading")},w.createElement(L.Z.Content,null,e.username))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return w.createElement(L.Z,{as:"h6","data-componentid":"".concat(a,"-status-item-heading")},w.createElement(L.Z.Content,null,w.createElement(Q.Z,{"data-componentid":"".concat(a,"-bulk-label"),content:e.status,size:"small",color:e.status===Tt.YV.SUCCESS?"green":"red",className:"group-label"})))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return w.createElement(L.Z,{as:"h6","data-componentid":"".concat(a,"-status-item-heading")},w.createElement(L.Z.Content,null,e.message))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:u,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:w.createElement(S.$J,{"data-testid":"".concat(a,"-empty-search-result"),"data-componentid":"".concat(a,"-empty-search-result"),image:(0,o.jF)().emptySearch,imageSize:"tiny",title:i("users:usersList.search.emptyResultPlaceholder.title"),subtitle:""}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(a,"-data-table"),"data-componentid":"".concat(a,"-data-table"),loadingStateOptions:{count:l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}}))))};function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Zt.defaultProps={"data-componentid":"parent-invite-response-list",hasError:!1,isLoading:!1,response:[]};var Wt=function(e){var t=e.closeWizard,n=e.onUserInviteSuccess,r=e["data-componentid"],a=(0,U.$)().t,i=jt((0,w.useState)(!1),2),o=i[0],s=i[1],l=jt((0,w.useState)(!1),2),u=l[0],c=l[1],d=jt((0,S.IK)(),3),m=d[0],p=d[1],f=d[2],v=jt((0,w.useState)([]),2),g=v[0],h=v[1];return w.createElement(lt.Z,{"data-componentid":r,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},w.createElement(lt.Z.Header,{className:"wizard-header"},a("parentOrgInvitations:addUserWizard.heading"),w.createElement(S.X6,{as:"h6"},a("parentOrgInvitations:addUserWizard.description"))),w.createElement(lt.Z.Content,{className:"content-container",scrolling:!0},m&&f,(null==g?void 0:g.length)>0?w.createElement(Zt,{response:g,isLoading:o}):w.createElement(At,{onSubmit:function(e){var t,r={groups:null==e||null===(t=e.groups)||void 0===t?void 0:t.map((function(e){return e.group.id})),usernames:null==e?void 0:e.username};p(null),s(!0),(0,z.O)(r).then((function(e){var t=null==e?void 0:e.data;h(t),n()})).catch((function(e){!function(e){var t,n,r,i;if(null!=e&&e.response&&401!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status))if(403===(null==e||null===(n=e.response)||void 0===n?void 0:n.status)&&(null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.code)===N._F.ERROR_COLLABORATOR_USER_LIMIT_REACHED)p({description:a("extensions:manage.invite.notifications.sendInvite.limitReachError.description"),level:y.QU.ERROR,message:a("extensions:manage.invite.notifications.sendInvite.limitReachError.message")});else if(null!=e&&null!==(i=e.response)&&void 0!==i&&null!==(i=i.data)&&void 0!==i&&i.description){var o;p({description:a("invite:notifications.sendInvite.error.description",{description:null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description}),level:y.QU.ERROR,message:a("invite:notifications.sendInvite.error.message")})}else p({description:a("invite:notifications.sendInvite.genericError.description"),level:y.QU.ERROR,message:a("invite:notifications.sendInvite.genericError.message")});else p({description:a("invite:notifications.sendInvite.error.description"),level:y.QU.ERROR,message:a("invite:notifications.sendInvite.error.message")})}(e)})).finally((function(){c(!0),s(!1)}))},"data-componentid":"".concat(r,"-form")})),w.createElement(lt.Z.Actions,null,w.createElement(ke.Z,null,w.createElement(ke.Z.Row,{column:2},w.createElement(ke.Z.Column,{mobile:8},w.createElement(S.Qj,{"data-componentid":"".concat(r,"-cancel-button"),floated:"left",onClick:function(){t()}},a(u?"common:close":"common:cancel"))),!g||(null==g?void 0:g.length)<1&&w.createElement(ke.Z.Column,{mobile:8,tablet:8,computer:8},w.createElement(S.KM,{"data-componentid":"".concat(r,"-finish-button"),floated:"right",onClick:function(){document.getElementById(N._F.INVITE_PARENT_ORG_USER_FORM_ID).dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))},loading:o,disabled:o},a("extensions:manage.features.user.addUser.invite")))))))},Ft=n(15311),Vt={};Vt.styleTagTransform=Ut(),Vt.setAttributes=bt(),Vt.insert=Et().bind(null,"head"),Vt.domAPI=gt(),Vt.insertStyleElement=It();ft()(Ft.Z,Vt);Ft.Z&&Ft.Z.locals&&Ft.Z.locals;function Ht(){return Ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ht.apply(null,arguments)}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Kt=function(e){var t,n,L,_,z=e["data-testid"],x=e["data-componentid"],M=(0,U.$)().t,Z=(0,S.fQ)().getLink,D=(0,O.I0)(),W=null===(t=window.AppUtils)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.showStatusLabelForNewAuthzRuntimeFeatures,F=(0,a.Ac)(p.Z.SAAS_FEATURES_IDENTIFIER),V=(0,v.z)().isSubOrganization,H=(0,E.Z)(),Q=H.isLoading,G=H.isUserStoreReadOnly,K=H.mutateUserStoreList,B=H.readOnlyUserStoreNamesList,X=H.userStoresList,$=(0,O.v9)((function(e){return e.config.ui.features})),Y=(0,a.EV)(null==$||null===(n=$.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.create),q=(0,a.EV)(null==$||null===(L=$.bulkUserImport)||void 0===L||null===(L=L.scopes)||void 0===L?void 0:L.create),J=(0,a.EV)(null==$||null===(_=$.guestUser)||void 0===_||null===(_=_.scopes)||void 0===_?void 0:_.create),ee=Qt((0,w.useState)(""),2),ne=ee[0],re=ee[1],ae=Qt((0,w.useState)(1),2),ie=ae[0],oe=ae[1],se=Qt((0,w.useState)(0),2),le=se[0],de=se[1],me=Qt((0,w.useState)(l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),pe=me[0],fe=me[1],ve=Qt((0,w.useState)(!1),2),ge=ve[0],he=ve[1],Ee=Qt((0,w.useState)(!1),2),ye=Ee[0],be=Ee[1],Se=Qt((0,w.useState)(!1),2),Ie=Se[0],we=Se[1],Ue=Qt((0,w.useState)(void 0),2),Ce=Ue[0],Oe=Ue[1],Re=Qt((0,w.useState)(void 0),2),Ae=Re[0],Te=Re[1],ke=Qt((0,w.useState)(void 0),2),Le=ke[0],_e=ke[1],Ne=Qt((0,w.useState)(N.sk.USER),1)[0],Pe=Qt((0,w.useState)(),2),ze=Pe[0],xe=Pe[1],Me=Qt((0,w.useState)(d.wO.primaryUserstoreName),2),Ze=Me[0],je=Me[1],De=Qt((0,w.useState)(P.XC.PENDING),2),We=De[0],Fe=De[1],Ve=Qt((0,w.useState)(!1),1)[0],He=Qt((0,w.useState)(!1),2),Qe=He[0],Ge=He[1],Ke=Qt((0,w.useState)([]),2),Be=Ke[0],Xe=Ke[1],$e=Qt((0,w.useState)([]),2),Ye=$e[0],qe=$e[1],Je=Qt((0,w.useState)(!1),2),et=Je[0],tt=Je[1],nt=Qt((0,w.useState)(!1),2),rt=nt[0],at=nt[1],it=Qt((0,w.useState)(!1),2),st=it[0],lt=it[1],ut=Qt((0,w.useState)(l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),ct=ut[0],dt=ut[1],mt=Qt((0,w.useState)(1),2),pt=mt[0],ft=mt[1],vt=(0,O.v9)((function(e){var t;return null==e||null===(t=e.profile)||void 0===t?void 0:t.profileSchemas})),gt=c.l.getInstance(),ht=[{key:2,text:M("parentOrgInvitations:searchdropdown.pendingLabel"),value:"Pending"},{key:3,text:M("parentOrgInvitations:searchdropdown.expiredLabel"),value:"Expired"}],Et=pe+1,yt=N._F.GROUPS_AND_ROLES_ATTRIBUTE,bt=(0,k.M)(V()),St=bt.data,It=bt.isLoading,wt=bt.mutate,Ut=(0,g.yA)(F===a.iK.ENABLED&&!V()).data,Ct=(0,T.WW)(Et,ie,""===ne?null:ne,null,Ze,yt),Ot=Ct.data,Rt=Ct.isLoading,At=Ct.error,Tt=Ct.mutate,kt=(0,w.useMemo)((function(){return null==Ut?void 0:Ut.realmConfig}),[Ut]),Lt=(0,w.useMemo)((function(){var e=[{key:-1,text:d.wO.primaryUserstoreName,value:d.wO.primaryUserstoreName}];return(null==X?void 0:X.length)>0&&X.map((function(t,n){if(t.name.toUpperCase()!==d.wO.primaryUserstoreName&&t.enabled){var r={disabled:t.typeName===h.uD.RemoteUserStoreManager,key:n,text:t.name,value:t.name};e.push(r)}})),e}),[X]),_t=(0,w.useMemo)((function(){return G(Ze)}),[Ze,B]);(0,w.useEffect)((function(){K()}),[]),(0,w.useEffect)((function(){At&&(At.response&&At.response.data&&At.response.data.description?D((0,b.V_)({description:At.response.data.description,level:y.QU.ERROR,message:M("console:manage.features.users.notifications.fetchUsers.error.message")})):D((0,b.V_)({description:M("console:manage.features.users.notifications.fetchUsers.genericError.description"),level:y.QU.ERROR,message:M("console:manage.features.users.notifications.fetchUsers.genericError.message")})))}),[At]),(0,w.useEffect)((function(){if(V())if(ft(1),"userName co "!==ne&&""!==ne&&null!==ne){if(ne){var e=null==St?void 0:St.invitations;if(ne.includes("userName sw ")){var t,n=ne.split("sw ")[1];e=null===(t=e)||void 0===t?void 0:t.filter((function(e){return null==e?void 0:e.username.startsWith(n)}))}else if(ne.includes("userName ew ")){var r,a=ne.split("ew ")[1];e=null===(r=e)||void 0===r?void 0:r.filter((function(e){return null==e?void 0:e.username.endsWith(a)}))}else if(ne.includes("userName eq ")){var i,o=ne.split("eq ")[1];e=null===(i=e)||void 0===i?void 0:i.filter((function(e){return(null==e?void 0:e.username)===o}))}else if(ne.includes("userName co ")){var s,l=ne.split("co ")[1];e=null===(s=e)||void 0===s?void 0:s.filter((function(e){return null==e?void 0:e.username.includes(l)}))}qe(e)}}else qe(null==St?void 0:St.invitations)}),[ne]),(0,w.useEffect)((function(){tt(ye&&!rt&&!Ce)}),[ye,rt]),(0,w.useEffect)((function(){var e;qe(null==St||null===(e=St.invitations)||void 0===e?void 0:e.filter((function(e){return e.status===P.XC.PENDING.toUpperCase()})))}),[null==St?void 0:St.invitations]),(0,w.useEffect)((function(){var e;if(We!==P.XC.ACCEPTED){var t=null==Ye?void 0:Ye.filter((function(e){return e.status===We.toUpperCase()}));if((null===(e=t)||void 0===e?void 0:e.length)>ct){var n=pt-1;t=t.slice(n,n+ct),Xe(t),_e(t.length===ct)}else Xe(t),_e(!1)}}),[Ye,pt,ct,Qe,We]);var Nt,Pt,zt,xt,Mt=function(e){var t;if(e){var n=(0,I.Z)(e);return n.Resources=null==n||null===(t=n.Resources)||void 0===t?void 0:t.map((function(e){if((e.userName.split("/").length>1?e.userName.split("/")[0]:d.wO.primaryUserstoreName)!==d.wO.primaryUserstoreName){var t=null;if((null==e?void 0:e.emails)instanceof Array){var n=null==e?void 0:e.emails[0];t="string"==typeof n?n:null==n?void 0:n.value}return e.emails=[t],e}return e})),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e;return r.itemsPerPage===t?(r.Resources.splice(-1,n),Te(!0)):Te(!1),r}(n,Et,1)}},Zt=(0,w.useMemo)((function(){return Mt(Ot)}),[Ot]),jt=(0,w.useMemo)((function(){return(0,te.I_)(vt)}),[vt]),Dt=function(){we(!Ie),re("")},Ft=function(e){re(e),oe(1),ft(1)},Vt=function(e,t){oe((t.activePage-1)*pe+1)},Gt=function(e,t){fe(t.value)},Kt=function(e,t){ft((t.activePage-1)*ct+1)},Bt=function(e,t){dt(t.value)},Xt=function(e,t){"all"===t.value?je(null):je(t.value),oe(1),fe(l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT)},$t=function(){Tt()},Yt=function(){at(!0),(0,g.Qy)(g.vH.USER_ONBOARDING_CONNECTOR_ID).then((function(e){var t=(null==e?void 0:e.connectors).find((function(e){return e.id===g.vH.USER_EMAIL_VERIFICATION_CONNECTOR_ID})).properties.find((function(e){return e.name===g.vH.EMAIL_VERIFICATION_ENABLED}));Oe("true"===t.value)})).catch((function(e){var t,n,r,a,i;i={description:null!==(t=null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:M("governanceConnectors:notifications.getConnector.genericError.description"),level:y.QU.ERROR,message:null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)&&void 0!==r?r:M("governanceConnectors:notifications.getConnector.genericError.message")},D((0,b.V_)(i))})).finally((function(){return at(!1)}))},qt=w.createElement(S.KM,{"data-componentid":"".concat(z,"-add-user-button"),"data-testid":"".concat(z,"-add-user-button")},w.createElement(R.Z,{name:"add"}),M("extensions:manage.users.buttons.addUserBtn"),w.createElement(R.Z,{name:"dropdown",className:"ml-3 mr-0"})),Jt=function(e){return w.createElement(i.n,{onFilter:Ft,filterAttributeOptions:(t=e,n=[{key:0,text:M("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"}],t&&(n=n.concat(jt)),n),filterAttributePlaceholder:M("users:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:M("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:M("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:M("users:advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:Ie,disableSearchAndFilterOptions:(null==Zt?void 0:Zt.totalResults)<=0&&!ne});var t,n},en=function(){return w.createElement(S.PS,{className:"sub-org-users-list",advancedSearch:Jt(!0),currentListSize:null==Zt?void 0:Zt.itemsPerPage,listItemLimit:pe,onItemsPerPageDropdownChange:Gt,"data-testid":"user-mgt-user-list-layout",onPageChange:Vt,rightActionPanel:w.createElement(A.Z,{"data-testid":"user-mgt-user-list-userstore-dropdown",selection:!0,options:Lt,onChange:Xt,defaultValue:d.wO.primaryUserstoreName,loading:Q,readonly:Lt.length<=1}),showPagination:!0,totalPages:rn(),totalListSize:null==Zt?void 0:Zt.totalResults,paginationOptions:{disableNextButton:!Ae,showItemsPerPageDropdown:!(null!==m.x8&&void 0!==m.x8&&m.x8.hiddenItemsPerPageRemoteUserStoreDropdown)||Ze===d.wO.primaryUserstoreName},isLoading:Rt},Q||0!==(null==Lt?void 0:Lt.length)?w.createElement(ue,{advancedSearch:Jt(!0),usersList:Zt,onUserDelete:$t,userMetaListContent:null,realmConfigs:kt,onEmptyListPlaceholderActionClick:function(){return he(!0)},onSearchQueryClear:Dt,searchQuery:ne,"data-testid":"user-mgt-user-list",featureConfig:$,isReadOnlyUserStore:_t}):w.createElement(S.$J,{subtitle:[M("users:placeholders.userstoreError.subtitles.0"),M("users:placeholders.userstoreError.subtitles.1")],title:M("users:placeholders.userstoreError.title"),image:(0,o.jF)().genericError,imageSize:"tiny"}))},tn=function(){var e;return w.createElement(S.PS,{className:"sub-org-users-list",advancedSearch:Jt(!1),currentListSize:(null==St||null===(e=St.invitations)||void 0===e?void 0:e.length)||null,listItemLimit:ct,onItemsPerPageDropdownChange:Bt,"data-componentid":"".concat(x,"-user-mgt-user-list-layout"),"data-testid":"".concat(z,"-user-mgt-user-list-layout"),onPageChange:Kt,showPagination:!0,totalPages:rn(),totalListSize:null==Be?void 0:Be.length,isLoading:Rt||It,paginationOptions:{disableNextButton:!Le,showItemsPerPageDropdown:Ze===d.wO.primaryUserstoreName},showPaginationPageLimit:!Ve,leftActionPanel:w.createElement(A.Z,{"data-componentid":"".concat(x,"-list-userstore-dropdown"),selection:!0,options:ht,onChange:nn,text:M("parentOrgInvitations:filterLabel")+We,disabled:It})},Q||0!==(null==Lt?void 0:Lt.length)?w.createElement(j,{invitationStatusOption:null,onEmptyListPlaceholderActionClick:function(){return he(!0)},onboardedGuestUserList:Zt,onSearchQueryClear:Dt,guestUsersList:Be,getGuestUsersList:function(){return wt()},searchQuery:ne,userTypeSelection:N.rb.EXTERNAL,"data-testid":z}):w.createElement(S.$J,{subtitle:[M("users:placeholders.userstoreError.subtitles.0"),M("users:placeholders.userstoreError.subtitles.1")],title:M("users:placeholders.userstoreError.title"),image:(0,o.jF)().genericError,imageSize:"tiny"}))},nn=function(e,t){Fe(t.value),Ge(!0)},rn=function(){return Ze===d.wO.primaryUserstoreName?Math.ceil((null==Zt?void 0:Zt.totalResults)/pe):100};return w.createElement(S.Xg,{action:Y&&!Rt&&(!V()||!It)&&!_t&&w.createElement(A.Z,{"data-componentid":"".concat(x,"-add-user-dropdown"),direction:"left",floating:!0,icon:null,trigger:qt},w.createElement(A.Z.Menu,null,(xt=[],Y&&xt.push({"data-componentid":"".concat(x,"-add-user-dropdown-item"),key:1,text:M("users:addUserDropDown.addNewUser"),value:N.rb.EXTERNAL}),q&&xt.push({"data-componentid":"".concat(z,"-bulk-import-users-dropdown-item"),"data-testid":"".concat(z,"-bulk-import-users-dropdown-item"),key:2,text:M("users:addUserDropDown.bulkImport"),value:N.Bv.BULK_IMPORT}),V()&&null!=$&&null!==(zt=$.parentUserInvitation)&&void 0!==zt&&zt.enabled&&J&&xt.push({className:"users-invite-parent-user","data-componentid":"".concat(x,"-invite-parent-user"),key:3,text:w.createElement(w.Fragment,null,M("parentOrgInvitations:addUserWizard.heading"),W&&w.createElement(r.Z,{size:"small",label:M(f.j.NEW),className:"oxygen-chip-new"})),value:N.rb.INTERNAL}),xt).map((function(e){return w.createElement(A.Z.Item,Ht({key:e.value,onClick:function(){return function(e){switch(Yt(),e){case N.rb.EXTERNAL:gt.publish("manage-users-click-create-new",{type:"user"}),he(!0),xe(N.rb.EXTERNAL);break;case N.Bv.BULK_IMPORT:be(!0);break;case N.rb.INTERNAL:gt.publish("manage-users-click-invite-new",{type:"user"}),lt(!0)}}(e.value)}},e))})))),title:M("pages:users.title"),pageTitle:M("pages:users.title"),description:w.createElement(w.Fragment,null,M("extensions:manage.users.usersSubTitle"),w.createElement(S.eb,{link:Z("manage.users.learnMore")},M("common:learnMore"))),"data-testid":"".concat(z,"-page-layout")},V()?w.createElement(S.M$,{activeIndex:le,"data-testid":"".concat(z,"-administrator-tabs"),defaultActiveIndex:0,onTabChange:function(e,t){de(t.activeIndex),Dt(),0===t.activeIndex?xe(N.rb.INTERNAL):1===t.activeIndex&&xe(N.rb.EXTERNAL)},panes:(Pt=[],Pt.push({componentId:"users",menuItem:M("parentOrgInvitations:tab.usersTab"),render:en}),null!=$&&null!==(Nt=$.parentUserInvitation)&&void 0!==Nt&&Nt.enabled&&Pt.push({componentId:"invitations",menuItem:M("parentOrgInvitations:tab.invitationsTab"),render:tn}),Pt)}):en(),ge&&w.createElement(ce.G,{"data-componentid":"user-mgt-add-user-wizard-modal","data-testid":"user-mgt-add-user-wizard-modal",isSubOrg:V(),closeWizard:function(){he(!1),Oe(void 0)},emailVerificationEnabled:Ce,onSuccessfulUserAddition:function(e){wt(),Tt(),gt.publish("manage-users-finish-creating-user"),u.m.push(s.$.getPaths().get("USER_EDIT").replace(":id",e))},defaultUserTypeSelection:Ne,userTypeSelection:ze,listOffset:ie,listItemLimit:pe,updateList:function(){return Tt()},userStore:null!=Ze?Ze:d.wO.primaryUserstoreName}),ye&&!rt&&Ce&&w.createElement(ot,{"data-componentid":"user-mgt-bulk-import-user-wizard-modal",closeWizard:function(){be(!1),Tt()},userstore:null!=Ze?Ze:d.wO.primaryUserstoreName}),et&&w.createElement(S.cV,{"data-componentid":"".concat(x,"-select-multiple-invite-confirmation-modal"),onClose:function(){tt(!1),be(!1)},type:"warning",open:et,primaryAction:M("common:close"),onPrimaryActionClick:function(){tt(!1),be(!1)},closeOnDimmerClick:!1},w.createElement(S.cV.Header,null,M("users:confirmations.addMultipleUser.header")),w.createElement(S.cV.Message,{attached:!0,warning:!0},M("users:confirmations.addMultipleUser.message")),w.createElement(S.cV.Content,null,w.createElement(C.c,{i18nKey:"users:confirmations.addMultipleUser.content"},"Invite User to Set Password should be enabled to add multiple users. Please enable email invitations for user password setup from",w.createElement(S.rU,{onClick:function(){return u.m.push(s.$.getPaths().get("GOVERNANCE_CONNECTOR_EDIT").replace(":categoryId",g.vH.USER_ONBOARDING_CONNECTOR_ID).replace(":connectorId",g.vH.ASK_PASSWORD_CONNECTOR_ID))},external:!1},"Login & Registration settings")))),st&&w.createElement(Wt,{closeWizard:function(){lt(!1),wt()},onUserInviteSuccess:function(){return wt()},"data-componentid":"user-mgt-invite-parent-user-wizard-modal"}))};Kt.defaultProps={"data-componentid":"users","data-testid":"users"};const Bt=Kt},30325:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(92336),a=n(31549),i=n(5315),o=n(14517);const s=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,s=(0,r.__rest)(e,["className"]);const l=(0,o.Z)("oxygen-alert-title",n);return(0,a.jsx)(i.Z,Object.assign({ref:t,className:l},s))}));var l,u,c;l='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-alert-title {\n  /* Add Styles */ }\n',u=document.getElementsByTagName("head")[0],(c=document.createElement("style")).setAttribute("type","text/css"),c.appendChild(document.createTextNode(l)),u.appendChild(c)},88404:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(51139),a=n.n(r),i=n(32234),o=n.n(i)()(a());o.push([e.id,".invite-parent-org-user-form .press-enter-prompt{display:flex;align-items:center;justify-content:space-between}",""]);const s=o},15311:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(51139),a=n.n(r),i=n(32234),o=n.n(i)()(a());o.push([e.id,".users-invite-parent-user .oxygen-chip-new{margin-left:.5rem}",""]);const s=o}}]);