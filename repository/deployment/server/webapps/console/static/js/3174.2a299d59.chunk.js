"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[3174],{63174:(e,t,n)=>{n.r(t),n.d(t,{AuthenticatorEditPage:()=>O,default:()=>P});var i=n(55007),o=n(51314),a=n(60486),r=n(40838),l=n(63264),u=n(57095),c=n(54484),s=n(6833),d=n(82406),p=n(43516),f=n(44194),v=n(10479),m=n(47245),g=n(37077),h=n(23750),E=n(46448),T=n(49953),b=n(18148),A=n(82925),y=n(50250);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,r,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var O=function(e){var t,n,S=e.location,O=e["data-componentid"],P=void 0===O?"authenticator-edit-page":O,I=(0,m.I0)(),_=(0,f.useRef)(null),R=b.f.CONNECTION_TEMPLATE_IDS,N=C((0,f.useState)(void 0),2),D=N[0],U=N[1],k=C((0,f.useState)(void 0),2),w=k[0],M=k[1],F=C((0,f.useState)(),2),H=F[0],L=F[1],x=C((0,f.useState)(!1),2),z=x[0],j=x[1],V=C((0,f.useState)(!1),2),W=V[0],$=V[1],Q=C((0,f.useState)(void 0),2),B=Q[0],G=Q[1],Z=(0,p.fQ)().getLink,q=(0,v.$)().t,J=(0,m.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.applications})),Y=(0,m.v9)((function(e){return e.config.ui.features})),K=(0,m.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.productName})),X=!(0,i.EV)(null==Y||null===(t=Y.identityProviders)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),ee=(0,i.EV)(null==J||null===(n=J.scopes)||void 0===n?void 0:n.read),te=(0,E.b4)(B,W).data;(0,f.useEffect)((function(){D&&G(ie(D))}),[D]),(0,f.useEffect)((function(){B&&$(!0)}),[B]),(0,f.useEffect)((function(){ne()}),[]),(0,f.useEffect)((function(){if(l.rD){var e=S.pathname.split("/"),t=e[e.length-1];oe(t)}}),[l.rD]);var ne=function(){var e=arguments.length>1?arguments[1]:void 0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e=null==S?void 0:S.state),void 0!==e&&(j(!0),L(e))},ie=function(e){return((null==e?void 0:e.tags)||[]).some((function(e){return e.toUpperCase()===y.Yn.SECOND_FACTOR}))?R.TWO_FACTOR_CUSTOM_AUTHENTICATOR:R.INTERNAL_CUSTOM_AUTHENTICATOR},oe=function(e){M(!0),(0,h.hc)(e).then((function(e){U(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?I((0,d.V_)({description:q("authenticationProvider:notifications.getIDP.error.description",{description:e.response.data.description}),level:s.QU.ERROR,message:q("authenticationProvider:notifications.getIDP.error.message")})):I((0,d.V_)({description:q("authenticationProvider:notifications.getIDP.genericError.description"),level:s.QU.ERROR,message:q("authenticationProvider:notifications.getIDP.genericError.message")}))})).finally((function(){M(!1)}))};return f.createElement(c.Z,{shouldFetch:ee,resourceType:u.P.APPLICATIONS,categories:o.z.SUPPORTED_CATEGORIES_INFO},f.createElement(p.O9,{pageTitle:"Edit Connection",isLoading:w,loadingStateOptions:{count:5,imageType:"square"},title:function(e){return e?f.createElement(f.Fragment,null,e.displayName,!1===w&&e.name&&function(e){return e?null!=e&&e.isEnabled?f.createElement(p._x,{popupHeader:q("authenticationProvider:popups.appStatus.enabled.header"),popupSubHeader:q("authenticationProvider:popups.appStatus.enabled.content"),labelColor:"green"}):f.createElement(p._x,{popupHeader:q("authenticationProvider:popups.appStatus.disabled.header"),popupSubHeader:q("authenticationProvider:popups.appStatus.disabled.content"),labelColor:"grey"}):null}(e)):null}(D),contentTopMargin:!0,description:function(e){var t,n;return e?f.createElement("div",{className:"with-label ellipsis",ref:_},function(e){return f.createElement(g.Z,{size:"small"},ie(e)===R.TWO_FACTOR_CUSTOM_AUTHENTICATOR?q("customAuthenticator:fields.createWizard.authenticationTypeStep.twoFactorAuthenticationCard.header"):q("customAuthenticator:fields.createWizard.authenticationTypeStep.internalUserAuthenticationCard.header"))}(e),null!=e&&e.description?f.createElement(p.GI,{content:null==e||null===(t=e.description)||void 0===t?void 0:t.replaceAll("{{productName}}",K),trigger:f.createElement("span",null,null==e||null===(n=e.description)||void 0===n?void 0:n.replaceAll("{{productName}}",K))}):A.C.getAuthenticatorDescription(null==e?void 0:e.id),f.createElement(p.eb,{link:Z("develop.connections.newConnection.\n                    ".concat(null==e?void 0:e.name,".learnMore"))},q("common:learnMore"))):null}(D),image:function(e){if(e)return f.createElement(p.JT,{hoverable:!1,name:null==e?void 0:e.displayName,image:(null==e?void 0:e.image)||A.C.getCustomAuthenticatorIcon(),size:"tiny"})}(D),backButton:{"data-componentid":"".concat(P,"-page-back-button"),onClick:function(){r.m.push(a.$.getPaths().get("IDP"))},text:q("console:develop.pages.authenticationProviderTemplate.backButton")},titleTextAlign:"left",bottomMargin:!1,"data-componentid":"".concat(P,"-page-layout")},f.createElement(T.n,{identityProvider:D,isLoading:w,onDelete:function(){r.m.push(a.$.getPaths().get("IDP"))},onUpdate:function(e,t){oe(e),ne(!1,t)},"data-componentid":P,template:te,type:B,isReadOnly:X,isAutomaticTabRedirectionEnabled:z,setIsAutomaticTabRedirectionEnabled:j,tabIdentifier:H})))};const P=O}}]);