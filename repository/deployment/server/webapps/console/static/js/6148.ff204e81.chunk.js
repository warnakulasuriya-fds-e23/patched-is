"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6148],{81389:(e,t,n)=>{n.d(t,{c:()=>i});var r=n(96124),a=n(76271),o=n(6833),i=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={headers:{"Content-Type":"application/json"},method:o.f2.GET,url:a.h.getState().config.endpoints.organizationEndpointV2.replace("{organization}",e)},l=(0,r.Z)(n?i:null,t),s=l.data,c=l.error;return{data:s,error:c,isLoading:!c&&!s,isValidating:l.isValidating,mutate:l.mutate}}},26148:(e,t,n)=>{n.r(t),n.d(t,{default:()=>be});var r=n(46461),a=n(49748),o=n(1989),i=n(60486),l=n(40838),s=n(9183),c=n(7231),u=n(6833),d=n(82406),m=n(43516),p=n(44194),f=n(10479),v=n(47245),g=n(37077),y=n(23553),h=n(39786),E=n(87803),b=n(55007),S=n(81389),A=n(54715),I=n(76271),R=n(48704),O=n(75120),C=n(21257),N=n(83406),T=n(9821),L=n(90302),w=n(23146),Z=n(86105),_=n(12638),U=n(62508),P=n(12950),j=n(26154);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.role,n=e.isLoading,r=e["data-componentid"],a=(0,f.$)().t,s=(0,v.v9)((function(e){return e.config.ui.features})),c=x((0,p.useState)([]),2),u=c[0],d=c[1],g=x((0,p.useState)(""),2),y=g[0],h=g[1],E=null==t?void 0:t.associatedApplications;(0,p.useEffect)((function(){E&&d(E)}),[E]);var b=function(e){l.m.push({pathname:i.$.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:"?"+T.j.IS_ROLES+"=true",state:{id:t.id,name:t.displayName,redirectTo:T.j.ROLE_CALLBACK_REDIRECT}})},S=function(){return y&&0===(null==u?void 0:u.length)?p.createElement(m.$J,{image:(0,o.jF)().emptySearch,imageSize:"tiny",title:a("console:develop.placeholders.emptySearchResult.title"),subtitle:[a("console:develop.placeholders.emptySearchResult.subtitles.0",{query:y}),a("console:develop.placeholders.emptySearchResult.subtitles.1")],"data-componentid":"".concat(r,"-empty-search-placeholder")}):0===(null==u?void 0:u.length)?p.createElement(m.$J,{image:(0,o.jF)().newList,imageSize:"tiny",subtitle:[a("idp:connectedApps.placeholders.emptyList",{idpName:null==t?void 0:t.displayName})],"data-componentid":"".concat(r,"-empty-placeholder")}):null},A=function(e){var t=null==E?void 0:E.filter((function(t){var n;return-1!==(null==t||null===(n=t.display)||void 0===n||null===(n=n.toLowerCase())||void 0===n?void 0:n.indexOf(e.toLowerCase()))}));d(t)};return p.createElement(m.pJ,{padded:"very"},p.createElement(m.X6,{as:"h4"},a("idp:connectedApps.header",{idpName:null==t?void 0:t.displayName})),p.createElement(U.Z,{hidden:!0}),E&&p.createElement(P.Z,{icon:p.createElement(j.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var t=e.target.value.trim();h(t),t.length>0?A(t):d(E)},placeholder:a("idp:connectedApps.placeholders.search"),floated:"left",size:"small",style:{width:"250px"},"data-componentid":"".concat(r,"-searched")}),p.createElement(m.wQ,{className:"connected-applications-table",isLoading:n,loadingStateOptions:{count:L.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:[{"data-componentid":"".concat(r,"-item-edit-button"),hidden:function(){return!(0,Z.cr)(null==s?void 0:s.applications,T.j.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))},icon:function(){return"caret right"},onClick:function(e,t){return b(t.value)},popupText:function(){return a("idp:connectedApps.action")},renderer:"semantic-icon"}],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return p.createElement(_.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(r,"-item-heading")},p.createElement(m.JT,{image:p.createElement(m.Xo,{name:null==e?void 0:e.display,size:"mini","data-componentid":"".concat(r,"-item-image-inner")}),size:"mini",spaced:"right","data-componentid":"".concat(r,"-item-image")}),p.createElement(_.Z.Content,null,null==e?void 0:e.display))},title:a("applications:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:a("applications:list.columns.actions")}],data:u,onRowClick:function(e,t){b(t.value)},placeholders:S(),showHeader:w.r.enableTableHeaders,transparent:!n&&null!==S(),"data-componentid":"".concat(r,"-data-table")}))};$.defaultProps={"data-componentid":"role-edit-connected-apps"};var z=n(99096),D=n(25662),V=n(36940),k=n(47513),F=n(50699),H=n(86692),G=n(23852),B=n(83476),J=n(98420);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.isReadOnly,n=e.role,r=e.onRoleUpdate,a=e.tabIndex,o=e["data-componentid"],i=(0,v.I0)(),l=(0,f.$)().t,g=(0,H.Z)(!0,"type eq tenant","apiResources").data,y=(0,H.Z)(!0,"type eq organization","apiResources").data,h=q((0,p.useState)(void 0),2),E=h[0],b=h[1],S=(0,p.useMemo)((function(){var e;if(!g)return null;var t=(0,k.Z)(g),n=[];return n.push(G.S.ROLE_V1_API_RESOURCES_COLLECTION_NAME),t.apiResourceCollections=null==t||null===(e=t.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!n.includes(null==e?void 0:e.name)})),t}),[g]),A=(0,p.useMemo)((function(){var e;if(!y)return null;var t=(0,k.Z)(y),n=[];return n.push(G.S.ORG_ROLE_V1_API_RESOURCES_COLLECTION_NAME),t.apiResourceCollections=null==t||null===(e=t.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!n.includes(null==e?void 0:e.name)})),t}),[y]),I=function(e,t){var n=e.apiResources.read.flatMap((function(e){return e.scopes.map((function(e){return e.name}))})),r=e.apiResources.write.flatMap((function(e){return e.scopes.map((function(e){return e.name}))})),a=n.every((function(e){return t.includes(e)})),o=r.every((function(e){return t.includes(e)}));return a||o?{permissions:(0,B.Z)(e.apiResources[o?"write":"read"]),read:!o&&a,write:o}:null},R=(0,p.useMemo)((function(){var e,t,r,a=null==n||null===(e=n.permissions)||void 0===e?void 0:e.map((function(e){return e.value})),o={organization:{},tenant:{}};return null==S||null===(t=S.apiResourceCollections)||void 0===t||t.forEach((function(e){var t=I(e,a);t&&(o.tenant[e.id]=t)})),null==A||null===(r=A.apiResourceCollections)||void 0===r||r.forEach((function(e){var t=I(e,a);t&&(o.organization[e.id]=t)})),o}),[n,S,A]);return p.createElement(m.pJ,{padded:"very",className:"console-role-permissions"},p.createElement("div",{className:"section-heading"},p.createElement(m.X6,{as:"h4"},l("roles:edit.permissions.heading")),p.createElement(m.X6,{as:"h6",color:"grey",subHeading:!0},l(t?"roles:edit.permissions.readOnlySubHeading":"roles:edit.permissions.subHeading"))),p.createElement(J.Z,{defaultExpandedIfPermissionsAreSelected:!0,isReadOnly:t,initialValues:R,onPermissionsChange:b}),!t&&p.createElement(m.KM,{className:"submit-button",variant:"contained",size:"small",loading:!1,disabled:(0,F.Z)(null==n?void 0:n.permissions)||E&&(0,F.Z)(E),onClick:function(){!function(e){var t=null!=e?e:null==n?void 0:n.permissions,o={Operations:[{op:"replace",value:{permissions:null==t?void 0:t.map((function(e){return{value:e.value}}))}}],schemas:[c.lg.PATCH_OP]};(0,s.dB)(n.id,o).then((function(){r(a),i((0,d.V_)({description:l("roles:notifications.updateRole.success.description"),level:u.QU.SUCCESS,message:l("roles:notifications.updateRole.success.message")}))})).catch((function(){i((0,d.V_)({description:l("roles:notifications.updateRole.genericError.description"),level:u.QU.ERROR,message:l("roles:notifications.updateRole.genericError.message")}))}))}(E)},"data-componentid":"".concat(o,"-update-button")},l("common:update")))};X.defaultProps={"data-componentid":"console-roles-table"};const K=X;var Y=n(51835),W=n.n(Y),ee=n(27975),te=n.n(ee),ne=n(55900),re=n.n(ne),ae=n(21555),oe=n.n(ae),ie=n(3621),le=n.n(ie),se=n(5062),ce=n.n(se),ue=n(61216),de={};de.styleTagTransform=ce(),de.setAttributes=oe(),de.insert=re().bind(null,"head"),de.domAPI=te(),de.insertStyleElement=le();W()(ue.Z,de);ue.Z&&ue.Z.locals&&ue.Z.locals;function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var fe=function(e){var t,n,r,a=e.isLoading,o=e.roleObject,i=e.onRoleUpdate,l=e.defaultActiveIndex,s=(0,f.$)().t,u=(0,C.z)(),d=u.isSuperOrganization,g=u.isFirstLevelOrganization,T=u.isSubOrganization,L=u.organizationType,w=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userRoles})),Z=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),_=(0,b.EV)(null==w||null===(t=w.scopes)||void 0===t?void 0:t.update),U=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.administratorRoleDisplayName})),P=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.consoleSettings})),j=!(null!=P&&null!==(n=P.disabledFeatures)&&void 0!==n&&n.includes("consoleSettings.editableConsoleRoles")),x=!(null!=P&&null!==(r=P.disabledFeatures)&&void 0!==r&&r.includes("consoleSettings.privilegedUsers")),M=me((0,p.useState)(!1),2),k=M[0],F=M[1],H=me((0,p.useState)(!1),2),G=H[0],B=H[1],J=me((0,p.useState)(Z),2),q=J[0],Q=J[1],X=I.h.getState().auth.tenantDomain,Y=S.c,W=(0,b.Ac)(O.Z.SAAS_FEATURES_IDENTIFIER),ee=Y(X,{revalidateIfStale:!0},W===b.iK.ENABLED),te=ee.data,ne=ee.isLoading,re=ee.isValidating;(0,p.useEffect)((function(){B(null==te?void 0:te.isEnterpriseLoginEnabled)}),[ne,re]);var ae=L===A.$.SUBORGANIZATION;(0,p.useEffect)((function(){o&&F(o.displayName===V.nL.ADMIN_ROLE||(null==o?void 0:o.displayName)===V.nL.ADMIN_GROUP||(null==o?void 0:o.displayName)===U)}),[o]);var oe;return p.createElement(m.M$,{isLoading:a,defaultActiveIndex:l,panes:[{menuItem:s("roles:edit.menuItems.basic"),render:function(){return p.createElement(m.M$.Pane,{controlledSegmentation:!0,attached:!1},p.createElement(N.Q,{isReadOnly:ae||k||!j||!_,role:o,onRoleUpdate:i,tabIndex:0,enableDeleteErrorConnetedAppsModal:!1}))}},{menuItem:s("roles:edit.menuItems.permissions"),render:function(){return p.createElement(m.M$.Pane,{controlledSegmentation:!0,attached:!1},p.createElement(K,{isReadOnly:ae||k||!j||!_,role:o,onRoleUpdate:i,tabIndex:1,isSubOrganization:ae}))}},(d()||g()&&!x||T())&&{menuItem:s("roles:edit.menuItems.groups"),render:function(){return p.createElement(m.M$.Pane,{controlledSegmentation:!0,attached:!1},p.createElement(z.q,{isReadOnly:!_,role:o,onRoleUpdate:i,tabIndex:2}))}},{menuItem:s("roles:edit.menuItems.users"),render:function(){return p.createElement(m.M$.Pane,{controlledSegmentation:!0,attached:!1},g()&&G&&x&&p.createElement(E.Z,{row:!0,"aria-labelledby":"console-administrators-radio-group",className:"multi-option-radio-group",defaultValue:Z,name:"console-administrators-radio-group-2",value:q,onChange:function(e,t){Q(t)}},p.createElement(y.Z,{value:Z,control:p.createElement(h.Z,null),label:"Asgardeo"}),p.createElement(y.Z,{value:"DEFAULT",control:p.createElement(h.Z,null),label:X+" organization"})),p.createElement(D.G,{isReadOnly:!_,role:o,onRoleUpdate:i,activeUserStore:q!==(null===R.w||void 0===R.w?void 0:R.w.primaryUserstoreName)&&x&&g()?q:null,tabIndex:3}))}},(null==o||null===(oe=o.audience)||void 0===oe?void 0:oe.type)===c.cv.ORGANIZATION.toLocaleLowerCase()?{menuItem:s("roles:edit.menuItems.connectedApps"),render:function(){return p.createElement(m.M$.Pane,{controlledSegmentation:!0,attached:!1},p.createElement($,{isReadOnly:!_,role:o,onRoleUpdate:i,tabIndex:4}))}}:null]})};fe.defaultProps={defaultActiveIndex:0};const ve=fe;var ge=n(13692);function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ee=function(e){var t,n,y,h=e["data-componentid"],E=(0,f.$)().t,b=(0,v.I0)(),S=ye((0,p.useState)(void 0),2),A=S[0],I=S[1],R=ye((0,p.useState)(0),2),O=R[0],C=R[1];(0,p.useEffect)((function(){var e=l.m.location.pathname.split("/"),t=e[e.length-1];I(t)}),[]);var N=(0,s.tE)(A),T=N.data,L=N.isLoading,w=N.error,Z=N.mutate;(0,p.useEffect)((function(){w&&b((0,d.V_)({description:E("roles:notifications.fetchRole.genericError.description"),level:u.QU.ERROR,message:E("roles:notifications.fetchRole.genericError.message")}))}),[w]);var _=function(){l.m.push(i.$.getPaths().get("CONSOLE_SETTINGS")+"#tab=".concat(ge.w.ROLES))};return w?function(){if(w)return p.createElement(m.$J,{subtitle:[E("roles:edit.placeholders.errorPlaceHolder.subtitles.0"),E("roles:edit.placeholders.errorPlaceHolder.subtitles.1")],title:E("roles:edit.placeholders.errorPlaceHolder.title"),image:(0,o.jF)().emptySearch,action:p.createElement(r.Z,{onClick:_},E("roles:edit.placeholders.errorPlaceHolder.action")),imageSize:"tiny"})}():p.createElement(m.O9,{"data-componentid":h,isLoading:L,title:T&&null!=T&&T.displayName?null==T?void 0:T.displayName:E("pages:rolesEdit.title"),description:p.createElement(a.Z,{container:!0,alignItems:"center"},p.createElement(a.Z,null,c.cv.ORGANIZATION===(null==T||null===(t=T.audience)||void 0===t?void 0:t.type.toUpperCase())?E("roles:list.columns.managedByOrg.label"):E("roles:list.columns.managedByApp.label")),p.createElement(a.Z,null,p.createElement(g.Z,{className:c.cv.ORGANIZATION===(null==T||null===(n=T.audience)||void 0===n?void 0:n.type.toUpperCase())?"issuer-label":"client-id-label"},null==T||null===(y=T.audience)||void 0===y?void 0:y.display))),pageTitle:E("pages:rolesEdit.title"),backButton:{onClick:_,text:E("pages:rolesEdit.backButton",{type:"roles"})},titleTextAlign:"left",bottomMargin:!1},p.createElement(ve,{isLoading:L,roleObject:T,onRoleUpdate:function(e){Z(),C(e)},defaultActiveIndex:O}))};Ee.defaultProps={"data-componentid":"console-roles-edit-page"};const be=Ee},61216:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(51139),a=n.n(r),o=n(32234),i=n.n(o)()(a());i.push([e.id,".console-role-permissions .section-heading{margin-bottom:2rem}.console-role-permissions .submit-button{margin-top:2rem}.console-role-permissions .multi-option-radio-group{gap:40px;margin:20px 0}",""]);const l=i}}]);