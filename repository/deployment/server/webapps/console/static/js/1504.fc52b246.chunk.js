"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1504],{60717:(e,t,n)=>{n.d(t,{F:()=>l});var r=n(11526),o=n(6833),i=n(76271),a=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()).bind(r.AsgardeoSPAClient.getInstance()),l=function(e,t,n,r,l){var s={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.f2.GET,params:{attributes:r,count:e,domain:l,filter:n,startIndex:t},url:i.h.getState().config.endpoints.users};return a(s).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},39203:(e,t,n)=>{n.d(t,{Ug:()=>u,VL:()=>c,fF:()=>d,hI:()=>s,sS:()=>p,tN:()=>f,yq:()=>m});var r=n(11526),o=n(76271),i=n(96124),a=n(6833),l=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),s=function(e,t){var n={headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,params:{domain:e,excludedAttributes:t},url:o.h.getState().config.endpoints.groups};return l(n).then((function(e){if(200==e.status)return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},u=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l={headers:{"Content-Type":"application/json"},method:a.f2.GET,params:n?{domain:e,excludedAttributes:t,filter:n}:{domain:e,excludedAttributes:t},url:o.h.getState().config.endpoints.groups},s=(0,i.Z)(r?l:null),u=s.data,c=s.error;return{data:u,error:c,isLoading:!c&&!u,isValidating:s.isValidating,mutate:s.mutate,response:s.response}},c=function(e,t){var n={headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,params:{excludedAttributes:t},url:o.h.getState().config.endpoints.groups+"/"+e};return l(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e,t){var n={data:t,headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.PATCH,url:o.h.getState().config.endpoints.groups+"/"+e};return l(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},f=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:o.h.getState().config.endpoints.groups+"/.search"};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},m=function(e){var t={headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.DELETE,url:o.h.getState().config.endpoints.groups+"/"+e};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},p=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:o.h.getState().config.endpoints.groups};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},54663:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{J:()=>s});var s=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));a(s,"GROUP_VIEW_PATH","/groups/"),a(s,"FEATURE_DICTIONARY",(new Map).set("GROUP_CREATE","groups.create").set("GROUP_UPDATE","groups.update").set("GROUP_DELETE","groups.delete").set("GROUP_READ","groups.read"))},41504:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Be});var r=n(55007),o=n(25134),i=n(1989),a=n(90302),l=n(63264),s=n(38463),u=n(58613),c=n(6833),d=n(82406),f=n(43516),m=n(90408),p=n(44194),v=n(10479),h=n(47245),g=n(26154),y=n(47625),b=n(39203),E=n(60486),S=n(40838),w=n(51021),O=n(86105),A=n(16590),R=n(84025),I=n.n(R),C=n(37077),P=n(12638),U=n(54663);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t,n,o=e.advancedSearch,l=e.defaultListItemLimit,c=e.handleGroupDelete,d=e.isLoading,m=e.featureConfig,y=e.onEmptyListPlaceholderActionClick,b=e.onListItemClick,R=e.onSearchQueryClear,L=e.groupList,x=e.selection,T=e.searchQuery,j=e.showListItemActions,k=e.showMetaContent,_=e.isReadOnlyUserStore,D=e.isUserstoreAddDisabled,M=e.isUserstoreDeleteDisabled,z=e["data-testid"],V=(0,v.$)().t,G=(0,h.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),Z=(0,u.Z)().readOnlyUserStoreNamesList,F=N((0,p.useState)(!1),2),Q=F[0],B=F[1],H=N((0,p.useState)(),2),$=H[0],W=H[1],q=(0,r.EV)(null==m||null===(t=m.groups)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),J=(0,r.EV)(null==m||null===(n=m.groups)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.delete),Y=function(e){S.m.push(E.$.getPaths().get("GROUP_EDIT").replace(":id",e))},K=function(){return T?p.createElement(f.$J,{"data-testid":"".concat(z,"-search-empty-placeholder"),action:p.createElement(f.Qj,{"data-testid":"".concat(z,"-search-empty-placeholder-clear-button"),onClick:R},V("roles:list.emptyPlaceholders.search.action")),image:(0,i.jF)().emptySearch,imageSize:"tiny",title:V("roles:list.emptyPlaceholders.search.title"),subtitle:[V("roles:list.emptyPlaceholders.search.subtitles.0",{searchQuery:T}),V("roles:list.emptyPlaceholders.search.subtitles.1")]}):0===(null==L?void 0:L.length)?p.createElement(f.$J,{"data-testid":"".concat(z,"-empty-list-empty-placeholder"),action:!_&&!D&&p.createElement(r.di,{when:null==m||null===(e=m.groups)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},p.createElement(f.KM,{"data-testid":"".concat(z,"-empty-list-empty-placeholder-add-button"),onClick:y},p.createElement(g.Z,{name:"add"}),V("roles:list.emptyPlaceholders.emptyRoleList.action",{type:"Group"}))),image:(0,i.jF)().newList,imageSize:"tiny",title:_||D?V("roles:list.emptyPlaceholders.emptyRoleList.emptyRoles",{type:"groups"}):V("roles:list.emptyPlaceholders.emptyRoleList.title",{type:"group"}),subtitle:_||D?[V("roles:list.emptyPlaceholders.emptyRoleList.subtitles.0",{type:"groups"})]:[V("roles:list.emptyPlaceholders.emptyRoleList.subtitles.0",{type:"groups"}),V("roles:list.emptyPlaceholders.emptyRoleList.subtitles.1",{type:"group"}),V("roles:list.emptyPlaceholders.emptyRoleList.subtitles.2",{type:"group"})]}):null;var e};return p.createElement(p.Fragment,null,p.createElement(f.wQ,{className:"groups-list",externalSearch:o,isLoading:d,loadingStateOptions:{count:null!=l?l:a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:function(){if(j){var e=[{hidden:function(){return!(0,O.cr)(null==m?void 0:m.groups,U.J.FEATURE_DICTIONARY.get("GROUP_READ"))},icon:function(e){var t,n,r=(null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/")[0]:null===w.wO||void 0===w.wO?void 0:w.wO.primaryUserstoreName;return!(0,O.cr)(null==m?void 0:m.groups,U.J.FEATURE_DICTIONARY.get("GROUP_UPDATE"))||!q||null!=Z&&Z.includes(r.toString())?"eye":"pencil alternate"},onClick:function(e,t){return Y(t.id)},popupText:function(e){var t,n,r=(null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/")[0]:null===w.wO||void 0===w.wO?void 0:w.wO.primaryUserstoreName;return!(0,O.cr)(null==m?void 0:m.groups,U.J.FEATURE_DICTIONARY.get("GROUP_UPDATE"))||!q||null!=Z&&Z.includes(r.toString())?V("common:view"):V("common:edit")},renderer:"semantic-icon"}];return e.push({hidden:function(e){var t,n,r=(null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/")[0]:null===w.wO||void 0===w.wO?void 0:w.wO.primaryUserstoreName;return!J||(null==Z?void 0:Z.includes(r.toString()))||_||M},icon:function(){return"trash alternate"},onClick:function(e,t){W(t),B(!Q)},popupText:function(){return V("roles:list.popups.delete",{type:"Group"})},renderer:"semantic-icon"}),e}}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return p.createElement(P.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(z,"-item-heading")},p.createElement(f.JT,{image:p.createElement(f.Xo,{name:e.displayName,size:"mini","data-testid":"".concat(z,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(z,"-item-image")}),p.createElement(P.Z.Content,null,-1!==(t=e.displayName).indexOf("/")?p.createElement(p.Fragment,null,p.createElement(C.Z,{"data-testid":"".concat(z,"-group-").concat(t.split("/")[0],"-label"),content:t.split("/")[0],size:"mini",color:"olive",className:"group-label"})," / "+t.split("/")[1]):p.createElement(p.Fragment,null,p.createElement(C.Z,{"data-testid":"".concat(z,"-group-").concat(t,"-label"),content:A.StringUtils.isEqualCaseInsensitive(G,s.pH)?V("console:manage.features.users.userstores.userstoreOptions.primary"):G,size:"mini",color:"teal",className:"primary-label"})," / "+t)));var t},title:V("console:manage.features.groups.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"lastModified",hidden:!k,id:"lastModified",key:"lastModified",render:function(e){var t=I()(new Date),n=I()(e.meta.lastModified?e.meta.lastModified:e.meta.created);return V("console:common.dateTime.humanizedDateString",{date:I().duration(t.diff(n)).humanize()})},title:V("console:manage.features.groups.list.columns.lastModified")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:V("console:manage.features.groups.list.columns.actions")}],data:L,onRowClick:function(e,t){Y(null==t?void 0:t.id),b&&b(e,t)},placeholders:K(),selectable:x,showHeader:!1,transparent:!d&&null!==K(),"data-testid":z}),Q&&p.createElement(f.cV,{"data-testid":"".concat(z,"-delete-item-confirmation-modal"),onClose:function(){return B(!1)},type:"negative",open:Q,assertionHint:V("roles:list.confirmations.deleteItem.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return B(!1)},onPrimaryActionClick:function(){c($),B(!1)},closeOnDimmerClick:!1},p.createElement(f.cV.Header,null,V("roles:list.confirmations.deleteItem.header")),p.createElement(f.cV.Message,{attached:!0,negative:!0},V("roles:list.confirmations.deleteItem.message",{type:"group"})),p.createElement(f.cV.Content,null,V("roles:list.confirmations.deleteItem.content",{type:"group"}))))};x.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0};var T=n(6567),j=n(96334),k=n(29893),_=n(50699);function D(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G=function(e){var t,n=e.initialValues,r=e.triggerSubmit,o=e.onSubmit,i=e.handleSetRoleId,a=(0,v.$)().t,l=M((0,p.useState)(null!==(t=null==n?void 0:n.roleList)&&void 0!==t?t:[]),2),s=l[0],u=l[1],c=M((0,p.useState)([]),2),d=c[0],m=c[1],h=M((0,p.useState)(!1),2),g=h[0],y=h[1];(0,p.useEffect)((function(){y((null==d?void 0:d.length)>0&&(null==s?void 0:s.every((function(e){return null==d?void 0:d.includes(e)}))))}),[d,s]);var b=function(e,t){var n=null==e?void 0:e.split("/");if((null==n?void 0:n.length)>0)return"application"==n[0]?{labelColor:null,labelText:a("roles:addRoleWizard.forms.roleBasicDetails.roleAudience.values.application"),name:"audience-label",subLabel:t}:{labelColor:null,labelText:a("roles:addRoleWizard.forms.roleBasicDetails.roleAudience.values.organization"),name:"audience-label"}};return p.createElement(p.Fragment,null,p.createElement(j.Es,{onSubmit:function(){o({roles:d})},submitState:r},p.createElement(f.IX,{selectionComponent:!0,searchPlaceholder:a("transferList:searchPlaceholder",{type:"Roles"}),handleUnelectedListSearch:function(e,t){var r,o,i=t.value;if((0,_.Z)(i)){var a;u(null!==(a=null==n?void 0:n.roleList)&&void 0!==a?a:[])}else{var l=new RegExp((0,k.Z)(i),"i"),s=null!==(r=null==n||null===(o=n.roleList)||void 0===o?void 0:o.filter((function(e){return l.test(e.displayName)})))&&void 0!==r?r:[];u(s)}},"data-testid":"user-mgt-add-user-wizard-modal"},p.createElement(f.Jv,{isListEmpty:!((null==s?void 0:s.length)>0),listType:"unselected",listHeaders:[a("transferList:list.headers.1"),a("transferList:list.headers.2"),""],handleHeaderCheckboxChange:function(){if(g){y(!1);var e=D(d);s.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n&&e.splice(n,1)})),m(e)}else{y(!0);var t=D(d);s.forEach((function(e){-1===t.findIndex((function(t){return t.id===e.id}))&&t.push(e)})),m(t)}},isHeaderCheckboxChecked:g,emptyPlaceholderContent:a("transferList:list.emptyPlaceholders.groups.unselected",{type:"roles"}),"data-testid":"user-mgt-add-user-wizard-modal-unselected-roles-select-all-checkbox",emptyPlaceholderDefaultContent:a("transferList:list.emptyPlaceholders.default")},null==s?void 0:s.map((function(e,t){var n,r=null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");return p.createElement(f.qT,{handleItemChange:function(){return function(e){var t=null==d?void 0:d.findIndex((function(t){return t.id===e.id}));m(-1===t?function(t){return[].concat(D(t),[e])}:function(e){var n=D(e);return n.splice(t,1),n})}(e)},key:t,listItem:(null==r?void 0:r.length)>1?r[1]:null==e?void 0:e.displayName,listItemId:e.id,listItemIndex:t,listItemTypeLabel:b(null==e?void 0:e.audience.type,null==e?void 0:e.audience.display),isItemChecked:d.includes(e),showSecondaryActions:!1,handleOpenPermissionModal:function(){return i(e.id)},reOrderLabel:!0,showSubLabel:!0,"data-testid":"user-mgt-add-user-wizard-modal-unselected-roles"})}))))))},Z=n(46501),F=n(76271),Q=n(80659),B=n(78377),H=n(62508),$=n(89141),W=n(10909),q=n(59870),J=n(96646);function Y(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e){var t=e.isReadOnly,n=e.emphasize,r=e.triggerSubmit,o=e.onSubmit,i=e.roleObject,a=e.isEdit,l=e.initialValues,s=e.isRole,u=e.isSubmitting,c=e.permissionsToHide,d=e["data-testid"],m=(0,v.$)().t,h=K((0,p.useState)([]),2),g=h[0],y=h[1],b=K((0,p.useState)([]),2),E=b[0],S=b[1],w=K((0,p.useState)([]),2),O=w[0],A=w[1],R=K((0,p.useState)([]),2),I=R[0],C=R[1],P=K((0,p.useState)(!0),2),U=P[0],N=P[1],L=K((0,p.useState)(!1),2),x=L[0],T=L[1];(0,p.useEffect)((function(){var e=[];if(J.J.getAllPermissions(c).then((function(e){_(x,e),y(e),C([e[0].key.toString()]),N(!1)})),k(),l&&l.length>0){var t=[];l.forEach((function(e){t.push(e.key.toString())})),A(t),null==O||O.forEach((function(t){e.push(z(t,g))})),S(e)}s&&i&&(A(i.permissions),null==O||O.forEach((function(t){e.push(z(t,g))})),S(e))}),[g.length>0]);var k=function(){(0,Q.Un)().then((function(e){F.h.getState().profile.profileInfo.userName===(null==e?void 0:e.realmConfig.adminUser)&&T(!0)})).catch((function(e){T(!1)}))},_=function(e,t){t[0].children.forEach((function(t){t.key!==q.nL.SUPER_ADMIN_PERMISSION_KEY||e||(t.disableCheckbox=!0,t.children&&D(t.children,!0))}))},D=function(e,t){e.forEach((function(e){e.disableCheckbox=t,e.children&&D(e.children,t)}))},M=function(e,t){if(t.checked){if(!E.find((function(e){return e.key===t.node.key}))){var n,r,o=z(t.node.key,g,!0),i=1;if(null==o||null===(n=o.children)||void 0===n||n.forEach((function(e){E.filter((function(t){return t.key===e.key})).length>0&&++i})),(null==o||null===(r=o.children)||void 0===r?void 0:r.length)===i){var a=E.filter((function(e){e.key.toString().replace(/^\/|\/$/g,"").split("/"),o.key.toString().replace(/^\/|\/$/g,"").split("/")}));S([].concat(Y(a),[o]))}else S([].concat(Y(E),[t.node]))}}else S(t.checkedNodes)},z=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[t[0]];r.length;){var o=r.shift();if(n){if(o.key===e.slice(0,e.lastIndexOf("/")))return o}else if(o.key===e)return o;o.children&&r.push.apply(r,Y(o.children))}return null},V=function(e){return e.isLeaf?null:p.createElement("div",{className:"tree-arrow-wrap"},p.createElement("span",{className:"tree-arrow ".concat(e.expanded?"":"active")},p.createElement("span",null),p.createElement("span",null)))},G=function(){return p.createElement(p.Fragment,null,p.createElement(j.Es,{submitState:r,onSubmit:function(){o(E)}},U?p.createElement(f.pO,{className:"p-3",active:!0}):p.createElement("div",{className:"treeview-container"},p.createElement(B.Z,{className:"customIcon","data-testid":"".concat(d,"-tree"),disabled:t,checkedKeys:E.map((function(e){return e.key})),defaultExpandedKeys:I,showLine:!0,showIcon:!1,checkable:!0,selectable:!1,onCheck:M,treeData:g,switcherIcon:V})),a&&!U&&p.createElement(p.Fragment,null,p.createElement(H.Z,{hidden:!0}),p.createElement($.Z.Row,{columns:1},p.createElement($.Z.Column,{mobile:16,tablet:16,computer:8},p.createElement(W.Z,{"data-testid":"".concat(d,"-update-button"),primary:!0,type:"submit",loading:u,disabled:u,size:"small",className:"form-button"},m("roles:addRoleWizard.permissions.buttons.update")))))))};return n?p.createElement(f.pJ,{"data-testid":d,padded:"very"},G()):p.createElement("div",{"data-testid":d},G())};te.defaultProps={emphasize:!0,isReadOnly:!1};n(87029),n(86329);var ne=n(19980);function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e){var t=e.roleId,n=e.handleNavigateBack,r=e["data-testid"],o=(0,v.$)().t,i=re((0,p.useState)(!1),2),a=i[0],l=i[1],s=re((0,p.useState)(),2),u=s[0],c=s[1];return(0,p.useEffect)((function(){t&&t&&(0,Z.xQ)(t).then((function(e){l(!1),c(e.data)}))}),[t]),(0,p.useEffect)((function(){u&&l(!0)}),[u]),a&&p.createElement(p.Fragment,null,p.createElement(f.X6,{as:"h5"},o("user:updateUser.roles.viewPermissionModal.heading",{role:u.displayName})),p.createElement(H.Z,{hidden:!0}),p.createElement(f.Qj,{"data-testid":"".concat(r,"_back_button"),floated:"left",onClick:n},p.createElement(g.Z,{name:"arrow left"}),o("user:updateUser.roles.viewPermissionModal.backButton")),p.createElement(H.Z,{hidden:!0}),p.createElement(H.Z,{hidden:!0}),p.createElement(ne.Z,{"data-testid":r},p.createElement("div",{className:"permissions-edit-container"},p.createElement(te,{isEdit:!1,isRole:!0,roleObject:u}))))},ae=n(43974),le=n(79282),se=n(1651),ue=n(47018),ce=n(60717),de=n(41355),fe=n(6643),me=n(54274),pe=n(20342),ve=n(33403),he=n(74074);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ye(){ye=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),l=new N(r||[]);return o(a,"_invoke",{value:I(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",m="suspendedYield",p="executing",v="completed",h={};function g(){}function y(){}function b(){}var E={};u(E,a,(function(){return this}));var S=Object.getPrototypeOf,w=S&&S(S(L([])));w&&w!==n&&r.call(w,a)&&(E=w);var O=b.prototype=g.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(o,i,a,l){var s=d(e[o],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==ge(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(c).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=C(l,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?v:m,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function U(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ge(t)+" is not iterable")}return y.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(R.prototype),u(R.prototype,l,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new R(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(U),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),U(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;U(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function be(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){be(i,r,o,a,l,"next",e)}function l(e){be(i,r,o,a,l,"throw",e)}a(void 0)}))}}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Oe=function(e){var t,n,r,o,i,a=e.onSubmit,l=e.triggerSubmit,m=e.initialValues,g=e.setUserStore,y=e.userStore,E=e["data-componentid"],S=(0,v.$)().t,O=(0,h.I0)(),R=(0,u.Z)().isUserStoreReadOnly,I=(0,h.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),C=Se((0,p.useState)([]),2),P=C[0],U=C[1],N=Se((0,p.useState)(!1),2),L=N[0],x=N[1],T=Se((0,p.useState)(null),2),k=T[0],_=T[1],D=(0,p.useRef)();(0,p.useEffect)((function(){V()}),[]),(0,p.useEffect)((function(){k&&a({basicDetails:k})}),[k]);var M=function(){var e=Ee(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!y||A.StringUtils.isEqualCaseInsensitive(y,I)){e.next=6;break}return e.next=4,me.w.getUserStoreRegEx(y,s.y8.RolenameRegEx).then((function(e){x(!0),t=e}));case 4:e.next=8;break;case 6:return e.next=8,me.w.getPrimaryUserStore().then((function(e){var n;(x(!0),e&&e.properties)&&(t=null==e||null===(n=e.properties)||void 0===n?void 0:n.filter((function(e){return e.name===s.y8.RolenameRegEx}))[0].value)}));case 8:return x(!1),e.abrupt("return",new Promise((function(e,n){""!==t?e(t):n("")})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Ee(ye().mark((function e(t){var n,r,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,pe.YZ)(t);case 3:return r=e.sent,o="true"===(null===(n=r.properties.find((function(e){return"Disabled"===e.name})))||void 0===n?void 0:n.value),e.abrupt("return",!R(null==r?void 0:r.name)&&!o);case 8:return e.prev=8,e.t0=e.catch(0),O((0,d.V_)({description:S("userstores:notifications.fetchUserstores.genericError.description"),level:c.QU.ERROR,message:S("userstores:notifications.fetchUserstores.genericError.message")})),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Ee(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{key:-1,text:w.wO.primaryUserstoreName,value:w.wO.primaryUserstoreName}],e.prev=1,e.next=4,(0,pe.ow)();case 4:return r=e.sent,e.next=7,Promise.all(null===(n=r.data)||void 0===n?void 0:n.map(function(){var e=Ee(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(null==t?void 0:t.id);case 2:return n=e.sent,e.abrupt("return",n?t:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:e.sent.filter(Boolean).forEach((function(e,n){e&&t.push({key:n,text:e.name,value:e.name})})),U(t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),O((0,d.V_)({description:S("userstores:notifications.fetchUserstores.genericError.description"),level:c.QU.ERROR,message:S("userstores:notifications.fetchUserstores.genericError.message")}));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return p.createElement(j.Es,{"data-componentid":E,onSubmit:function(e){_(function(e){var t;return{domain:y,groupName:null==e||null===(t=e.get("groupName"))||void 0===t?void 0:t.toString()}}(e))},submitState:l},p.createElement($.Z,null,(null===w.ld||void 0===w.ld?void 0:w.ld.allowGroupAddForRemoteUserstores)&&p.createElement(ve.Z,null,p.createElement(he.Z,{mobile:16,tablet:16,computer:10},p.createElement(j.gN,{"data-componentid":"".concat(E,"-domain-dropdown"),type:"dropdown",label:S("roles:addRoleWizard.forms.roleBasicDetails.domain.label.group"),name:"domain",children:P,placeholder:S("roles:addRoleWizard.forms.roleBasicDetails.domain.placeholder"),requiredErrorMessage:S("roles:addRoleWizard.forms.roleBasicDetails.domain.validation.empty.group"),required:!0,element:p.createElement("div",null),listen:function(e){var t,n=null==e||null===(t=e.get("domain"))||void 0===t?void 0:t.toString();g(n)},value:null!==(t=null!==(n=null==m||null===(r=m.basicDetails)||void 0===r?void 0:r.domain)&&void 0!==n?n:y)&&void 0!==t?t:null===(o=P[0])||void 0===o?void 0:o.value}))),p.createElement(ve.Z,null,p.createElement(he.Z,{mobile:16,tablet:16,computer:10},p.createElement(j.gN,{ref:D,"data-componentid":"".concat(E,"-role-name-input"),type:"text",name:"groupName",label:S("roles:addRoleWizard.forms.roleBasicDetails.roleName.label",{type:"Group"}),placeholder:S("roles:addRoleWizard.forms.roleBasicDetails.roleName.placeholder",{type:"group"}),required:!0,requiredErrorMessage:S("roles:addRoleWizard.forms.roleBasicDetails.roleName.validations.empty",{type:"Group"}),validation:function(){var e=Ee(ye().mark((function e(t,n){var r,o,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,o="",e.next=4,M().then((function(e){o=e,r=me.w.validateInputAgainstRegEx(t,e)}));case 4:return r||(n.isValid=!1,o===w.ld.defaultUserstoreRegex?n.errorMessages.push(S(null===w.ld||void 0===w.ld?void 0:w.ld.groupPrimaryUserstoreRegexHint)):n.errorMessages.push(S("groups:groupCreateWizard.groupNameRegexCustomHint",{regex:o}))),i={filter:"displayName eq  ".concat(y,"/").concat(t),schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1},e.next=8,(0,b.tN)(i).then((function(e){var t;0!==(null==e||null===(t=e.data)||void 0===t?void 0:t.totalResults)&&(n.isValid=!1,n.errorMessages.push(S("roles:addRoleWizard.forms.roleBasicDetails.roleName.validations.duplicate",{type:"Group"})))})).catch((function(){O((0,d.V_)({description:S("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:c.QU.ERROR,message:S("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),value:null==m||null===(i=m.basicDetails)||void 0===i?void 0:i.groupName,loading:L}),p.createElement(f.kW,null,S(null===w.ld||void 0===w.ld?void 0:w.ld.groupPrimaryUserstoreRegexHint))))))};function Ae(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Pe=function(e){var t=e.triggerSubmit,n=e.onSubmit,r=e.assignedUsers,o=e.initialValues,i=e.selectedUserStore,l=e.setSelectedUserStore,s=e.onUserFetchRequestFinish,u=e["data-componentid"],m=(0,v.$)().t,g=Re((0,p.useState)([]),2),y=g[0],b=g[1],E=Re((0,p.useState)([]),2),S=E[0],w=E[1],O=Re((0,p.useState)(0),2),A=O[0],R=O[1],I=Re((0,p.useState)(void 0),2),C=I[0],U=I[1],N=Re((0,p.useState)(0),1)[0],L=Re((0,p.useState)(!0),2),x=L[0],T=L[1],j=Re((0,p.useState)(!1),1)[0],D=Re((0,p.useState)([]),2),M=D[0],z=D[1],V=(0,h.I0)();(0,p.useEffect)((function(){R(a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),U(new Map([["name","name"],["emails","emails"],["name","name"],["userName","userName"],["id",""],["profileUrl","profileUrl"],["meta.lastModified","meta.lastModified"],["meta.created",""]]))}),[]),(0,p.useEffect)((function(){z(j?y:[])}),[j]),(0,p.useEffect)((function(){if(C){var e=Z(C.values());G(null,N,null,e,i)}}),[N,A,i]),(0,p.useEffect)((function(){null!=o&&o.users&&z(null==o?void 0:o.users)}),[o]);var G=function(e,t,n,o,i){T(!0),(0,ce.F)(e,t,n,null,i).then((function(e){var t,n=null==e||null===(t=e.Resources)||void 0===t?void 0:t.filter((function(e){var t;return!(null!==(t=e[de.k.scim.systemSchema])&&void 0!==t&&t.userSourceId)}));if(n&&(n.sort((function(e,t){var n,r;return null===(n=e.name)||void 0===n||null===(n=n.givenName)||void 0===n?void 0:n.localeCompare(null===(r=t.name)||void 0===r?void 0:r.givenName)})),b(n),w(n)),r&&0!==r.length){var o=[];n&&n instanceof Array&&(n.slice().reverse().forEach((function(e){r.forEach((function(t){e.id===t.value&&(o.push(e),n.splice(n.indexOf(e),1))}))})),o.sort((function(e,t){var n,r;return null===(n=e.name)||void 0===n||null===(n=n.givenName)||void 0===n?void 0:n.localeCompare(null===(r=t.name)||void 0===r?void 0:r.givenName)})))}})).catch((function(e){var t,n,r,o,i,a,l;(b([]),w([]),null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description)?V((0,d.V_)({description:null!==(n=null!==(r=null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:m("users:notifications.fetchUsers.error.description"),level:c.QU.ERROR,message:null!==(a=null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==a?a:m("users:notifications.fetchUsers.error.message")})):V((0,d.V_)({description:m("users:notifications.fetchUsers.genericError.description"),level:c.QU.ERROR,message:m("users:notifications.fetchUsers.genericError.message")}))})).finally((function(){T(!1),s()}))},Z=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ie(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e[Symbol.iterator]());try{for(r.s();!(t=r.n()).done;){var o=t.value;""!==o&&n.push(o)}}catch(i){r.e(i)}finally{r.f()}return n.toString()};return p.createElement(p.Fragment,null,p.createElement(Oe,{"data-componentid":"add-group-form",triggerSubmit:t,initialValues:null==o?void 0:o.basic,userStore:i,setUserStore:l,onSubmit:function(e){n({basic:e,users:M})}}),x?p.createElement(ne.Z,{basic:!0},p.createElement(f.pO,{className:"p-3",active:!0})):(null==S?void 0:S.length)>0&&p.createElement(p.Fragment,null,p.createElement(f.X6,{as:"h5",className:"mt-3"},"Add Users"),p.createElement(f.kW,null,m("roles:addRoleWizard.users.assignUserModal.hint")),p.createElement(f.IX,{compact:!0,basic:!0,bordered:!0,className:"one-column-selection",selectionComponent:!0,searchPlaceholder:m("roles:addRoleWizard.users.assignUserModal.list.searchPlaceholder"),isLoading:x,handleUnelectedListSearch:function(e,t){!function(e,t,n,r){var o=[];if(!(0,_.Z)(t)){var i=new RegExp((0,k.Z)(t),"i");return null==n||n.map((function(e){(i.test(e.userName)||e.name&&i.test(e.name.givenName)||e.name&&i.test(e.name.familyName))&&o.push(e)})),void r(o)}r(n)}(0,t.value,S,b)},"data-componentid":"".concat(u,"-transfer-component")},p.createElement(f.Jv,{selectionComponent:!0,isListEmpty:!x&&(null==y?void 0:y.length)<1,isLoading:x,listType:"unselected",emptyPlaceholderContent:"We couldn't find any results for search. Please try a different search term.","data-componentid":"".concat(u,"-unselected-transfer-list"),emptyPlaceholderDefaultContent:m("transferList:list.emptyPlaceholders.default")},null==y?void 0:y.map((function(e,t){var n,r=null==e?void 0:e.userName,o=fe.QH.resolveUserListSubheader(e);return p.createElement(f.qT,{handleItemChange:function(){return t=e,void z((function(e){return e.some((function(e){return e.id===t.id}))?e.filter((function(e){return e.id!==t.id})):[].concat(Ae(e),[t])}));var t},key:t,listItem:{listItemElement:(n=r,p.createElement("div",{"data-hj-suppress":""},n)),listItemValue:r},listItemId:e.id,listItemIndex:t,isItemChecked:(null==M?void 0:M.filter((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)})).length)>0,showSecondaryActions:!1,showListSubItem:!0,listSubItem:o&&r!==o&&p.createElement(P.Z,{as:"h6"},p.createElement(P.Z.Content,null,p.createElement(P.Z.Subheader,{"data-componentid":"".concat(u,"-item-sub-heading")},o))),"data-componentid":"".concat(u,"-unselected-transfer-list-item-").concat(t)})}))))))},Ue=n(51080),Ne=n(60941),Le=n(58628),xe=n(34137),Te=function(){return{general:Ue.r,roles:Ne.r,summary:Le.r,users:xe.r}},je=function(e){return e.BASIC_DETAILS="BasicDetails",e.ROLE_LIST="RoleList",e}({});function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ge=function(e){var t,n,o,i,a=e.closeWizard,u=e.initStep,m=e.showStepper,y=e.requiredSteps,w=e.onCreate,A=e.userSelectedUserStore,R=e["data-componentid"],I=(0,v.$)().t,C=(0,h.I0)(),P=ze((0,f.IK)(),3),U=P[0],N=P[1],L=P[2],x=ze((0,j.cC)(),2),k=x[0],D=x[1],M=ze((0,j.cC)(),2),z=M[0],V=M[1],F=ze((0,p.useState)(u),2),Q=F[0],B=F[1],H=ze((0,p.useState)(void 0),2),W=H[0],J=H[1],Y=ze((0,p.useState)(void 0),2),K=Y[0],X=Y[1],ee=ze((0,p.useState)(void 0),2),te=ee[0],ne=ee[1],re=ze((0,p.useState)(null!=A?A:l.wO.primaryUserstoreName),2),oe=re[0],ce=re[1],de=ze((0,p.useState)(!1),2),fe=de[0],me=de[1],pe=ze((0,p.useState)(!0),2),ve=pe[0],he=pe[1],ge=ze((0,p.useState)(),2),ye=ge[0],be=ge[1],Ee=ze((0,p.useState)(!1),2),Se=Ee[0],we=Ee[1],Oe=ze((0,p.useState)(!1),2),Ae=Oe[0],Re=Oe[1],Ie=ze((0,p.useState)(void 0),2),Ce=Ie[0],Ue=Ie[1],Ne=(0,h.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userRoles})),Le=(0,h.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),xe=(0,h.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.isSystemRolesEditAllowed})),ke=(0,r.EV)(null==Ne||null===(t=Ne.scopes)||void 0===t?void 0:t.update),_e=(0,p.useMemo)((function(){return!(0,O.cr)(Ne,q.nL.FEATURE_DICTIONARY.get("ROLE_UPDATE"))||!ke}),[Ne,Le]),Ve=ae.l.getInstance(),Ge=(0,T.Ok)(null,null,null,"name eq Console"),Ze=Ge.data,Fe=Ge.error,Qe=null==Ze||null===(n=Ze.applications[0])||void 0===n?void 0:n.id,Be=(0,le.Z)(100,null,"audience.value ne ".concat(Qe),"users,groups,permissions,associatedApplications",!(0,_.Z)(Qe)),He=Be.data,$e=Be.error,We=(0,p.useMemo)((function(){return null!=He&&He.Resources?xe?He.Resources:He.Resources.filter((function(e){return!e.meta.systemRole})):[]}),[He]);(0,p.useEffect)((function(){_e?(ne(Xe([je.BASIC_DETAILS])),Ue(je.BASIC_DETAILS)):(ne(Xe([je.BASIC_DETAILS,je.ROLE_LIST])),Ue(je.ROLE_LIST))}),[]),(0,p.useEffect)((function(){(Fe||$e)&&C((0,d.V_)({description:I("roles:notifications.fetchRoles.genericError.description"),level:c.QU.ERROR,message:I("roles:notifications.fetchRoles.genericError.message")}))}),[Fe,$e]),(0,p.useEffect)((function(){void 0!==W&&(B(Q-1),J(void 0))}),[W]),(0,p.useEffect)((function(){ye&&Se&&Re(!0)}),[Se]),(0,p.useEffect)((function(){var e,t;null!=K&&null!==(e=K.BasicDetails)&&void 0!==e&&null!==(e=e.basic)&&void 0!==e&&null!==(e=e.basicDetails)&&void 0!==e&&e.domain&&ce(null==K||null===(t=K.BasicDetails)||void 0===t||null===(t=t.basic)||void 0===t||null===(t=t.basicDetails)||void 0===t?void 0:t.domain)}),[K]);var qe=function(e){Ve.publish("manage-groups-finish-create-new-group"),function(e){var t,n,r,o,i,l="",u=e.BasicDetails;l=oe===s.pH?null!=u&&null!==(t=u.basic)&&void 0!==t&&t.basicDetails?null==u||null===(n=u.basic)||void 0===n||null===(n=n.basicDetails)||void 0===n?void 0:n.groupName:null==u?void 0:u.groupName:null!=u&&null!==(r=u.basic)&&void 0!==r&&r.basicDetails?(null==u||null===(o=u.basic)||void 0===o||null===(o=o.basicDetails)||void 0===o?void 0:o.domain)+"/"+(null==u||null===(i=u.basic)||void 0===i||null===(i=i.basicDetails)||void 0===i?void 0:i.groupName):(null==u?void 0:u.domain)+"/"+(null==u?void 0:u.groupName);var f=[],m=null==u?void 0:u.users;(null==m?void 0:m.length)>0&&(null==m||m.forEach((function(e){null==f||f.push({display:e.userName,value:e.id})})));var p={displayName:l,members:f,schemas:["urn:ietf:params:scim:schemas:core:2.0:Group"]};me(!0),(0,b.sS)(p).then((function(t){if(201===t.status){var n,r,o=t.data,i=[];null!=e&&null!==(n=e.RoleList)&&void 0!==n&&n.roles&&(null==e||null===(r=e.RoleList)||void 0===r||r.roles.forEach((function(e){null==i||i.push(e.id)})));var l={Operations:[{op:"add",value:{groups:[{display:o.displayName,value:o.id}]}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};(null==i?void 0:i.length)>0?Promise.all(i.map((function(e){return(0,Z.ul)(e,l)}))).then((function(){C((0,d.V_)({description:I("console:manage.features.groups.notifications.createGroup.success.description"),level:c.QU.SUCCESS,message:I("console:manage.features.groups.notifications.createGroup.success.message")})),a(),S.m.push(E.$.getPaths().get("GROUP_EDIT").replace(":id",t.data.id))})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data.detail?N({description:I("console:manage.features.groups.notifications.createPermission.error.description",{description:e.response.data.detail}),level:c.QU.ERROR,message:I("console:manage.features.groups.notifications.createPermission.error.message")}):N({description:I("console:manage.features.groups.notifications.createPermission.genericError.description"),level:c.QU.ERROR,message:I("console:manage.features.groups.notifications.createPermission.genericError.message")}):N({description:I("console:manage.features.groups.notifications.createPermission.error.description"),level:c.QU.ERROR,message:I("console:manage.features.groups.notifications.createPermission.error.message")})})):(C((0,d.V_)({description:I("console:manage.features.groups.notifications.createGroup.success.description"),level:c.QU.SUCCESS,message:I("console:manage.features.groups.notifications.createGroup.success.message")})),a())}w()})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data.detail?C((0,d.V_)({description:I("console:manage.features.groups.notifications.createGroup.error.description",{description:e.response.data.detail}),level:c.QU.ERROR,message:I("console:manage.features.groups.notifications.createGroup.error.message")})):C((0,d.V_)({description:I("console:manage.features.groups.notifications.createGroup.genericError.description"),level:c.QU.ERROR,message:I("console:manage.features.groups.notifications.createGroup.genericError.message")})):C((0,d.V_)({description:I("console:manage.features.groups.notifications.createGroup.error.description"),level:c.QU.ERROR,message:I("console:manage.features.groups.notifications.createGroup.error.message")}))})).finally((function(){a(),me(!1)}))}(e)},Je=function(e,t){t!==Ce?(X(De(De({},K),{},Me({},t,e))),B(Q+1)):qe(De(De({},K),{},Me({},t,e)))},Ye=function(){switch(Q){case 0:D();break;case 1:V()}},Ke=function(){Re(!Ae),we(!1)},Xe=function(e){var t=function(e){var t=[];return e.forEach((function(e){e===je.BASIC_DETAILS&&t.push(et()),e===je.ROLE_LIST&&t.push(tt())})),t};return(null==y?void 0:y.length)<1?t(e):t((0,se.Z)(e,y))},et=function(){return{content:p.createElement(Pe,{"data-componentid":"new-group",isEdit:!1,triggerSubmit:k,selectedUserStore:oe,setSelectedUserStore:ce,initialValues:K&&K[je.BASIC_DETAILS],onSubmit:function(e){return Je(e,je.BASIC_DETAILS)},onUserFetchRequestFinish:function(){return he(!1)}}),icon:Te().general,name:je.BASIC_DETAILS,title:I("roles:addRoleWizard.wizardSteps.0")}},tt=function(){return{content:Ae?p.createElement(ie,{"data-componentid":"".concat(R,"-group-permission"),handleNavigateBack:Ke,roleId:ye}):p.createElement(G,{triggerSubmit:z,onSubmit:function(e){return Je(e,je.ROLE_LIST)},initialValues:{roleList:null!=We?We:[]},handleSetRoleId:function(e){return function(e){be(e),we(!0)}(e)}}),icon:Te().roles,name:je.ROLE_LIST,title:I("roles:addRoleWizard.wizardSteps.5")}},nt=_e?[et()]:[et(),tt()];return p.createElement(ue.Z,{open:!0,className:"wizard create-role-wizard",dimmer:"blurring",size:"small",onClose:a,closeOnDimmerClick:!1,closeOnEscape:!1,"data-componentid":R},p.createElement(ue.Z.Header,{className:"wizard-header"},I("roles:addRoleWizard.heading",{type:"Group"}),K&&null!==(o=K[je.BASIC_DETAILS])&&void 0!==o&&o.groupName?" - "+(null===(i=K[je.BASIC_DETAILS])||void 0===i?void 0:i.groupName):"",p.createElement(f.X6,{as:"h6"},I("groups:groupCreateWizard.subHeading"))),m&&!_e&&(null==nt?void 0:nt.length)>1&&p.createElement(ue.Z.Content,{className:"steps-container"},p.createElement(f.Rg.Group,{current:Q},nt.map((function(e,t){return p.createElement(f.Rg.Step,{key:t,icon:e.icon,title:e.title})})))),p.createElement(ue.Z.Content,{className:"content-container",scrolling:!0},U&&L,function(){var e,t,n;if(!te)return null;switch(null===(e=te[Q])||void 0===e?void 0:e.name){case je.BASIC_DETAILS:return null===(t=et())||void 0===t?void 0:t.content;case je.ROLE_LIST:return null===(n=tt())||void 0===n?void 0:n.content}}()),p.createElement(ue.Z.Actions,null,p.createElement($.Z,null,p.createElement($.Z.Row,{column:1},p.createElement($.Z.Column,{mobile:8,tablet:8,computer:8},p.createElement(f.Qj,{floated:"left",onClick:function(){return a()},"data-componentid":"".concat(R,"-cancel-button")},I("common:cancel"))),p.createElement($.Z.Column,{mobile:8,tablet:8,computer:8},Q<(null==te?void 0:te.length)-1&&p.createElement(f.KM,{floated:"right",onClick:Ye,disabled:ve,"data-componentid":"".concat(R,"-next-button")},I("roles:addRoleWizard.buttons.next"),p.createElement(g.Z,{name:"arrow right","data-componentid":"".concat(R,"-next-button-icon")})),Q===(null==te?void 0:te.length)-1&&p.createElement(f.KM,{floated:"right",onClick:Ye,"data-componentid":"".concat(R,"-finish-button"),disabled:ve||fe,loading:fe},I("roles:addRoleWizard.buttons.finish")),(null==te?void 0:te.length)>1&&Q>0&&p.createElement(f.Qj,{floated:"right",onClick:function(){J(Q)},"data-componentid":"".concat(R,"-previous-button"),disabled:ve},p.createElement(g.Z,{name:"arrow left","data-componentid":"".concat(R,"-previous-button-icon")}),I("roles:addRoleWizard.buttons.previous")))))))};function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Ge.defaultProps={initStep:0,showStepper:!0};var Qe=[{key:1,text:"Name",value:"name"},{key:3,text:"Created date",value:"createdDate"},{key:4,text:"Last updated",value:"lastUpdated"}];const Be=function(){var e,t=(0,h.I0)(),n=(0,v.$)().t,E=(0,f.fQ)().getLink,S=(0,u.Z)(),w=S.readOnlyUserStoreNamesList,O=S.isUserStoreReadOnly,A=S.mutateUserStoreList,R=S.userStoresList,I=(0,h.v9)((function(e){return e.config.ui.features})),C=Ze((0,p.useState)(a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),P=C[0],U=C[1],N=Ze((0,p.useState)(0),2),L=N[0],T=N[1],j=Ze((0,p.useState)(!1),2),k=j[0],_=j[1],D=Ze((0,p.useState)([]),2),M=D[0],z=D[1],V=Ze((0,p.useState)(l.wO.primaryUserstoreName),2),G=V[0],Z=V[1],F=Ze((0,p.useState)(!1),2),Q=F[0],B=F[1],H=Ze((0,p.useState)(""),2),$=H[0],W=H[1],q=Ze((0,p.useState)([]),2),J=q[0],Y=q[1],K=Ze((0,p.useState)(void 0),2),X=K[0],ee=K[1],te=Ze((0,p.useState)(Qe[0]),2),ne=te[0],re=te[1],oe=(0,b.Ug)(G,"members,roles",$,!0),ie=oe.data,ae=oe.error,le=oe.isLoading,se=oe.mutate,ue=!(null!==l.ld&&void 0!==l.ld&&l.ld.allowGroupDeleteForRemoteUserstores)&&G!==l.wO.primaryUserstoreName,ce=!(null!==l.ld&&void 0!==l.ld&&l.ld.allowGroupAddForRemoteUserstores)&&G!==l.wO.primaryUserstoreName,de=(0,p.useMemo)((function(){return O(G)}),[G,w]);(0,p.useEffect)((function(){fe()}),[]),(0,p.useEffect)((function(){var e,t=null==ie||null===(e=ie.Resources)||void 0===e?void 0:e.filter((function(e){return!e.displayName.includes("Application/")&&!e.displayName.includes("Internal/")}));Y(t),me(0,P,t)}),[ie]),(0,p.useEffect)((function(){var e,r,o,i,a,l;ae&&t((0,d.V_)({description:null!==(e=null!==(r=null==ae||null===(o=ae.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description)&&void 0!==r?r:null==ae||null===(i=ae.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==e?e:n("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:c.QU.ERROR,message:null!==(a=null==ae||null===(l=ae.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==a?a:n("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}),[ae]);var fe=function(){A();var e=[{key:-1,text:l.wO.primaryUserstoreName,value:l.wO.primaryUserstoreName}];(null==R?void 0:R.length)>0&&R.map((function(t,n){if(t.enabled&&t.name!==l.wO.primaryUserstoreName){var r={disabled:t.typeName===s.uD.RemoteUserStoreManager,key:n,text:t.name,value:t.name};e.push(r)}})),z(e)},me=function(e,t,n){ee(n?null==n?void 0:n.slice(e,t+e):[])},pe=function(e){t((0,d.V_)(e))};return p.createElement(f.Xg,{action:!le&&(null==X?void 0:X.length)>0&&!ce&&!de&&p.createElement(r.di,{when:null==I||null===(e=I.groups)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},p.createElement(f.KM,{"data-testid":"group-mgt-groups-list-add-button",onClick:function(){return _(!0)}},p.createElement(g.Z,{name:"add"}),n("roles:list.buttons.addButton",{type:"Group"}))),title:n("pages:groups.title"),pageTitle:n("pages:groups.title"),description:p.createElement(p.Fragment,null,n("pages:groups.subTitle"),p.createElement(f.eb,{link:E("manage.groups.learnMore")},n("common:learnMore")))},p.createElement(f.PS,{advancedSearch:p.createElement(o.n,{"data-testid":"group-mgt-groups-list-advanced-search",onFilter:function(e){return W(e)},filterAttributeOptions:[{key:0,text:"Name",value:"displayName"}],filterAttributePlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:n("console:manage.features.groups.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"sw",triggerClearQuery:Q,disableSearchAndFilterOptions:(null==ie?void 0:ie.totalResults)<=0&&!$}),currentListSize:P,listItemLimit:P,onItemsPerPageDropdownChange:function(e,t){U(t.value),me(L,t.value,J)},onPageChange:function(e,t){var n=(t.activePage-1)*P;T(n),me(n,P,J)},onSortStrategyChange:function(e,t){re((0,m.Z)(Qe,(function(e){return t.value===e.value})))},sortStrategy:ne,rightActionPanel:p.createElement(y.Z,{"data-testid":"group-mgt-groups-list-stores-dropdown",selection:!0,options:M&&M,placeholder:n("console:manage.features.groups.list.storeOptions"),onChange:function(e,t){Z(null==t?void 0:t.value)},defaultValue:l.wO.primaryUserstoreName}),showPagination:(null==X?void 0:X.length)>0,totalPages:Math.ceil((null==J?void 0:J.length)/P),totalListSize:null==J?void 0:J.length,isLoading:le},ae?p.createElement(f.$J,{subtitle:[n("console:manage.features.groups.placeholders.groupsError.subtitles.0"),n("console:manage.features.groups.placeholders.groupsError.subtitles.1")],title:n("console:manage.features.groups.placeholders.groupsError.title"),image:(0,i.jF)().genericError,imageSize:"tiny"}):p.createElement(x,{advancedSearch:p.createElement(o.n,{"data-testid":"group-mgt-groups-list-advanced-search",onFilter:function(e){return W(e)},filterAttributeOptions:[{key:0,text:"Name",value:"displayName"}],filterAttributePlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:n("console:manage.features.groups.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"sw",triggerClearQuery:Q,disableSearchAndFilterOptions:(null==ie?void 0:ie.totalResults)<=0&&!$}),"data-testid":"group-mgt-groups-list",handleGroupDelete:function(e){(0,b.yq)(e.id).then((function(){pe({description:n("console:manage.features.groups.notifications.deleteGroup.success.description"),level:c.QU.SUCCESS,message:n("console:manage.features.groups.notifications.deleteGroup.success.message")}),se()})).catch((function(){pe({description:n("console:manage.features.groups.notifications.deleteGroup.genericError.description"),level:c.QU.ERROR,message:n("console:manage.features.groups.notifications.deleteGroup.error.message")})}))},onEmptyListPlaceholderActionClick:function(){return _(!0)},onSearchQueryClear:function(){B(!Q),W("")},groupList:X,searchQuery:$,featureConfig:I,isReadOnlyUserStore:de,isUserstoreAddDisabled:ce,isUserstoreDeleteDisabled:ue})),k&&p.createElement(Ge,{"data-componentid":"group-mgt-create-group-wizard",closeWizard:function(){return _(!1)},onCreate:function(){return se()},requiredSteps:[je.BASIC_DETAILS,je.ROLE_LIST],userSelectedUserStore:G}))}},96646:(e,t,n)=>{n.d(t,{J:()=>r.J});var r=n(9331)},9331:(e,t,n)=>{n.d(t,{J:()=>y});var r,o=n(60486),i=n(76271),a=n(41355),l=n(38463),s=n(86105),u=n(61444),c=n(50699),d=n(46501),f=function(e,t,n){var r=t.shift(),o=n.find((function(e){return e.name===r}));return o||(o={key:e.resourcePath,name:r,title:e.displayName},n.push(o)),t.length&&f(e,t,o.children||(o.children=[])),n};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var y=v((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));r=y,h(y,"validateRoleName",(function(e){var t={filter:"displayName eq "+e,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1};return(0,d.QW)(t).then((function(e){var t;return 0===(null==e||null===(t=e.data)||void 0===t?void 0:t.totalResults)}))})),h(y,"getAllPermissions",(function(e){return(0,d.pZ)().then((function(t){if(200===t.status&&t.data&&t.data instanceof Array){var n,r,i;return(null===(n=(r=((0,c.Z)(e)?t.data:t.data.filter((function(t){return!e.includes(t.resourcePath)}))).reduce((function(e,t){return f(t,t.resourcePath.replace(/^\/|\/$/g,"").split("/"),e)}),[]))[0])||void 0===n?void 0:n.title)!==o.$.PERMISSIONS_ROOT_NODE?null===(i=r[0])||void 0===i?void 0:i.children:r}}))})),h(y,"getDisplayName",(function(e){return(null==e?void 0:e.split("/").length)>1?null==e?void 0:e.split("/")[1]:e})),h(y,"getGroupDisplayName",(function(e){return r.getDisplayName(null==e?void 0:e.display)})),h(y,"getUserUsername",(function(e){return r.getDisplayName(null==e?void 0:e.userName)})),h(y,"getUserStore",(function(e){var t,n=(0,s.cr)(null===(t=i.h.getState().config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userStores,l.u4.FEATURE_DICTIONARY.get("USER_STORE_PRIMARY"));return(null==e?void 0:e.split("/").length)>1?null==e?void 0:e.split("/")[0]:n?u.I18n.instance.t("users:userstores.userstoreOptions.primary"):null})),h(y,"getNameToDisplayOfUser",(function(e){var t,n,o,i=null===(t=e.name)||void 0===t?void 0:t.givenName,a=null===(n=e.name)||void 0===n?void 0:n.familyName,l=null===(o=e.emails)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.toString();return i&&a?"".concat(i," ").concat(a):i||(a||(l||r.getUserUsername(e)))})),h(y,"getUserManagedBy",(function(e){var t,n=null===(t=e[a.k.scim.systemSchema])||void 0===t?void 0:t.idpType;return n?n.split("/").length>1?n.split("/")[1]:n:null})),h(y,"getRoleGroupsGroupedByIdp",(function(e){var t=new Map;return(null==e?void 0:e.length)>0&&e.forEach((function(e){var n,r=e.$ref.match(/identity-providers\/([^/]+)/);n=r?r[1]:"LOCAL",t[n]||(t[n]=[]),t[n].push(e)})),t}))},6643:(e,t,n)=>{n.d(t,{F2:()=>o.F2,I_:()=>r.I_,P_:()=>o.P_,QH:()=>r.QH,t$:()=>r.t$});var r=n(22669),o=n(51318)},34763:(e,t,n)=>{n.d(t,{Z:()=>o});var r=(0,n(44194).createContext)(null);r.displayName="UserStoresContext";const o=r},58613:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(44194),o=n(34763);const i=function(){var e=(0,r.useContext)(o.Z);if(!e)throw new Error("useUserStores must be used within a UserStoresProvider");return e}},58628:(e,t,n)=>{n.d(t,{r:()=>m});var r,o,i,a,l,s,u=n(44194),c=["title","titleId"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}var f=function(e,t){var n=e.title,f=e.titleId,m=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return u.createElement("svg",d({id:"report-icon",className:"icon",width:14,height:14,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve",ref:t,"aria-labelledby":f},m),n?u.createElement("title",{id:f},n):null,r||(r=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path primary",d:"M502,208.749h-64c-5.523,0-10,4.478-10,10v50.5c0,5.522,4.477,10,10,10s10-4.478,10-10v-40.5h44V492h-22h-22V344.249 c0-5.522-4.477-10-10-10s-10,4.478-10,10V492h-20V285c0-5.522-4.477-10-10-10h-64c-5.523,0-10,4.478-10,10v207h-20V355 c0-5.522-4.477-10-10-10h-64c-5.523,0-10,4.478-10,10v137h-20v-79.625c0-5.522-4.477-10-10-10h-64c-5.523,0-10,4.478-10,10V492H30 c-5.514,0-10-4.486-10-10V30c0-5.514,4.486-10,10-10h257.975v66.003c0,16.542,13.458,30,30,30h66V239c0,5.522,4.477,10,10,10 s10-4.478,10-10V106.003c0-2.652-1.054-5.195-2.929-7.071l-96-96.003C303.17,1.054,300.627,0,297.975,0H30C13.458,0,0,13.458,0,30 v452c0,16.542,13.458,30,30,30h472c5.523,0,10-4.478,10-10V218.749C512,213.227,507.523,208.749,502,208.749z M307.975,34.143 l61.859,61.86h-51.859c-5.515,0-10-4.486-10-10V34.143z M180,492h-44v-69.625h44V492z M284,492h-44V365h44V492z M388,492h-44V295 h44V492z"})))),o||(o=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path secondary",d:"M445.07,297.82c-1.86-1.869-4.44-2.93-7.07-2.93s-5.21,1.061-7.07,2.93c-1.86,1.86-2.93,4.44-2.93,7.07 s1.07,5.21,2.93,7.07c1.86,1.859,4.44,2.93,7.07,2.93s5.21-1.07,7.07-2.93s2.93-4.44,2.93-7.07S446.93,299.68,445.07,297.82z"})))),i||(i=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path primary",d:"M145.577,54.729c-5.523,0-10,4.478-10,10v17.989c-46.031,4.997-81.975,44.097-81.975,91.435 c0,50.715,41.26,91.975,91.975,91.975c47.338,0,86.438-35.943,91.435-81.975H255c5.523,0,10-4.478,10-10 C265,108.302,211.427,54.729,145.577,54.729z M145.577,246.127c-39.687,0-71.975-32.288-71.975-71.975 c0-36.293,27.005-66.399,61.975-71.282v71.282c0,5.522,4.477,10,10,10h71.282C211.976,219.122,181.87,246.127,145.577,246.127z  M155.577,164.153v-0.001V75.228c46.852,4.702,84.222,42.073,88.924,88.925H155.577z"})))),a||(a=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path secondary",d:"M255,294.25H64c-5.523,0-10,4.478-10,10c0,5.522,4.477,10,10,10h191c5.523,0,10-4.478,10-10 C265,298.728,260.523,294.25,255,294.25z"})))),l||(l=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path primary",d:"M128,342.5H64c-5.523,0-10,4.478-10,10c0,5.522,4.477,10,10,10h64c5.523,0,10-4.478,10-10 C138,346.978,133.523,342.5,128,342.5z"})))),s||(s=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path secondary",d:"M185.15,345.43c-1.86-1.86-4.44-2.93-7.07-2.93c-2.64,0-5.21,1.069-7.07,2.93c-1.87,1.86-2.93,4.44-2.93,7.07 s1.06,5.21,2.93,7.069c1.86,1.86,4.43,2.931,7.07,2.931c2.63,0,5.21-1.07,7.07-2.931c1.86-1.859,2.93-4.439,2.93-7.069 S187.01,347.29,185.15,345.43z"})))))},m=(0,u.forwardRef)(f);n.p}}]);