"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4755],{14755:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var i=n(55007),a=n(6894),c=n(60486),l=n(40838),r=n(79408),o=n(51021),s=n(6833),d=n(82406),u=n(43516),m=n(44194),f=n(10479),p=n(47245),g=n(89141),E=n(12638),h=n(41193),v=n(62508),y=n(53103),b=n(12252),C=n(99116);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,c,l,r=[],o=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(i=c.call(n)).done)&&(r.push(i.value),r.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var S=function(e){var t,n=e.attributeType,A=e.attributeUri,S=e.mappedLocalClaims,R=e.isAttributeButtonEnabled,w=e.attributeButtonText,T=e.updateMappedClaims,D=e["data-testid"],U=e.id,k=Z((0,m.useState)(null),2),I=k[0],M=k[1],_=Z((0,m.useState)(void 0),2),x=_[0],L=_[1],O=Z((0,m.useState)(!0),2),V=O[0],Q=O[1],j=Z((0,m.useState)(!1),2),B=j[0],H=j[1],P=(0,p.I0)(),$=(0,f.$)().t,z=(0,p.v9)((function(e){return e.config.ui.features})),F=function(e){(0,a.vR)(null!=e?e:U).then((function(e){M(e)})).catch((function(e){P((0,d.V_)({description:(null==e?void 0:e.description)||$("claims:dialects.notifications.fetchADialect.genericError.description"),level:s.QU.ERROR,message:(null==e?void 0:e.message)||$("claims:dialects.notifications.fetchADialect.genericError.message")}))}))};(0,m.useEffect)((function(){U&&F()}),[U]);var N=function(e,t,i,c){U&&Q(!0),U&&L(void 0),U&&(0,a.gR)(U,{filter:c,limit:e,offset:t,sort:i}).then((function(e){var t=o.rk.attributeMappings.getExternalAttributes(n,e);L((0,r.f)(t,"claimURI",!0))})).catch((function(e){var t,i;P((0,d.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||$("claims:dialects.notifications.fetchExternalClaims.genericError.description",{type:(0,C.i)(n)}),level:s.QU.ERROR,message:(null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.message)||$("claims:dialects.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){Q(!1)}))};(0,m.useEffect)((function(){N()}),[U]);var J=function(e){(0,a.Nx)(e).then((function(){l.m.push(c.$.getPaths().get("CLAIM_DIALECTS")),P((0,d.V_)({description:$("claims:dialects.notifications.deleteDialect.success.description",{type:(0,C.i)(n,!0)}),level:s.QU.SUCCESS,message:$("claims:dialects.notifications.deleteDialect.success.message")}))})).catch((function(e){P((0,d.V_)({description:(null==e?void 0:e.description)||$("claims:dialects.notifications.deleteDialect.genericError.description",{type:(0,C.i)(n,!0)}),level:s.QU.ERROR,message:(null==e?void 0:e.message)||$("claims:dialects.notifications.deleteDialect.genericError.message")}))}))};return m.createElement(m.Fragment,null,o.rk.attributeMappings.editAttributeMappingDetails&&m.createElement(m.Fragment,null,m.createElement(g.Z,null,m.createElement(g.Z.Row,{columns:1},m.createElement(g.Z.Column,{width:16},m.createElement(E.Z,{as:"h4"},$("claims:dialects.pageLayout.edit.updateDialectURI",{type:(0,C.i)(n,!0)})),m.createElement(u.pJ,null,V?m.createElement(h.Z,null,m.createElement(h.Z.Line,{length:"short"}),m.createElement(h.Z.Line,{length:"medium"})):m.createElement(y.T8,{dialect:I,"data-testid":"".concat(D,"-edit-dialect-details"),attributeType:n,onUpdate:function(e){F(e)}}))))),m.createElement(v.Z,{hidden:!0}),m.createElement(g.Z,{columns:1},m.createElement(g.Z.Column,{width:16},m.createElement(E.Z,{as:"h4"},$("claims:dialects.pageLayout.edit.updateExternalAttributes",{type:(0,C.i)(n,!0)})))),m.createElement(v.Z,{hidden:!0}),m.createElement(v.Z,{hidden:!0})),m.createElement(y._v,{dialectID:U,isLoading:V,claims:x,update:N,"data-testid":"".concat(D,"-edit-external-claims"),attributeType:n,attributeUri:A,mappedLocalClaims:S,updateMappedClaims:T,isAttributeButtonEnabled:R,attributeButtonText:w}),m.createElement(v.Z,{hidden:!0}),o.rk.attributeMappings.showDangerZone&&!b.Q.SYSTEM_DIALECTS.includes(null==I?void 0:I.id)&&m.createElement(g.Z,null,m.createElement(g.Z.Row,{columns:1},m.createElement(g.Z.Column,{width:16},m.createElement(i.di,{when:null==z||null===(t=z.oidcScopes)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.delete},m.createElement(u.v9,{sectionHeader:$("common:dangerZone"),"data-testid":"".concat(D,"-danger-zone-group")},m.createElement(u.cN,{actionTitle:$("claims:dialects.dangerZone.actionTitle",{type:(0,C.i)(n,!0,!0)}),header:$("claims:dialects.dangerZone.header",{type:(0,C.i)(n,!0)}),subheader:$("claims:dialects.dangerZone.subheader",{type:(0,C.i)(n)}),onActionClick:function(){return H(!0)},"data-testid":"".concat(D,"-dialect-delete-danger-zone")})))))),o.rk.attributeMappings.showDangerZone&&B&&m.createElement(u.cV,{onClose:function(){return H(!1)},type:"negative",open:B,assertion:I.dialectURI,assertionHint:m.createElement("p",null,"Please type ",m.createElement("strong",null,I.dialectURI)," to confirm."),assertionType:"input",primaryAction:$("claims:dialects.confirmations.action"),secondaryAction:$("common:cancel"),onSecondaryActionClick:function(){return H(!1)},onPrimaryActionClick:function(){return J(I.id)},"data-testid":"".concat(D,"-delete-confirmation-modal"),closeOnDimmerClick:!1},m.createElement(u.cV.Header,{"data-testid":"".concat(D,"-delete-confirmation-modal-header")},$("claims:dialects.confirmations.header")),m.createElement(u.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(D,"-delete-confirmation-modal-message")},$("claims:dialects.confirmations.message")),m.createElement(u.cV.Content,{"data-testid":"".concat(D,"-delete-confirmation-modal-content")},$("claims:dialects.confirmations.content",{type:(0,C.i)(n)}))))};S.defaultProps={attributeType:b.Q.OTHERS,"data-testid":"external-dialect-edit"};const R=S}}]);