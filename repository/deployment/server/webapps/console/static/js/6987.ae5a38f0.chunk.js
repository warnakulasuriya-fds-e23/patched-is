"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6987],{46987:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$e});var r=n(9779),o=n(55007),a=n(43516),i=n(44194),l=n(10479),c=n(47245),s=n(63033),u=n(1989),m=n(26154),d=n(37077),p=n(57438),f=n(84882),v=n(46461),g=n(3658),E=n(77659),y=n(89801),T=n(73399),h=n(89497),S=n(37612),b=n(12887),x=n(58934),w=n(10909);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const O=function(e){var t=e.value,n=N((0,i.useState)("copy"),2),r=n[0],o=n[1],c=(0,i.useRef)(null),s=(0,l.$)().t;return(0,i.useEffect)((function(){return function(){return clearTimeout(c.current)}}),[]),i.createElement(a.GI,{trigger:i.createElement(w.Z,{size:"mini",basic:!0,icon:!0,compact:!0,onClick:function(){o("check"),navigator.clipboard.writeText(t),c.current=setTimeout((function(){return o("copy")}),3e3)}},"copy"===r?i.createElement(m.Z,{name:"copy outline"}):i.createElement(m.Z,{name:"check"})),inverted:!0,content:i.createElement("small",null,s("extensions:develop.monitor.tooltips.copy"))})};var C=n(41193),_=function(){return i.createElement("div",{className:"log-row"},i.createElement("div",{className:"log-time-container"},i.createElement(C.Z,{fluid:!0},i.createElement(C.Z.Line,null))),i.createElement("div",{className:"log-description-container"},i.createElement("div",{className:"log-desc-loader"},i.createElement(C.Z,{fluid:!0},i.createElement(C.Z.Line,null)))))};const A=function(){return i.createElement(i.Fragment,null,i.createElement(_,null),i.createElement(_,null))};var G=function(e){return e[e.DIAGNOSTIC_LOGS=0]="DIAGNOSTIC_LOGS",e[e.AUDIT_LOGS=1]="AUDIT_LOGS",e}({}),R=function(e){return e.SUCCESS="SUCCESS",e.FAILED="FAILED",e}({}),k=n(84025),M=n.n(k),Z=function(e){return e?M()(e).format("kk:mm:ss"):"N/A"},D=function(e){var t=new Date,n="".concat(t.toLocaleString("en-US",{timeZone:e.split(" ")[1]}))+" ".concat(e.split(" ")[0]);return Date.parse(n)},L=function(e,t,n,r){var o=new Date,a=n[0],i=(60*parseInt(n.slice(1,3),10)+parseInt(n.slice(3,5),10))*("+"===a?1:-1),l=o.getUTCHours(),c=o.getUTCMinutes()+i,s=(c%60+60)%60,u=((l+Math.floor(c/60)+24)%24).toString().padStart(2,"0"),m=s.toString().padStart(2,"0"),d="".concat(u,":").concat(m),p=o.toISOString().split("T")[0];return e===t||e===p?null!=r?r:d:"23:59"},j=function(e,t){var n=new Date,r=t[0],o=(60*parseInt(t.slice(1,3),10)+parseInt(t.slice(3,5),10))*("+"===r?1:-1),a=n.getUTCHours(),i=n.getUTCMinutes()+o,l=(i%60+60)%60,c=((a+Math.floor(i/60)+24)%24).toString().padStart(2,"0"),s=l.toString().padStart(2,"0"),u="".concat(c,":").concat(s);return e===n.toISOString().split("T")[0]?u:"23:59"},F=n(51835),U=n.n(F),H=n(27975),P=n.n(H),$=n(55900),z=n.n($),J=n(21555),B=n.n(J),q=n(3621),Y=n.n(q),Q=n(5062),V=n.n(Q),W=n(87567),K={};K.styleTagTransform=V(),K.setAttributes=B(),K.insert=z().bind(null,"head"),K.domAPI=P(),K.insertStyleElement=Y();U()(W.Z,K);W.Z&&W.Z.locals&&W.Z.locals;function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function ee(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var oe=(0,i.lazy)((function(){return Promise.resolve().then(n.bind(n,52962))})),ae=function(e){var t=e["data-componentid"],n=e.handleScroll,r=e.scrollRef,o=e.logs,c=e.loading,s=e.rowHeight,u=e.logCount,d=e.logType,w=e.setSearchQuery,N=(0,l.$)().t,I=te((0,i.useState)([-1]),2),C=I[0],_=I[1],k=te((0,i.useState)(!1),2),D=k[0],L=k[1],j=te((0,i.useState)(),2),F=j[0],U=j[1];(0,i.useEffect)((function(){o.length>0&&o.length<=u&&(r.current.scrollTop=s*(u-(u-1))),_([-1])}),[o]);var H=function(e,t){var n,r=t.index;n=C.indexOf(r)>-1?C.filter((function(e){return e!==r})):[].concat(ee(C),[r]),_(n)},P=function(){L(!1),U(null)},$=function(e){var n=[],r=function(r){if("id"===r||"componentId"===r)return 1;if(e[r])if("string"==typeof e[r])"recordedAt"===r?n.push(i.createElement("tr",null,i.createElement("td",{className:"log-property"},r,":"),i.createElement("td",null,(c=e[r])?M()(c).format("DD MMM, YYYY | kk:mm:ss"):"N/A"))):"resultStatus"===r?n.push(i.createElement("tr",null,i.createElement("td",{className:"log-property"},r,":"),i.createElement("td",null,e[r]))):"requestId"===r?n.push(i.createElement("tr",null,i.createElement("td",{className:"log-property"},"traceId:"),i.createElement("td",null,i.createElement(a.GI,{trigger:i.createElement("span",null,e[r].slice(0,32)),content:i.createElement("small",null,e[r])}),"...\xa0\xa0",i.createElement(m.Z.Group,{className:"icon-button",onClick:function(){w({property:"traceId",value:e[r]})}},i.createElement(m.Z,{name:"filter",color:"green"}),i.createElement(m.Z,{corner:!0,name:"add",color:"green"})),i.createElement(O,{value:e[r]})))):n.push(i.createElement("tr",null,i.createElement("td",{className:"log-property"},r,":"),i.createElement("td",null,e[r],"\xa0\xa0",i.createElement(m.Z.Group,{className:"icon-button",onClick:function(){w({property:r,value:e[r]})}},i.createElement(m.Z,{name:"filter",color:"green"}),i.createElement(m.Z,{corner:!0,name:"add",color:"green"})))));else if("object"===X(e[r]))if("data"===r)n.push(i.createElement("tr",null,i.createElement("td",{className:"log-property"},r,":"),i.createElement("td",{className:"view-data-button"},i.createElement(y.Z,{"data-testid":"".concat(t,"-").concat(e.id,"-view-data-button"),"data-componentid":"".concat(t,"-view-data-button"),underline:"hover",onClick:function(){return function(e){U(e),L(!0)}(e)}},i.createElement(S.tE,{className:"topic"}),N("extensions:develop.monitor.filter.viewButton.label")))));else{var o=function(t){"string"==typeof e[r][t]?n.push(i.createElement("tr",null,i.createElement("td",{className:"log-property"},t,":"),i.createElement("td",null,e[r][t],"\xa0\xa0",i.createElement(m.Z.Group,{className:"icon-button",onClick:function(){w({property:t,value:e[r][t]})}},i.createElement(m.Z,{name:"filter",color:"green"}),i.createElement(m.Z,{corner:!0,name:"add",color:"green"}))))):n.push(i.createElement("tr",null,i.createElement("td",{className:"log-property"},t,":"),i.createElement("td",null,JSON.stringify(e[r][t],null,10))))};for(var l in e[r])o(l)}var c};for(var o in e)r(o);return n},z=i.createElement(oe,{loading:i.createElement(g.Z,null),className:"log-data-viewer",width:"100%",height:"100%",language:"javascript",theme:"vc",value:F?JSON.stringify(F.data,null,2):"{}",options:{automaticLayout:!0,readOnly:!0},"data-componentid":"".concat(t,"-data-viewer")}),J=i.createElement(f.Z,{className:"log-data-viewer-toolbar-container","data-componentid":"".concat(t,"-toolbar-container")},i.createElement(T.Z,{variant:"dense"},i.createElement(f.Z,null,i.createElement(h.Z,null,N("extensions:develop.monitor.logView.logDataviewer.panelName"))),i.createElement(f.Z,{className:"actions"},i.createElement(v.Z,{className:"data-viewer-buttons","data-componentid":"".concat(t,"-log-data-viewer-panel-download-button"),onClick:function(){var e=new Blob([JSON.stringify(F.data,null,2)],{type:"application/json"});(0,b.saveAs)(e,"log_data_"+F.id+".json")},startIcon:i.createElement(S._8,null)},N("extensions:develop.monitor.logView.logDataviewer.download")),i.createElement(v.Z,{"data-componentid":"".concat(t,"-log-data-viewer-panel-copy-button"),className:"data-viewer-buttons",onClick:function(){navigator.clipboard.writeText(JSON.stringify(F.data,null,2))},startIcon:i.createElement(S.TI,null)},N("extensions:develop.monitor.logView.logDataviewer.copy")),i.createElement(E.Z,{"data-componentid":"".concat(t,"-log-data-viewer-panel-close-button"),size:"small",onClick:P},i.createElement(S.DX,null)))));return i.createElement("div",{className:"main-container","data-componentid":"".concat(t,"-main-container")},i.createElement("div",{className:"ui fluid container scroll-container",onScroll:n,ref:r},i.createElement("div",{className:"edge-container"}),c&&i.createElement(A,null),!c&&d===G.AUDIT_LOGS&&i.createElement("div",{className:"log-header"},i.createElement("div",{className:"log-Recordedtime"},i.createElement(h.Z,{variant:"body1"},N("extensions:develop.monitor.logView.headers.recordedAt"))),i.createElement("div",{className:"log-description-header"},i.createElement("div",{className:"log-actionId"},i.createElement(h.Z,{variant:"body1"},N("extensions:develop.monitor.logView.headers.actionId"))),i.createElement("div",{className:"log-targetId"},i.createElement(h.Z,{variant:"body1"},N("extensions:develop.monitor.logView.headers.targetId"))))),i.createElement(x.Z,{"data-componentid":"".concat(t,"-log-entries-wrapper"),exclusive:!1,fluid:!0},o.map((function(e,n){return i.createElement("div",{key:n},i.createElement(x.Z.Title,{active:C.includes(n),index:n,onClick:H,style:{padding:"0px"}},i.createElement("div",{className:"log-row"},i.createElement(m.Z,{name:"dropdown","data-componentid":"".concat(t,"-dropdown-button")}),i.createElement("div",{className:"log-time-container"},(r=e.recordedAt)?M()(r).format("DD MMM, YYYY"):"N/A",i.createElement("span",{className:"log-time"},"\xa0|\xa0",Z(e.recordedAt))),i.createElement("div",{className:"log-description-container"},d===G.DIAGNOSTIC_LOGS&&i.createElement("div",{className:"log-message-container"},function(e){switch(e){case R.SUCCESS:return i.createElement(m.Z,{name:"check circle",color:"green"});case R.FAILED:return i.createElement(m.Z,{name:"close",color:"red"});default:return i.createElement(i.Fragment,null)}}(function(e){switch(e){case"SUCCESS":default:return R.SUCCESS;case"FAILED":return R.FAILED}}(e.resultStatus)),"auth-script-logging"===e.actionId&&i.createElement(m.Z,{name:"code"}),e.resultMessage.length>60?i.createElement(a.GI,{inverted:!0,trigger:i.createElement("span",null,"".concat(e.resultMessage.slice(0,60),"...")),content:i.createElement("small",null,N("extensions:develop.monitor.logView.toolTips.seeMore")),position:"bottom right",size:"mini"}):e.resultMessage),d===G.AUDIT_LOGS&&i.createElement("div",null,e.actionId&&i.createElement("div",{className:"log-actionid-container"},e.actionId),e.action&&i.createElement("div",{className:"log-actionid-container"},e.action)),d===G.DIAGNOSTIC_LOGS&&i.createElement("div",null,e.actionId&&i.createElement("div",{className:"log-actionid-container"},e.actionId),e.action&&i.createElement("div",{className:"log-actionid-container"},e.action)),d===G.AUDIT_LOGS&&i.createElement("div",null,i.createElement("div",null,e.targetId&&i.createElement("div",{className:"log-targetId-container"},e.targetId)))))),i.createElement(x.Z.Content,{active:C.includes(n)},$(e).map((function(e,t){return i.createElement("table",{className:"log-expanded-view",key:t},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null),i.createElement("th",null))),i.createElement("tbody",null,e))}))));var r}))),D&&i.createElement(i.Suspense,{fallback:i.createElement(g.Z,null)},i.createElement("div",{className:"log-data-viewer-panel"},i.createElement(p.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:D,onClose:P},i.createElement(f.Z,{className:"full-screen-log-data-viewer-container"},J,z)))),c&&i.createElement(A,null),i.createElement("div",{className:"edge-container"})))};ae.defaultProps={"data-componentid":"logs-container"};const ie=ae;var le=n(47625),ce=n(69875),se=n(19980),ue=n(77757),me=n(12950),de=n(61444);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ee(r.key),r)}}function ve(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(e,t,n){return(t=Ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}var ye=ve((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));ge(ye,"LOG_FETCH_COUNT",100),ge(ye,"LOG_ROW_HEIGHT",48),ge(ye,"DELAY_MESSEGE_TIMEOUT",15e3),ge(ye,"REFRESH_BUTTON_TIMEOUT",12e4),ge(ye,"TIME_ZONE_DATA",[{key:0,text:"(GMT+00:00) UTC",value:"+0000"},{key:1,text:"(GMT+01:00) ECT",value:"+0100"},{key:2,text:"(GMT+02:00) EET",value:"+0200"},{key:3,text:"(GMT+02:00) ART",value:"+0200"},{key:4,text:"(GMT+03:00) EAT",value:"+0300"},{key:5,text:"(GMT+03:30) MET",value:"+0330"},{key:6,text:"(GMT+04:00) NET",value:"+0400"},{key:7,text:"(GMT+05:00) PLT",value:"+0500"},{key:8,text:"(GMT+05:30) IST",value:"+0530"},{key:9,text:"(GMT+06:00) BST",value:"+0600"},{key:10,text:"(GMT+07:00) VST",value:"+0700"},{key:11,text:"(GMT+08:00) CTT",value:"+0800"},{key:12,text:"(GMT+09:00) JST",value:"+0900"},{key:13,text:"(GMT+09:30) ACT",value:"+0930"},{key:14,text:"(GMT+10:00) AET",value:"+1000"},{key:15,text:"(GMT+11:00) SST",value:"+1100"},{key:16,text:"(GMT+12:00) NST",value:"+1200"},{key:17,text:"(GMT-11:00) MIT",value:"-1100"},{key:18,text:"(GMT-10:00) HST",value:"-1000"},{key:19,text:"(GMT-09:00) AST",value:"-0900"},{key:20,text:"(GMT-08:00) PST",value:"-0800"},{key:21,text:"(GMT-07:00) PNT",value:"-0700"},{key:22,text:"(GMT-07:00) MST",value:"-0700"},{key:23,text:"(GMT-06:00) CST",value:"-0600"},{key:24,text:"(GMT-05:00) EST",value:"-0500"},{key:25,text:"(GMT-05:00) IET",value:"-0500"},{key:26,text:"(GMT-04:00) PRT",value:"-0400"},{key:27,text:"(GMT-03:30) CNT",value:"-0330"},{key:28,text:"(GMT-03:00) AGT",value:"-0300"},{key:29,text:"(GMT-03:00) BET",value:"-0300"},{key:30,text:"(GMT-01:00) CAT",value:"-0100"}]),ge(ye,"TIMERANGE_DROPDOWN_OPTIONS",[{key:0,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.0"),value:.25},{key:1,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.1"),value:.5},{key:2,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.2"),value:1},{key:3,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.3"),value:4},{key:4,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.4"),value:12},{key:5,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.5"),value:24},{key:6,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.6"),value:48},{key:7,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.7"),value:72},{key:8,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.8"),value:168},{key:9,text:de.I18n.instance.t("extensions:develop.monitor.filter.dropdowns.timeRange.texts.9"),value:-1}]),ge(ye,"END_TIME_GREATER_THAN_START_TIME_ERROR_CODE","LM-10008"),ge(ye,"START_TIME_GREATER_THAN_CURRENT_TIME_ERROR_CODE","LM-10009");const Te=ye;var he=Te.TIME_ZONE_DATA;const Se=function(e){var t=e.getTimeZone,n=e.selectedTimeZone,r=(0,l.$)().t;return i.createElement(le.Z,{search:!0,selection:!0,placeholder:r("extensions:develop.monitor.filter.dropdowns.timeZone.placeholder"),value:n,options:he,onChange:function(e,n){var r=n.value;t(r)}})};function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const we=function(e){var t,n,r,o,a,c,s,u=e["data-componentid"],d=e.setToTime,p=e.setFromTime,f=e.setTimeRange,v=be((0,i.useState)(!1),2),g=v[0],E=v[1],y=be((0,i.useState)(""),2),T=y[0],h=y[1],S=be((0,i.useState)(""),2),b=S[0],x=S[1],N=be((0,i.useState)(""),2),I=N[0],O=N[1],C=be((0,i.useState)(""),2),_=C[0],A=C[1],G=be((0,i.useState)(.25),2),R=G[0],k=G[1],M=be((0,i.useState)(.25),2),Z=M[0],D=M[1],F=be((0,i.useState)((t=(new Date).getTimezoneOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60,a=t<=0?"+":"-",c=String(r).padStart(2,"0"),s=String(o).padStart(2,"0"),"".concat(a).concat(c).concat(s))),2),U=F[0],H=F[1],P=be((0,i.useState)(void 0),2),$=P[0],z=P[1],J=(0,l.$)().t,B=new Date,q=new Date,Y=new Date(B.setDate(B.getDate()-30)),Q=function(e){return e.toLocaleDateString("en-GB").split("/").reverse().join("-")},V=function(){I&&_&&T&&b||k(Z),E(!1)};return i.createElement("div",{className:"time-range-selector-wrapper"},i.createElement(le.Z,{scrolling:!0,pointing:"top right",open:$,options:Te.TIMERANGE_DROPDOWN_OPTIONS,onOpen:function(){return z(!0)},onClose:function(){return z(!1)},onChange:function(e,t){var n=t.value;if(f(n),k(n),-1!==n){D(n),h(""),O(""),x(""),A("");var r=(new Date).getTime();d(r.toString()),p((r-36e5*n).toString())}else E(!0)},onClick:V,value:R,"data-componentid":"".concat(u,"-timerange-dropdown")}),i.createElement("span",{hidden:-1!==R},i.createElement(m.Z,{name:g?"close":"calendar alternate",className:"icon-btn",color:"grey",onClick:g?V:function(){return E(!g)}})),i.createElement(ce.Z,{onOpen:function(){return E(!0)},open:g},i.createElement(se.Z,{className:"custom-portal-wrapper"},i.createElement("div",{className:"main-container",onClick:function(e){return e.stopPropagation()}},i.createElement(ue.Z,{className:"date-picker-form",onSubmit:function(e){e.preventDefault();var t=new Date("".concat(T,"T").concat(I).concat(U)).getTime().toString(),n=new Date("".concat(b,"T").concat(_).concat(U)).getTime().toString();p(t),d(n),E(!1)}},i.createElement(ue.Z.Group,null,i.createElement(ue.Z.Field,{width:16},i.createElement("label",null,J("extensions:develop.monitor.filter.dropdowns.timeRange.custom.labels.timeZone")),i.createElement(Se,{getTimeZone:H,selectedTimeZone:U}))),i.createElement(ue.Z.Group,null,i.createElement(ue.Z.Field,{width:16},i.createElement("label",null,J("extensions:develop.monitor.filter.dropdowns.timeRange.custom.labels.from")),i.createElement("div",{className:"date-time-picker-row"},i.createElement("div",null,i.createElement(me.Z,{className:"date-input",type:"date",value:T,min:Q(Y),max:Q(q),onChange:function(e){return h(e.target.value)},required:!0})),i.createElement("div",null,i.createElement(me.Z,{className:"time-input",type:"time",max:L(T,b,U,_),value:I,onChange:function(e){return O(e.target.value)},required:!0}))))),i.createElement(ue.Z.Group,null,i.createElement(ue.Z.Field,{width:16},i.createElement("label",null,J("extensions:develop.monitor.filter.dropdowns.timeRange.custom.labels.to")),i.createElement("div",{className:"date-time-picker-row"},i.createElement("div",null,i.createElement(me.Z,{className:"date-input",type:"date",min:T||Q(Y),max:Q(q),value:b,onChange:function(e){return x(e.target.value)},required:!0})),i.createElement("div",null,i.createElement(me.Z,{className:"time-input",type:"time",max:j(b,U),value:_,onChange:function(e){return A(e.target.value)},required:!0}))))),i.createElement(ue.Z.Group,null,i.createElement(ue.Z.Field,{width:16},i.createElement(w.Z,{fluid:!0,icon:"check",type:"submit"}))))))))};var Ne=n(96124),Ie=n(76271),Oe=n(6833);const Ce=function(e){var t=function(e){var t={data:e,headers:{"Content-Type":"application/json"},method:Oe.f2.POST,url:0===(null==e?void 0:e.logType)?Ie.h.getState().config.endpoints.diagnosticLogsEndpoint:Ie.h.getState().config.endpoints.auditLogsEndpoint};return(0,Ne.Z)(e?t:null)}(e),n=t.data,r=t.error,o=t.isValidating;return{error:r,list:(null==n?void 0:n.logs)||[],loading:o,next:(null==n?void 0:n.nextToken)||null,previous:(null==n?void 0:n.previousToken)||null}};function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ge=function(e){var t=e["data-componentid"],n=_e((0,i.useState)(!1),2),r=n[0],o=n[1],c=_e((0,i.useState)(!1),2),s=c[0],p=c[1],f=_e((0,i.useState)(""),2),v=f[0],g=f[1],E=_e((0,i.useState)(""),2),y=E[0],T=E[1],h=_e((0,i.useState)(""),2),S=h[0],b=h[1],x=_e((0,i.useState)(""),2),w=x[0],N=x[1],I=_e((0,i.useState)(""),2),O=I[0],C=I[1],_=_e((0,i.useState)(.25),2),A=_[0],R=_[1],k=_e((0,i.useState)(new Map),2),M=k[0],L=k[1],j=_e((0,i.useState)([]),2),F=j[0],U=j[1],H=_e((0,i.useState)(null),2),P=H[0],$=H[1],z=_e((0,i.useState)(!1),2),J=z[0],B=z[1],q=_e((0,i.useState)(!1),2),Y=q[0],Q=q[1],V=_e((0,i.useState)(""),2),W=V[0],K=V[1],X=_e((0,i.useState)(.25),2),ee=X[0],te=X[1],ne=_e((0,i.useState)(!1),2),re=ne[0],oe=ne[1],ae=_e((0,i.useState)(!1),2),le=ae[0],ce=ae[1],se=_e((0,i.useState)([]),2),ue=se[0],me=se[1],de=(0,l.$)().t,pe="GMT+0000 UTC";(0,i.useEffect)((function(){setTimeout((function(){Q(!0)}),Te.DELAY_MESSEGE_TIMEOUT),-1===A?B(!1):(B(!0),le||(ce(!0),setTimeout((function(){oe(!0),ce(!1)}),Te.REFRESH_BUTTON_TIMEOUT)))}),[W]),(0,i.useEffect)((function(){oe(!1)}),[w,O,S,y]),(0,i.useEffect)((function(){var e=D(pe),t=e.toString(),n=(e-36e5*A).toString();N(t),C(n),K(t),$({endTime:t,filter:"",limit:Te.LOG_FETCH_COUNT,logType:G.AUDIT_LOGS,startTime:n})}),[]);var fe=(0,i.useRef)(null),ve=Ce(P),ge=ve.error,Ee=ve.list,ye=ve.loading,he=ve.next,Se=ve.previous;(0,i.useEffect)((function(){me(Ee)}),[Ee]);var be=function(e){var t=e.target;Q(!1),0===t.scrollTop&&(Se?($({filter:v,limit:Te.LOG_FETCH_COUNT,previousToken:Se}),o(!1),p(!1)):o(!0)),t.scrollHeight-t.scrollTop===t.clientHeight&&(he?($({filter:v,limit:Te.LOG_FETCH_COUNT,nextToken:he}),p(!1),o(!1)):p(!0))},xe=function(){var e="";M.forEach((function(t){e=e?"".concat(e," and logentry co '").concat(t,"'"):"logentry co '".concat(t,"'")})),T(e)},Ne=function(){var e="";0===S.length?e=S:(e="logentry co '".concat(S,"'"),y&&(e=" and ".concat(e))),g(e);var t=O,n=w,r=D(pe);-1!==A&&(n=r.toString(),t=(r-36e5*A).toString()),Q(!1),K(r.toString()),te(A),$({endTime:n,filter:"".concat(y).concat(e),limit:Te.LOG_FETCH_COUNT,logType:G.AUDIT_LOGS,startTime:t})},Ie=function(){g(""),b(""),oe(!1)},Oe=function(e){var t=M;t.set(e.property,e.value),L(t),xe();var n=[];t.forEach((function(e,t){n.push({key:t,value:e})})),U(n)},Ae=function(e){var t=M;t.delete(e),L(t),xe();var n=[];t.forEach((function(e,t){n.push({key:t,value:e})})),U(n)},Ge=function(){var e=M;e.clear(),L(e),xe(),U([])},Re=function(){return i.createElement("form",{className:"advance-search-form",onSubmit:function(e){e.preventDefault()}},i.createElement("div",{className:"search-input-wrapper"},i.createElement("div",{className:"search-box ui action left icon input advanced-search with-add-on"},i.createElement("input",{autoComplete:"off",placeholder:de("extensions:develop.monitor.filter.searchBar.placeholderAudit"),maxLength:120,name:"query",type:"text",className:"search-input",value:S,onChange:function(e){return b(e.target.value)},"data-componentid":"".concat(t,"-search-input")}),i.createElement(m.Z,{name:"search",color:"grey"})),i.createElement("div",{className:"search-box-addons",hidden:!S},i.createElement(m.Z,{name:"close",color:"grey",onClick:Ie,className:"icon-button"})),i.createElement("input",{hidden:!0,type:"submit",value:"Submit","data-componentid":"".concat(t,"-search-input-submit")})))},ke=function(){var e,n,o;return ge?(null==ge||null===(e=ge.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.code)===Te.END_TIME_GREATER_THAN_START_TIME_ERROR_CODE?i.createElement(a.$J,{subtitle:[de("extensions:develop.monitor.notifications.endTimeGreaterThanStartTimeError.subtitle.0"),de("extensions:develop.monitor.notifications.endTimeGreaterThanStartTimeError.subtitle.1")],title:de("extensions:develop.monitor.notifications.endTimeGreaterThanStartTimeError.title"),image:(0,u.jF)().genericError,imageSize:"tiny","data-componentid":"".concat(t,"-end-time-greater-than-start-time-error-placeholder")}):(null==ge||null===(n=ge.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code)===Te.START_TIME_GREATER_THAN_CURRENT_TIME_ERROR_CODE?i.createElement(a.$J,{subtitle:[de("extensions:develop.monitor.notifications.startTimeGreaterThanCurrentError.subtitle.0"),de("extensions:develop.monitor.notifications.startTimeGreaterThanCurrentError.subtitle.1")],title:de("extensions:develop.monitor.notifications.startTimeGreaterThanCurrentError.title"),image:(0,u.jF)().genericError,imageSize:"tiny","data-componentid":"".concat(t,"-start-time-greater-than-current-time-error-placeholder")}):i.createElement(a.$J,{subtitle:[de("extensions:develop.monitor.notifications.genericError.subtitle.0"),de("extensions:develop.monitor.notifications.genericError.subtitle.1")],title:de("extensions:develop.monitor.notifications.genericError.title"),image:(0,u.jF)().genericError,imageSize:"tiny","data-componentid":"".concat(t,"-generic-error-placeholder")}):v&&0===Ee.length?i.createElement(a.$J,{action:i.createElement(a.Qj,{onClick:Ie},de("extensions:develop.monitor.notifications.emptySearchResult.actionLabel")),image:(0,u.jF)().emptySearch,imageSize:"tiny",title:de("extensions:develop.monitor.notifications.emptySearchResult.title"),subtitle:[de("extensions:develop.monitor.notifications.emptySearchResult.subtitle.0"),de("extensions:develop.monitor.notifications.emptySearchResult.subtitle.1")],"data-componentid":"".concat(t,"-empty-search-placeholder")}):y&&0===(null==Ee?void 0:Ee.length)?i.createElement(a.$J,{action:i.createElement(a.Qj,{onClick:Ge},de("extensions:develop.monitor.notifications.emptyFilterResult.actionLabel")),image:(0,u.jF)().emptySearch,imageSize:"tiny",title:de("extensions:develop.monitor.notifications.emptyFilterResult.title"),subtitle:[de("extensions:develop.monitor.notifications.emptyFilterResult.subtitle.0"),de("extensions:develop.monitor.notifications.emptyFilterResult.subtitle.1")],"data-componentid":"".concat(t,"-empty-filter-placeholder")}):0!==(null==Ee?void 0:Ee.length)||he&&Se||ye?i.createElement(i.Fragment,null,ye&&Y&&i.createElement("div",{className:"audit-logs-delay-message"},i.createElement(a.v0,{type:"info",compact:!0,content:de("extensions:develop.monitor.filter.delayMessage.text")})),i.createElement(ie,{handleScroll:be,scrollRef:fe,logs:ue,loading:ye,rowHeight:Te.LOG_ROW_HEIGHT,logCount:Te.LOG_FETCH_COUNT,isPreviousEmpty:r,isNextEmpty:s,logType:G.AUDIT_LOGS,setSearchQuery:Oe,"data-componentid":t})):i.createElement(a.$J,{image:(0,u.jF)().emptySearch,imageSize:"tiny",title:de("extensions:develop.monitor.notifications.emptyResponse.title"),subtitle:[de("extensions:develop.monitor.notifications.emptyResponse.subtitle.0")+"".concat(null===(o=Te.TIMERANGE_DROPDOWN_OPTIONS.find((function(e){return e.value===ee})))||void 0===o?void 0:o.text.toLowerCase()),de("extensions:develop.monitor.notifications.emptyResponse.subtitle.1")],"data-componentid":"".concat(t,"-empty-data-placeholder")})},Me=function(){if(y)return i.createElement(a.Qj,{basic:!0,compact:!0,primary:!1,"data-componentid":"".concat(t,"-clear-filter-button"),onClick:Ge,disabled:!y},de("extensions:develop.monitor.filter.topToolbar.buttons.clearFilters.label"))},Ze=function(){if(-1!==A){var e=D(pe);N(e.toString()),C((e-36e5*A).toString())}Ne()},De=function(){var e=new Date(Number(W)).toISOString();return i.createElement("div",{className:"logs-refresh-component"},J&&i.createElement(a.kW,{icon:"warning sign",popup:!0,compact:!0,warning:!0},de("extensions:develop.monitor.filter.refreshMessage.tooltipText")),i.createElement("p",null,J&&de("extensions:develop.monitor.filter.refreshMessage.text")+Z(e)))},Le=function(e){return"requestId"===e?"traceId":e};return i.createElement("div",null,i.createElement("div",null,i.createElement("div",{className:"top-action-bar"},Re(),i.createElement(we,{setFromTime:function(e){return C(e)},setToTime:function(e){return N(e)},setTimeRange:function(e){return R(e)},"data-componentid":"".concat(t,"-audit")}),re?i.createElement(a.KM,{onClick:function(){return Ze()},"data-componentid":"".concat(t,"-refresh-button")},i.createElement(m.Z,{name:"refresh"}),de("extensions:develop.monitor.filter.refreshButton.label")):i.createElement(a.KM,{onClick:function(){return Ne()},"data-componentid":"".concat(t,"-search-button")},i.createElement(m.Z,{name:"search"}),de("extensions:develop.monitor.filter.queryButton.label"))),i.createElement("div",null,i.createElement("div",{className:"top-toolbar"},De(),i.createElement(d.Z.Group,null,null==F?void 0:F.map((function(e,t){return i.createElement(d.Z,{key:t,className:"filter-pill"},Le(e.key),i.createElement(d.Z.Detail,null,e.value),i.createElement(m.Z,{name:"delete",onClick:function(){return Ae(e.key)}}))})),Me())),ke())))};Ge.defaultProps={"data-componentid":"audit-logs"};const Re=Ge;function ke(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||Ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){if(e){if("string"==typeof e)return De(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Le=function(e){var t=e["data-componentid"],n=(0,i.useRef)(null),r=Me((0,i.useState)(!1),2),o=r[0],c=r[1],s=Me((0,i.useState)(!1),2),p=s[0],f=s[1],v=Me((0,i.useState)(""),2),g=v[0],E=v[1],y=Me((0,i.useState)(""),2),T=y[0],h=y[1],S=Me((0,i.useState)(""),2),b=S[0],x=S[1],w=Me((0,i.useState)(""),2),N=w[0],I=w[1],O=Me((0,i.useState)(""),2),C=O[0],_=O[1],A=Me((0,i.useState)(.25),2),R=A[0],k=A[1],M=Me((0,i.useState)(new Map),2),L=M[0],j=M[1],F=Me((0,i.useState)([]),2),U=F[0],H=F[1],P=Me((0,i.useState)(null),2),$=P[0],z=P[1],J=Me((0,i.useState)(!1),2),B=J[0],q=J[1],Y=Me((0,i.useState)(!1),2),Q=Y[0],V=Y[1],W=Me((0,i.useState)(""),2),K=W[0],X=W[1],ee=Me((0,i.useState)(.25),2),te=ee[0],ne=ee[1],re=Me((0,i.useState)(!1),2),oe=re[0],ae=re[1],le=Me((0,i.useState)(!1),2),ce=le[0],se=le[1],ue=Me((0,i.useState)([]),2),me=ue[0],de=ue[1],pe="GMT+0000 UTC",fe=(0,l.$)().t,ve=Ce($),ge=ve.error,Ee=ve.list,ye=ve.loading,he=ve.next,Se=ve.previous;(0,i.useEffect)((function(){var e=D(pe),t=e.toString(),n=(e-36e5*R).toString();I(t),_(n),X(t),z({endTime:t,filter:"",limit:Te.LOG_FETCH_COUNT,logType:G.DIAGNOSTIC_LOGS,startTime:n})}),[]),(0,i.useEffect)((function(){setTimeout((function(){V(!0)}),Te.DELAY_MESSEGE_TIMEOUT),-1===R?q(!1):(q(!0),ce||(se(!0),setTimeout((function(){ae(!0),se(!1)}),Te.REFRESH_BUTTON_TIMEOUT)))}),[K]),(0,i.useEffect)((function(){ae(!1)}),[N,C,b,T]),(0,i.useEffect)((function(){!ye&&Ee.length>0&&de((function(e){return[].concat(ke(e),ke(Ee))}))}),[Ee,ye]);var be=function(e){var t=e.target;V(!1),t.scrollHeight-t.scrollTop===t.clientHeight&&(he?(z({filter:g,limit:Te.LOG_FETCH_COUNT,logType:G.DIAGNOSTIC_LOGS,nextToken:he}),f(!1),c(!1)):f(!0))},xe=function(){var e="";L.forEach((function(t){e=e?"".concat(e," and logentry co '").concat(t,"'"):"logentry co '".concat(t,"'")})),h(e)},Ne=function(e){de([]);var t="";0===b.length?t=b:(t="logentry co '".concat(b,"'"),T&&(t=" and ".concat(t))),E(void 0===e?t:e);var n=C,r=N,o=D(pe);-1!==R&&(r=o.toString(),n=(o-36e5*R).toString()),V(!1),X(o.toString()),ne(R),z({endTime:r,filter:"".concat(T).concat(void 0===e?t:e),limit:Te.LOG_FETCH_COUNT,logType:G.DIAGNOSTIC_LOGS,startTime:n})},Ie=function(){E(""),x(""),ae(!1),Ne("")},Oe=function(e){var t=L;t.set(e.property,e.value),j(t),xe();var n=[];t.forEach((function(e,t){n.push({key:t,value:e})})),H(n)},_e=function(){var e=L;e.clear(),j(e),xe(),H([])},Ae=function(){return i.createElement("form",{className:"advance-search-form",onSubmit:function(e){e.preventDefault()}},i.createElement("div",{className:"search-input-wrapper"},i.createElement("div",{className:"search-box ui action left icon input advanced-search with-add-on"},i.createElement("input",{autoComplete:"off",placeholder:fe("extensions:develop.monitor.filter.searchBar.placeholderDiagnostic"),maxLength:120,name:"query",type:"text",className:"search-input",value:b,onChange:function(e){return x(e.target.value)},"data-componentid":"".concat(t,"-search-input")}),i.createElement(m.Z,{name:"search",color:"grey"})),i.createElement("div",{className:"search-box-addons",hidden:!b},i.createElement(m.Z,{name:"close",color:"grey",onClick:Ie,className:"icon-button"})),i.createElement("input",{hidden:!0,type:"submit",value:"Submit","data-componentid":"".concat(t,"-search-input-submit")})))},Ge=function(){var e,r,l;return ge?(null==ge||null===(e=ge.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.code)===Te.END_TIME_GREATER_THAN_START_TIME_ERROR_CODE?i.createElement(a.$J,{subtitle:[fe("extensions:develop.monitor.notifications.endTimeGreaterThanStartTimeError.subtitle.0"),fe("extensions:develop.monitor.notifications.endTimeGreaterThanStartTimeError.subtitle.1")],title:fe("extensions:develop.monitor.notifications.endTimeGreaterThanStartTimeError.title"),image:(0,u.jF)().genericError,imageSize:"tiny","data-componentid":"".concat(t,"-end-time-greater-than-start-time-error-placeholder")}):(null==ge||null===(r=ge.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.code)===Te.START_TIME_GREATER_THAN_CURRENT_TIME_ERROR_CODE?i.createElement(a.$J,{subtitle:[fe("extensions:develop.monitor.notifications.startTimeGreaterThanCurrentError.subtitle.0"),fe("extensions:develop.monitor.notifications.startTimeGreaterThanCurrentError.subtitle.1")],title:fe("extensions:develop.monitor.notifications.startTimeGreaterThanCurrentError.title"),image:(0,u.jF)().genericError,imageSize:"tiny","data-componentid":"".concat(t,"-start-time-greater-than-current-time-error-placeholder")}):i.createElement(a.$J,{subtitle:[fe("extensions:develop.monitor.notifications.genericError.subtitle.0"),fe("extensions:develop.monitor.notifications.genericError.subtitle.1")],title:fe("extensions:develop.monitor.notifications.genericError.title"),image:(0,u.jF)().genericError,imageSize:"tiny","data-componentid":"".concat(t,"-generic-error-placeholder")}):g&&0===Ee.length?i.createElement(a.$J,{action:i.createElement(a.Qj,{onClick:Ie},fe("extensions:develop.monitor.notifications.emptySearchResult.actionLabel")),image:(0,u.jF)().emptySearch,imageSize:"tiny",title:fe("extensions:develop.monitor.notifications.emptySearchResult.title"),subtitle:[fe("extensions:develop.monitor.notifications.emptySearchResult.subtitle.0"),fe("extensions:develop.monitor.notifications.emptySearchResult.subtitle.1")],"data-componentid":"".concat(t,"-empty-search-placeholder")}):T&&0===Ee.length?i.createElement(a.$J,{action:i.createElement(a.Qj,{onClick:_e},fe("extensions:develop.monitor.notifications.emptyFilterResult.actionLabel")),image:(0,u.jF)().emptySearch,imageSize:"tiny",title:fe("extensions:develop.monitor.notifications.emptyFilterResult.title"),subtitle:[fe("extensions:develop.monitor.notifications.emptyFilterResult.subtitle.0"),fe("extensions:develop.monitor.notifications.emptyFilterResult.subtitle.1")],"data-componentid":"".concat(t,"-empty-filter-placeholder")}):0!==Ee.length||he&&Se||ye?i.createElement(i.Fragment,null,ye&&Q&&i.createElement("div",{className:"diagnostic-logs-delay-message"},i.createElement(a.v0,{type:"info",compact:!0,content:fe("extensions:develop.monitor.filter.delayMessage.text")})),i.createElement(ie,{handleScroll:be,scrollRef:n,logs:me,loading:ye,rowHeight:Te.LOG_ROW_HEIGHT,logCount:Te.LOG_FETCH_COUNT,isPreviousEmpty:o,isNextEmpty:p,logType:G.DIAGNOSTIC_LOGS,setSearchQuery:Oe,"data-componentid":t})):i.createElement(a.$J,{image:(0,u.jF)().emptySearch,imageSize:"tiny",title:fe("extensions:develop.monitor.notifications.emptyResponse.title"),subtitle:[fe("extensions:develop.monitor.notifications.emptyResponse.subtitle.0")+"".concat(null===(l=Te.TIMERANGE_DROPDOWN_OPTIONS.find((function(e){return e.value===te})))||void 0===l?void 0:l.text.toLowerCase()),fe("extensions:develop.monitor.notifications.emptyResponse.subtitle.1")],"data-componentid":"".concat(t,"-empty-data-placeholder")})},Re=function(){if(T)return i.createElement(a.Qj,{basic:!0,compact:!0,primary:!1,"data-componentid":"".concat(t,"-clear-filter-button"),onClick:_e,disabled:!T},fe("extensions:develop.monitor.filter.topToolbar.buttons.clearFilters.label"))},Ze=function(){if(-1!==R){var e=D(pe);I(e.toString()),_((e-36e5*R).toString())}Ne()},De=function(){var e=new Date(Number(K)).toISOString();return i.createElement("div",{className:"logs-refresh-component"},B&&i.createElement(a.kW,{icon:"warning sign",popup:!0,compact:!0,warning:!0},fe("extensions:develop.monitor.filter.refreshMessage.tooltipText")),i.createElement("p",null,B&&fe("extensions:develop.monitor.filter.refreshMessage.text")+Z(e)))},Le=function(e){return"requestId"===e?"traceId":e};return i.createElement("div",null,i.createElement("div",null,i.createElement("div",{className:"top-action-bar"},Ae(),i.createElement(we,{setFromTime:function(e){return _(e)},setToTime:function(e){return I(e)},setTimeRange:function(e){return k(e)},"data-componentid":t}),oe?i.createElement(a.KM,{onClick:function(){return Ze()},"data-componentid":"".concat(t,"-refresh-button")},i.createElement(m.Z,{name:"refresh"}),fe("extensions:develop.monitor.filter.refreshButton.label")):i.createElement(a.KM,{onClick:function(){return Ne()},"data-componentid":"".concat(t,"-search-button")},i.createElement(m.Z,{name:"search"}),fe("extensions:develop.monitor.filter.queryButton.label"))),i.createElement("div",null,i.createElement(i.Fragment,null,i.createElement("div",{className:"top-toolbar"},De(),i.createElement(d.Z.Group,null,U&&U.map((function(e,t){return i.createElement(d.Z,{key:t,className:"filter-pill"},Le(e.key),i.createElement(d.Z.Detail,null,e.value),i.createElement(m.Z,{name:"delete",onClick:function(){return function(e){var t=L;t.delete(e),j(t),xe();var n=[];t.forEach((function(e,t){n.push({key:t,value:e})})),H(n)}(e.key)}}))})),Re())),Ge()))))};var je=n(6391),Fe={};Fe.styleTagTransform=V(),Fe.setAttributes=B(),Fe.insert=z().bind(null,"head"),Fe.domAPI=P(),Fe.insertStyleElement=Y();U()(je.Z,Fe);je.Z&&je.Z.locals&&je.Z.locals;function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Pe=function(e){var t,n=e["data-componentid"],u=Ue((0,i.useState)(G.DIAGNOSTIC_LOGS),2),m=u[0],d=u[1],p=(0,c.v9)((function(e){return e.config.ui.features})),f=(0,l.$)().t,v=(0,a.fQ)().getLink,g=(0,o.EV)(null==p||null===(t=p.auditLogs)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.feature),E=function(e,t){d(t.activeIndex)},y=function(){var e,t,n=[];return(null===(e=p.diagnosticLogs)||void 0===e?void 0:e.enabled)&&n.push({componentId:"diagnostic-logs",menuItem:i.createElement(s.Z,{key:"text",className:"item-with-chip"},f("extensions:develop.monitor.logs.tabs.diagnostic")),render:T}),(null===(t=p.auditLogs)||void 0===t?void 0:t.enabled)&&g&&n.push({componentId:"audit-logs",menuItem:i.createElement(s.Z,{key:"text",className:"item-with-chip"},f("extensions:develop.monitor.logs.tabs.audit"),i.createElement(r.Z,{size:"small",label:f("common:beta"),className:"oxygen-chip-beta"})),render:h}),n},T=function(){return i.createElement(Le,{"data-componentid":n})},h=function(){return i.createElement(Re,null)};return i.createElement("div",{className:"diagnostic-logs"},i.createElement(a.Xg,{title:f("extensions:develop.monitor.pageHeader.title"),pageTitle:"Logs",description:i.createElement(i.Fragment,null,f("extensions:develop.monitor.pageHeader.description"),i.createElement(a.eb,{link:v("manage.logs.learnMore")},f("common:learnMore"))),"data-componentid":"".concat(n,"-layout")},i.createElement(a.M$,{activeIndex:m,"data-testid":"".concat(n,"-log-tabs"),defaultActiveIndex:0,onTabChange:E,panes:y()})))};Pe.defaultProps={"data-componentid":"logs-page"};const $e=Pe},87567:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(51139),o=n.n(r),a=n(32234),i=n.n(a)()(o());i.push([e.id,".log-data-viewer-panel{height:100%;width:calc(100% - 16px)}.log-data-viewer-panel .log-data-viewer{border:1px solid var(--oxygen-palette-divider);height:500px}.log-data-viewer-toolbar-container .oxygen-toolbar{display:flex;justify-content:space-between;align-items:center;align-content:center;flex-wrap:nowrap;flex-direction:row;padding-left:0;padding-right:0}.log-data-viewer-toolbar-container .oxygen-toolbar .actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;align-items:center;gap:10px}.full-screen-log-data-viewer-container{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:95%;height:90%;padding:32px}.full-screen-log-data-viewer-container .log-data-viewer-toolbar-container{background-color:var(--oxygen-palette-common-white);padding-left:15px;padding-right:15px;border-top-right-radius:var(--oxygen-shape-borderRadius);border-top-left-radius:var(--oxygen-shape-borderRadius)}.full-screen-log-data-viewer-container .log-data-viewer{border:1px solid var(--oxygen-palette-divider);height:500px}.data-viewer-buttons{padding:5px 12px;border-radius:var(--oxygen-shape-borderRadius);font-size:12px;color:var(--oxygen-palette-text-secondary)}",""]);const l=i},6391:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(51139),o=n.n(r),a=n(32234),i=n.n(a)()(o());i.push([e.id,".tabs.resource-tabs .ui.pointing.secondary.menu .item.item-with-chip{min-height:50px}.tabs.resource-tabs .ui.pointing.secondary.menu .item.item-with-chip .oxygen-chip-beta{margin-left:8px}",""]);const l=i}}]);