"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[7757],{47028:(e,t,n)=>{n.d(t,{f:()=>l});var r=n(11526),o=n(6833),i=n(76271),a=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()).bind(r.AsgardeoSPAClient.getInstance()),l=function(e){var t={data:e,headers:{"Content-Type":"application/json"},method:o.f2.POST,url:i.h.getState().config.endpoints.bulk};return a(t).then((function(e){var t,n,r=null==e?void 0:e.data,o=!0;null!=r&&null!==(t=r.schemas)&&void 0!==t&&t.includes("urn:ietf:params:scim:api:messages:2.0:BulkResponse")&&(null==r||null===(n=r.Operations)||void 0===n||n.some((function(e){var t,n=null==e||null===(t=e.status)||void 0===t?void 0:t.code;if(200!==n&&201!==n&&204!==n)return o=!1,!1})));return o?Promise.resolve(e):Promise.reject(e)})).catch((function(e){return Promise.reject(e)}))}},39203:(e,t,n)=>{n.d(t,{Ug:()=>s,VL:()=>c,fF:()=>d,hI:()=>u,sS:()=>m,tN:()=>f,yq:()=>p});var r=n(11526),o=n(76271),i=n(96124),a=n(6833),l=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),u=function(e,t){var n={headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,params:{domain:e,excludedAttributes:t},url:o.h.getState().config.endpoints.groups};return l(n).then((function(e){if(200==e.status)return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},s=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l={headers:{"Content-Type":"application/json"},method:a.f2.GET,params:n?{domain:e,excludedAttributes:t,filter:n}:{domain:e,excludedAttributes:t},url:o.h.getState().config.endpoints.groups},u=(0,i.Z)(r?l:null),s=u.data,c=u.error;return{data:s,error:c,isLoading:!c&&!s,isValidating:u.isValidating,mutate:u.mutate,response:u.response}},c=function(e,t){var n={headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,params:{excludedAttributes:t},url:o.h.getState().config.endpoints.groups+"/"+e};return l(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e,t){var n={data:t,headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.PATCH,url:o.h.getState().config.endpoints.groups+"/"+e};return l(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},f=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:o.h.getState().config.endpoints.groups+"/.search"};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},p=function(e){var t={headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.DELETE,url:o.h.getState().config.endpoints.groups+"/"+e};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},m=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:o.h.getState().config.endpoints.groups};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},3192:(e,t,n)=>{n.d(t,{Rh:()=>d,af:()=>c});var r=n(11526),o=n(14092),i=n(76271),a=n(96124),l=n(43939),u=n(6833),s=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),c=function(e,t,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l={headers:{Accept:"application/json","Content-Type":"application/json"},method:u.f2.GET,params:{filter:n,limit:e,offset:t,requiredAttributes:r},url:i.h.getState().config.endpoints.identityProviders},s=(0,a.Z)(o?l:null),c=s.data,d=s.error;return{data:c,error:d,isLoading:!d&&!c,isValidating:s.isValidating,mutate:s.mutate}},d=function(){var e={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:u.f2.GET,url:i.h.getState().config.endpoints.localAuthenticators};return s(e).then((function(e){if(200!==e.status)throw new l.u(o.Y.ERROR_MESSAGES.LOCAL_AUTHENTICATORS_FETCH_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new l.u(o.Y.ERROR_MESSAGES.LOCAL_AUTHENTICATORS_FETCH_ERROR,e.stack,e.code,e.request,e.response,e.config)}))}},83406:(e,t,n)=>{n.d(t,{Q:()=>A});var r=n(60486),o=n(40838),i=n(6833),a=n(82406),l=n(30382),u=n(43516),s=n(44194),c=n(10479),d=n(47245),f=n(62508),p=n(46501),m=n(79282),v=n(59870),h=n(33519);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(){y=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof E?t:E,a=Object.create(i.prototype),l=new L(r||[]);return o(a,"_invoke",{value:I(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",m="executing",v="completed",h={};function E(){}function b(){}function S(){}var O={};s(O,a,(function(){return this}));var A=Object.getPrototypeOf,C=A&&A(A(P([])));C&&C!==n&&r.call(C,a)&&(O=C);var w=S.prototype=E.prototype=Object.create(O);function T(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(o,i,a,l){var u=d(e[o],e,i);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==g(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,n,r){var o=f;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var u=R(l,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var s=d(t,n,r);if("normal"===s.type){if(o=r.done?v:p,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function U(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(g(t)+" is not iterable")}return b.prototype=S,o(w,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:b,configurable:!0}),b.displayName=s(S,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},T(N.prototype),s(N.prototype,l,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new N(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(U),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),U(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;U(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function E(e,t,n,r,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O="edit-role-basic",A=function(e){var t=(0,c.$)().t,n=(0,d.I0)(),g=e.role,S=e.onRoleUpdate,A=e.isReadOnly,C=e.tabIndex,w=e.enableDeleteErrorConnetedAppsModal,T=e["data-componentid"],N=b((0,s.useState)(!1),2),I=N[0],R=N[1],x=b((0,s.useState)(!1),2),U=x[0],L=x[1],P=b((0,s.useState)(!1),2),j=P[0],Z=P[1],_=b((0,s.useState)(!0),2),k=_[0],M=_[1],D=b((0,s.useState)(void 0),2),G=D[0],H=D[1],V=(0,m.Z)(void 0,void 0,G,"users,groups,permissions,associatedApplications"),J=V.data,q=V.isLoading,F=V.error,B=V.isValidating,$=function(e){n((0,a.V_)(e))},Q=function(){var e,n=(e=y().mark((function e(n){var r,o,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={roleName:void 0},g.displayName!==(null===(r=n.roleName)||void 0===r?void 0:r.toString().trim())){e.next=5;break}M(!0),e.next=10;break;case 5:if(!((null===(o=n.roleName)||void 0===o?void 0:o.toString().trim().length)>=v.nL.ROLE_NAME_MIN_LENGTH)){e.next=10;break}return M(!1),H("displayName eq ".concat(null===(a=n.roleName)||void 0===a?void 0:a.toString().trim()," and audience.value eq ").concat(g.audience.value)),q&&B||((null==J?void 0:J.totalResults)>0||F)&&(i.roleName=t("roles:addRoleWizard.forms.roleBasicDetails.roleName.validations.duplicate",{type:"Role"})),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){E(i,r,o,a,l,"next",e)}function l(e){E(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();return s.createElement(s.Fragment,null,s.createElement(u.pJ,{padded:"very"},s.createElement(l.l0,{id:O,uncontrolledForm:!1,validate:Q,noValidate:!0,onSubmit:function(e){var n,r={Operations:[{op:"replace",path:"displayName",value:null==e||null===(n=e.roleName)||void 0===n?void 0:n.toString().trim()}],schemas:[v.lg.PATCH_OP]};Z(!0),(0,p.dB)(g.id,r).then((function(){S(C),$({description:t("roles:notifications.updateRole.success.description"),level:i.QU.SUCCESS,message:t("roles:notifications.updateRole.success.message")})})).catch((function(){$({description:t("roles:notifications.updateRole.genericError.description"),level:i.QU.ERROR,message:t("roles:notifications.updateRole.genericError.message")})})).finally((function(){Z(!1)}))}},s.createElement(l.gN.Input,{ariaLabel:"roleName",name:"roleName",inputType:"roleName",required:!0,readOnly:A,value:null==g?void 0:g.displayName,label:t("roles:edit.basics.fields.roleName.name"),placeholder:t("roles:edit.basics.fields.roleName.placeholder"),maxLength:v.nL.ROLE_NAME_MAX_LENGTH,minLength:v.nL.ROLE_NAME_MIN_LENGTH}),s.createElement(l.gN.Button,{form:O,buttonType:"primary_btn",ariaLabel:"Update button",name:"update-button",hidden:A,disabled:j||k,loading:j,"data-componentid":"".concat(T,"-role-update-button"),label:t("extensions:develop.apiResource.tabs.general.form.updateButton")}))),s.createElement(f.Z,{hidden:!0}),!A&&s.createElement(u.v9,{sectionHeader:"Danger Zone"},s.createElement(u.cN,{actionTitle:t("roles:edit.basics.dangerZone.actionTitle",{type:"Role"}),header:t("roles:edit.basics.dangerZone.header",{type:"role"}),subheader:t("roles:edit.basics.dangerZone.subheader",{type:"role"}),onActionClick:function(){var e;w&&(null==g||null===(e=g.audience)||void 0===e||null===(e=e.type)||void 0===e?void 0:e.toUpperCase())===v.cv.APPLICATION?L(!0):R(!0)},"data-componentid":"".concat(T,"-role-danger-zone")})),I&&s.createElement(u.cV,{onClose:function(){return R(!1)},type:"negative",open:I,assertionHint:t("roles:edit.basics.confirmation.assertionHint"),assertionType:"checkbox",primaryAction:t("common:confirm"),secondaryAction:t("common:cancel"),onSecondaryActionClick:function(){return R(!1)},onPrimaryActionClick:function(){(0,p.iy)(g.id).then((function(){$({description:t("roles:notifications.deleteRole.success.description"),level:i.QU.SUCCESS,message:t("roles:notifications.deleteRole.success.message")}),o.m.push(r.$.getPaths().get("ROLES"))}))},"data-componentid":"".concat(T,"-role-confirmation-modal"),closeOnDimmerClick:!1},s.createElement(u.cV.Header,null,t("roles:edit.basics.confirmation.header")),s.createElement(u.cV.Message,{attached:!0,negative:!0},t("roles:edit.basics.confirmation.message",{type:"role."})),s.createElement(u.cV.Content,null,t("roles:edit.basics.confirmation.content",{type:"role"}))),U&&s.createElement(h.u,{selectedRole:g,isOpen:U,onClose:function(){return L(!1)},"data-componentid":"".concat(T,"-role-delete-error-confirmation-modal")}))};A.defaultProps={"data-componentid":"edit-role-basic",enableDeleteErrorConnetedAppsModal:!0}},14295:(e,t,n)=>{n.d(t,{w:()=>S});var r=n(9779),o=n(44194),i=n(78864),a=n(33763),l=n(49748),u=n(11192),s=n(40018),c=n(92336),d=n(31549),f=n(17751),p=n(14517);const m=(0,o.forwardRef)(((e,t)=>{var{className:n}=e,r=(0,c.__rest)(e,["className"]);const o=(0,p.Z)("oxygen-popover",n);return(0,d.jsx)(f.ZP,Object.assign({className:o},r,{ref:t}))}));var v=n(1989),h=n(43516),g=function(e){var t=e.popoverAnchorEl,n=e.onPopoverClose,c=e.primaryText,d=e.secondaryText,f=e.userStore;return o.createElement(m,{className:"role-chip-popover",open:!!t,anchorEl:t,onClose:n,anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{horizontal:"left",vertical:"top"},elevation:0,disableRestoreFocus:!0},o.createElement(s.Z,null,o.createElement(i.Z,{className:"role-chip-more-details"},o.createElement(a.Z,null,o.createElement(l.Z,{container:!0,alignItems:"center",columnSpacing:2},o.createElement(l.Z,{container:!0,alignItems:"center",justifyContent:"flex-start"},o.createElement(l.Z,null,o.createElement(h.JT,{image:o.createElement(h.Xo,{name:c,size:"mini"}),size:"mini"})),o.createElement(l.Z,null,o.createElement(u.Z,{primary:c,secondary:d}))),o.createElement(l.Z,{justifyContent:"flex-end"},f?o.createElement(r.Z,{icon:o.createElement(h.dn,{inline:!0,size:"default",transparent:!0,icon:(0,v.Uz)().userStore,verticalAlign:"middle"}),label:f}):null))))))};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(null,arguments)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=e.key,n=e.setActiveOption,i=e.primaryText,a=e.secondaryText,l=e.userStore,u=e.option,s=e.activeOption,c=E((0,o.useState)(null),2),d=c[0],f=c[1],p=function(){f(null),n(null)};return o.createElement(o.Fragment,null,o.createElement(r.Z,y({},e,{key:t,label:i,onMouseEnter:function(e){f(e.currentTarget),n(u)},onMouseLeave:p})),(null==s?void 0:s.id)===u.id?o.createElement(g,{popoverAnchorEl:d,onPopoverClose:p,primaryText:i,secondaryText:a,userStore:l}):null)}},99096:(e,t,n)=>{n.d(t,{q:()=>X});var r=n(39709),o=n(48023),i=n(3192),a=n(6833),l=n(82406),u=n(43516),s=n(44194),c=n(10479),d=n(47245),f=n(62508),p=n(77366),m=n(23210),v=n(91626),h=n(21212),g=n(46461),y=n(73405),E=n(89497),b=n(37612),S=n(96124),O=n(76271),A=n(63571),C=n(46570),w=n(917),T=n(55495),N=n(50699),I=n(10159),R=n(14295),x=n(7231);function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U.apply(null,arguments)}function L(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return Z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t,n,r,o,i,f,j=e.isReadOnly,Z=e.initialSelectedGroups,_=e.onUpdate,k=e.identityProvider,M=e.onSelectedGroupsListChange,D=e.isExpanded,G=e.onExpansionChange,H=e.isUpdating,V=e["data-componentid"],J=null==Z?void 0:Z.map((function(e){return{id:e.value,name:e.display}})),q=(0,c.$)().t,F=(0,d.I0)(),B=(0,w.Z)().UIConfig,$=P((0,s.useState)(J),2),Q=$[0],z=$[1],W=P((0,s.useState)(void 0),2),Y=W[0],X=W[1],K=P((0,s.useState)(void 0),2),ee=K[0],te=K[1],ne=P((0,s.useState)([]),2),re=ne[0],oe=ne[1],ie=P((0,s.useState)(!1),2),ae=ie[0],le=ie[1],ue=D,se=null==B?void 0:B.connectionResourcesUrl,ce=(t=k.id,n=ue,r={headers:{"Content-Type":"application/json"},method:a.f2.GET,url:"".concat(O.h.getState().config.endpoints.identityProviders,"/").concat(t,"/groups")},o=(0,S.Z)(n?r:null),i=o.data,f=o.error,{data:i,error:f,isLoading:!f&&!i,isValidating:o.isValidating,mutate:o.mutate,response:o.response}),de=ce.data,fe=ce.isLoading,pe=ce.error;(0,s.useEffect)((function(){j||(de&&(null==de?void 0:de.length)>0?oe(de):oe([]))}),[de]),(0,s.useEffect)((function(){pe&&F((0,l.V_)({description:q("roles:edit.groups.notifications.fetchError.description"),level:a.QU.ERROR,message:q("roles:edit.groups.notifications.fetchError.message")}))}),[pe]),(0,s.useEffect)((function(){!j&&J&&Q&&te(null==J?void 0:J.filter((function(e){return void 0===(null==Q?void 0:Q.find((function(t){return t.id===e.id})))})))}),[Q]),(0,s.useEffect)((function(){if(M){var e=null==Q?void 0:Q.map((function(e){return e.id})),t=null==ee?void 0:ee.map((function(e){return e.id}));M(null==k?void 0:k.id,e,t)}}),[Q,ee]);var me=(0,s.useCallback)((0,T.Z)((function(e){if((0,N.Z)(e))return oe(de),void le(!1);var t=e.trim(),n=null==de?void 0:de.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));oe(n),le(!1)}),x.nL.DEBOUNCE_TIMEOUT),[de]);return s.createElement(u.pJ,{"data-componentid":V,className:"mt-2",basic:!0},s.createElement(p.Z,{onChange:function(e,t){G&&G(k.id,t)},elevation:1,variant:"elevation",disableGutters:!0,expanded:D},s.createElement(v.Z,{"aria-controls":"panel1a-content",id:"panel1a-header",expandIcon:s.createElement(b.v4,null)},s.createElement(s.Fragment,null,s.createElement(u.dn,{square:!0,transparent:!0,className:"card-image",size:"mini",icon:k.image?C.Zs.resolveConnectionResourcePath(se,k.image):(0,A.xs)().default,floated:"left"}),s.createElement(E.Z,{className:"ml-4",variant:"h6"},k.name))),s.createElement(m.Z,null,s.createElement(s.Fragment,null,j?s.createElement(h.Z,{multiple:!0,disableCloseOnSelect:!0,options:Q||[],value:Q||[],getOptionLabel:function(e){return e.name},renderInput:function(e){return s.createElement(y.Z,U({},e,{placeholder:q("roles:edit.groups.actions.search.placeholder")}))},renderTags:function(e,t){return e.map((function(e,n){return s.createElement(R.w,U({},t({index:n}),{key:n,primaryText:e.name,option:e,activeOption:Y,setActiveOption:X,onDelete:null}))}))},renderOption:function(e,t){return s.createElement(I.U,{displayName:t.name,renderOptionProps:e})}}):s.createElement(h.Z,{multiple:!0,disableCloseOnSelect:!0,loading:fe||ae,options:re,value:Q||[],getOptionLabel:function(e){return e.name},renderInput:function(e){return s.createElement(y.Z,U({},e,{placeholder:q("roles:edit.groups.actions.assign.placeholder")}))},onChange:function(e,t){z(t)},filterOptions:function(e){return e},onInputChange:function(e,t){le(!0),me(t)},isOptionEqualToValue:function(e,t){return e.id===t.id},renderTags:function(e,t){return e.map((function(e,n){return s.createElement(R.w,U({},t({index:n}),{key:n,primaryText:e.name,option:e,activeOption:Y,setActiveOption:X,variant:null!=J&&J.find((function(t){return t.id===e.id}))?"filled":"outlined"}))}))},renderOption:function(e,t,n){var r=n.selected;return s.createElement(I.U,{selected:r,displayName:t.name,renderOptionProps:e})}}),(null==ee?void 0:ee.length)>0?s.createElement(h.Z,{multiple:!0,disableCloseOnSelect:!0,loading:fe||ae,options:ee,value:ee,getOptionLabel:function(e){return e.name},onChange:function(e,t){return function(e){var t=[];ee.forEach((function(n){null!=e&&e.find((function(e){return e.id===n.id}))||t.push(n)})),z([].concat(L(Q),t))}(t)},renderInput:function(e){return s.createElement(y.Z,U({},e,{placeholder:q("roles:edit.groups.actions.remove.placeholder"),label:q("roles:edit.groups.actions.remove.label"),margin:"dense"}))},renderTags:function(e,t){return e.map((function(e,n){return s.createElement(R.w,U({},t({index:n}),{key:n,primaryText:e.name,option:e,activeOption:Y,setActiveOption:X,variant:"outlined",onDelete:function(){z([].concat(L(Q),[e]))}}))}))},renderOption:function(e,t){return s.createElement(I.U,{displayName:t.name,renderOptionProps:e})}}):null,j?null:s.createElement(g.Z,{className:"role-assigned-button",variant:"contained",loading:H,onClick:_,disabled:J===Q},q("common:update"))))))};_.defaultProps={"data-componentid":"edit-role-federated-group-configure-item",isReadOnly:!1};var k=n(39203),M=n(9331);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(null,arguments)}function G(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var q=function(e){var t=e.isReadOnly,n=e.initialSelectedGroups,r=e.onUpdate,o=e.onSelectedGroupsListChange,i=e.isUpdating,f=e["data-componentid"],p=null==n?void 0:n.map((function(e){return{id:e.value,name:e.display}})),m=(0,c.$)().t,v=(0,d.I0)(),E=H((0,s.useState)(p),2),b=E[0],S=E[1],O=H((0,s.useState)(void 0),2),A=O[0],C=O[1],w=H((0,s.useState)(void 0),2),U=w[0],L=w[1],P=H((0,s.useState)([]),2),j=P[0],Z=P[1],_=H((0,s.useState)(void 0),2),V=_[0],J=_[1],q=H((0,s.useState)(!1),2),F=q[0],B=q[1],$=(0,k.Ug)(null,null,V?"displayName co ".concat(V):null,!0),Q=$.data,z=$.isLoading,W=$.error;(0,s.useEffect)((function(){t||(Q&&0!==(null==Q?void 0:Q.totalResults)?Z(Q.Resources.map((function(e){return{id:e.id,name:e.displayName}}))):Z([]))}),[Q]),(0,s.useEffect)((function(){W&&v((0,l.V_)({description:m("roles:edit.groups.notifications.fetchError.description"),level:a.QU.ERROR,message:m("roles:edit.groups.notifications.fetchError.message")}))}),[W]),(0,s.useEffect)((function(){!t&&p&&b&&L(null==p?void 0:p.filter((function(e){return void 0===(null==b?void 0:b.find((function(t){return t.id===e.id})))})))}),[b]),(0,s.useEffect)((function(){if(o){var e=null==b?void 0:b.map((function(e){return e.id})),t=null==U?void 0:U.map((function(e){return e.id}));o(null,e,t)}}),[b,U]);var Y=(0,s.useCallback)((0,T.Z)((function(e){e=(0,N.Z)(e)?null:e,J(e)}),x.nL.DEBOUNCE_TIMEOUT),[]);return s.createElement(u.pJ,{className:"mt-2",basic:!0},s.createElement(s.Fragment,null,t?s.createElement(h.Z,{multiple:!0,disableCloseOnSelect:!0,options:b||[],value:b||[],"data-componentid":"".concat(f,"-local-groups-accordion"),getOptionLabel:function(e){return e.name},renderInput:function(e){return s.createElement(y.Z,D({},e,{placeholder:m("roles:edit.groups.actions.search.placeholder")}))},renderTags:function(e,t){return e.map((function(e,n){return s.createElement(R.w,D({},t({index:n}),{key:n,primaryText:M.J.getDisplayName(e.name),userStore:M.J.getUserStore(e.name),option:e,activeOption:A,setActiveOption:C,onDelete:null}))}))},renderOption:function(e,t){return s.createElement(I.U,{displayName:M.J.getDisplayName(t.name),userstore:M.J.getUserStore(t.name),renderOptionProps:e})}}):s.createElement(h.Z,{multiple:!0,disableCloseOnSelect:!0,loading:z||F,options:j,value:b||[],"data-componentid":"".concat(f,"-local-groups-accordion"),getOptionLabel:function(e){return e.name},renderInput:function(e){return s.createElement(y.Z,D({},e,{placeholder:m("roles:edit.groups.actions.assign.placeholder")}))},onChange:function(e,t){S(t)},filterOptions:function(e){return e},onInputChange:function(e,t){B(!0),Y(t)},isOptionEqualToValue:function(e,t){return e.id===t.id},renderTags:function(e,t){return e.map((function(e,n){return s.createElement(R.w,D({},t({index:n}),{key:n,primaryText:M.J.getDisplayName(e.name),userStore:M.J.getUserStore(e.name),option:e,activeOption:A,setActiveOption:C,variant:null!=p&&p.find((function(t){return t.id===e.id}))?"filled":"outlined"}))}))},renderOption:function(e,t,n){var r=n.selected;return s.createElement(I.U,{selected:r,displayName:M.J.getDisplayName(t.name),userstore:M.J.getUserStore(t.name),renderOptionProps:e})}}),(null==U?void 0:U.length)>0?s.createElement(h.Z,{multiple:!0,disableCloseOnSelect:!0,loading:z||F,options:U,value:U,"data-componentid":"".concat(f,"-local-groups-accordion"),getOptionLabel:function(e){return e.name},onChange:function(e,t){return function(e){var t=[];U.forEach((function(n){null!=e&&e.find((function(e){return e.id===n.id}))||t.push(n)})),S([].concat(G(b),t))}(t)},renderInput:function(e){return s.createElement(y.Z,D({},e,{placeholder:m("roles:edit.groups.actions.remove.placeholder"),label:m("roles:edit.groups.actions.remove.label"),margin:"dense"}))},renderTags:function(e,t){return e.map((function(e,n){return s.createElement(R.w,D({},t({index:n}),{key:n,primaryText:M.J.getDisplayName(e.name),userStore:M.J.getUserStore(e.name),option:e,activeOption:A,setActiveOption:C,variant:"outlined",onDelete:function(){S([].concat(G(b),[e]))}}))}))},renderOption:function(e,t){return s.createElement(I.U,{displayName:M.J.getDisplayName(t.name),userstore:M.J.getUserStore(t.name),renderOptionProps:e})}}):null,t?null:s.createElement(g.Z,{className:"role-assigned-button",variant:"contained",loading:i,onClick:r,disabled:p===b,"data-componentid":"".concat(f,"-local-groups-update-button")},m("common:update"))))};q.defaultProps={"data-componentid":"edit-role-local-groups",isReadOnly:!1};var F=n(46501),B=n(59870),$=n(96646);function Q(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return Y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t,n,p=e.role,m=e.onRoleUpdate,v=e.isReadOnly,h=e.tabIndex,g=null===(t=p.audience)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.toUpperCase(),y=$.J.getRoleGroupsGroupedByIdp(null==p?void 0:p.groups),E="LOCAL",b=(0,c.$)().t,S=(0,d.I0)(),O=z((0,s.useState)(!1),2),A=O[0],C=O[1],w=z((0,s.useState)([]),2),T=w[0],N=w[1],I=z((0,s.useState)(new Map),2),R=I[0],x=I[1],U=z((0,s.useState)(new Map),2),L=U[0],P=U[1],j=z((0,s.useState)(E),2),Z=j[0],k=j[1],M=(0,i.af)(null,null,null,"federatedAuthenticators,groups",!0),D=M.data,G=M.isLoading,H=M.error,V=(0,r.b)(null===(n=p.audience)||void 0===n?void 0:n.value,g===B.cv.APPLICATION),J=V.data,W=V.isLoading,Y=V.error,X=[o.$.AUTHENTICATOR_IDS.ORGANIZATION_ENTERPRISE_AUTHENTICATOR_ID,o.$.AUTHENTICATOR_IDS.EMAIL_OTP_AUTHENTICATOR_ID,o.$.AUTHENTICATOR_IDS.SMS_OTP_AUTHENTICATOR_ID];(0,s.useEffect)((function(){var e;if(!(G||H||g===B.cv.APPLICATION&&(W||Y))){var t=null==D||null===(e=D.identityProviders)||void 0===e?void 0:e.filter((function(e){return!X.includes(e.federatedAuthenticators.defaultAuthenticatorId)}));if(g===B.cv.APPLICATION){var n=[];J.authenticationSequence.steps.forEach((function(e){e.options.forEach((function(e){var r,o=null==t?void 0:t.find((function(t){return t.name===e.idp}));(null==o||null===(r=o.groups)||void 0===r?void 0:r.length)>0&&n.push(o)}))})),N(n)}else N(t)}}),[G,H,W,Y]);var K=function(e,t,n){x((function(n){var r=new Map(n);return r.set(null!=e?e:E,t),r})),P((function(t){var r=new Map(t);return r.set(null!=e?e:E,n),r}))},ee=function(e,t){k(t?e:void 0)},te=function(){C(!0);var e=[];null==L||L.forEach((function(t){(null==t?void 0:t.length)>0&&e.push.apply(e,Q(t))}));var t=[];Array.from(R.values()).forEach((function(e){null==e||e.forEach((function(e){var n;null!==(n=p.groups)&&void 0!==n&&n.find((function(t){return t.value===e}))||t.push(e)}))}));var n=[];n.push({op:"add",value:{groups:null==t?void 0:t.map((function(e){return{value:e}}))}}),e.forEach((function(e){n.push({op:"remove",path:"groups[value eq ".concat(e,"]")})}));var r={Operations:n,schemas:[B.lg.PATCH_OP]};(0,F.dB)(p.id,r).then((function(){S((0,l.V_)({description:b("roles:edit.groups.notifications.success.description"),level:a.QU.SUCCESS,message:b("roles:edit.groups.notifications.success.message")})),m(h)})).catch((function(e){e.response&&e.response.data.detail?S((0,l.V_)({description:b("roles:edit.groups.notifications.error.description",{description:e.response.data.detail}),level:a.QU.ERROR,message:b("roles:edit.groups.notifications.error.message")})):S((0,l.V_)({description:b("roles:edit.groups.notifications.genericError.description"),level:a.QU.ERROR,message:b("roles:edit.groups.notifications.genericError.message")}))})).finally((function(){C(!1)}))};return s.createElement(u.pJ,{padded:"very"},s.createElement(u.X6,{as:"h4"},b("roles:edit.groups.heading")),s.createElement(u.X6,{subHeading:!0,ellipsis:!0,as:"h6"},b("roles:edit.groups.subHeading")),s.createElement(u.X6,{as:"h5"},b("roles:edit.groups.localGroupsHeading")),s.createElement(q,{key:"role-group-accordion-local",isReadOnly:v,onUpdate:te,initialSelectedGroups:y[E],onSelectedGroupsListChange:K,isUpdating:A}),(null==T?void 0:T.length)>0&&s.createElement(s.Fragment,null,s.createElement(f.Z,{hidden:!0}),s.createElement(f.Z,null),s.createElement(u.X6,{as:"h5"},b("roles:edit.groups.externalGroupsHeading")),null==T?void 0:T.map((function(e){var t=y[e.id];return s.createElement(_,{key:"role-group-accordion-".concat(e.id),isReadOnly:v,onUpdate:te,initialSelectedGroups:t,identityProvider:e,onSelectedGroupsListChange:K,isExpanded:Z===e.id,onExpansionChange:ee,isUpdating:A})}))))};X.defaultProps={"data-componentid":"edit-role-group"}},25662:(e,t,n)=>{n.d(t,{G:()=>Q});var r=n(21212),o=n(46461),i=n(35390),a=n(49748),l=n(69357),u=n(34159),s=n(73405),c=n(47028),d=n(1989),f=n(48704),p=n(92e3),m=n(11626),v=n(6833),h=n(82406),g=n(16590),y=n(43516),E=n(55495),b=n(50699),S=n(44194),O=n(10479),A=n(47245),C=n(26154),w=n(10159),T=n(14295),N=n(59870),I=n(9331),R=n(51835),x=n.n(R),U=n(27975),L=n.n(U),P=n(55900),j=n.n(P),Z=n(21555),_=n.n(Z),k=n(3621),M=n.n(k),D=n(5062),G=n.n(D),H=n(73422),V={};V.styleTagTransform=G(),V.setAttributes=_(),V.insert=j().bind(null,"head"),V.domAPI=L(),V.insertStyleElement=M();x()(H.Z,V);H.Z&&H.Z.locals&&H.Z.locals;function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(null,arguments)}function q(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e){var t=e.role,n=e.onRoleUpdate,R=e.isReadOnly,x=e.tabIndex,U=e.activeUserStore,L=e["data-componentid"],P=(0,O.$)().t,j=(0,A.I0)(),Z=(0,A.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),_=F((0,S.useState)(void 0),2),k=_[0],M=_[1],D=F((0,S.useState)(!1),2),G=D[0],H=D[1],V=F((0,S.useState)([]),2),B=V[0],$=V[1],Q=F((0,S.useState)(!1),2),z=Q[0],W=Q[1],Y=F((0,S.useState)(void 0),2),X=Y[0],K=Y[1],ee=F((0,S.useState)([]),2),te=ee[0],ne=ee[1],re=F((0,S.useState)(),2),oe=re[0],ie=re[1],ae=F((0,S.useState)(!0),2),le=ae[0],ue=ae[1],se=F((0,S.useState)([]),2),ce=se[0],de=se[1],fe=F((0,S.useState)({}),2),pe=fe[0],me=fe[1],ve=(0,m.zU)(null),he=ve.data,ge=ve.isLoading;(0,S.useEffect)((function(){if(he&&!ge){var e=[{key:-1,text:null===f.w||void 0===f.w?void 0:f.w.primaryUserstoreName,value:null===f.w||void 0===f.w?void 0:f.w.primaryUserstoreName}],t={key:null,text:"",value:""};null==he||he.forEach((function(n,r){var o;(null==n||null===(o=n.name)||void 0===o?void 0:o.toUpperCase())!==(null===f.w||void 0===f.w?void 0:f.w.primaryUserstoreName)&&(0,m.YZ)(n.id).then((function(o){var i;"true"===(null===(i=o.properties.find((function(e){return"Disabled"===e.name})))||void 0===i?void 0:i.value)||(t={key:r,text:n.name,value:n.name},e.push(t))}))})),ne(e)}}),[he,ge]);var ye=(0,p.WW)(null,null,k?"userName co ".concat(k):null,null,oe,null,!!oe||!!k),Ee=ye.data,be=ye.isLoading,Se=ye.error,Oe=function(e,t){var n=e.userName.split("/");return 1===n.length&&g.StringUtils.isEqualCaseInsensitive(t,Z)||2===n.length&&g.StringUtils.isEqualCaseInsensitive(n[0],t)};(0,S.useEffect)((function(){ie(U||f.w.primaryUserstoreName)}),[U]),(0,S.useEffect)((function(){var e,n,r;if(null!=t&&null!==(e=t.users)&&void 0!==e&&e.length){ue(!1);var o=null!==(n=null==t||null===(r=t.users)||void 0===r?void 0:r.map((function(e){return{id:e.value,userName:e.display}})).filter((function(e){return Oe(e,oe)})))&&void 0!==n?n:[],i=pe[oe]||o;de(i)}}),[t,oe]),(0,S.useEffect)((function(){if(!R&&(null==Ee?void 0:Ee.totalResults)>0&&Array.isArray(null==Ee?void 0:Ee.Resources)){var e,t,n=null!==(e=null==Ee||null===(t=Ee.Resources)||void 0===t?void 0:t.filter((function(e){var t=Oe(e,oe);return!(void 0!==(null==ce?void 0:ce.find((function(t){return t.id===e.id}))))&&t})))&&void 0!==e?e:[];$(n)}else $([])}),[Ee,ce]),(0,S.useEffect)((function(){Se&&j((0,h.V_)({description:P("roles:edit.users.notifications.fetchError.description"),level:v.QU.ERROR,message:P("roles:edit.users.notifications.fetchError.message")}))}),[Se]);var Ae=function(){if(Array.isArray(ce)){var e=pe;e[oe]=ce,me(e)}},Ce=(0,S.useCallback)((0,E.Z)((function(e){e=(0,b.Z)(e)?null:e,M(e)}),N.nL.DEBOUNCE_TIMEOUT),[]);return S.createElement(y.pJ,{padded:"very",className:"edit-role users"},S.createElement(y.X6,{as:"h4"},P("roles:edit.users.heading")),S.createElement(y.X6,{subHeading:!0,ellipsis:!0,as:"h6"},P("roles:edit.users.subHeading")),le?S.createElement(y.$J,{subtitle:[P("roles:edit.users.placeholders.emptyPlaceholder.subtitles.0")],title:P("roles:edit.users.placeholders.emptyPlaceholder.title"),image:(0,d.jF)().emptyList,imageSize:"tiny",action:R?null:S.createElement(y.KM,{onClick:function(){return ue(!1)}},S.createElement(C.Z,{name:"plus"}),P("roles:edit.users.placeholders.emptyPlaceholder.action"))}):S.createElement(S.Fragment,null,B&&te&&!R&&S.createElement(a.Z,{container:!0,spacing:1},!U&&S.createElement(a.Z,{xs:12,sm:4,md:2,alignItems:"center"},S.createElement(i.Z,{fullWidth:!0,size:"medium"},S.createElement(u.Z,{value:oe,onChange:function(e){Ae(),de([]),ie(e.target.value)},"data-componentid":"".concat(L,"-user-store-domain-dropdown")},ge?S.createElement("p",null,P("common:loading")):null==te?void 0:te.map((function(e){return S.createElement(l.Z,{key:e.key,value:e.value},e.text)}))))),S.createElement(a.Z,{xs:12,sm:4,md:8},S.createElement(r.Z,{multiple:!0,disableCloseOnSelect:!0,loading:be||G,options:B,value:ce,"data-componentid":"".concat(L,"-user-search-text-input"),getOptionLabel:function(e){return I.J.getUserUsername(e)},renderInput:function(e){return S.createElement(s.Z,J({},e,{placeholder:P("roles:edit.users.actions.assign.placeholder")}))},onChange:function(e,t){de(t)},filterOptions:function(e){return e},onInputChange:function(e,t){H(!0),Ce(t)},isOptionEqualToValue:function(e,t){return e.id===t.id},renderTags:function(e,t){return e.map((function(e,n){return S.createElement(T.w,J({},t({index:n}),{key:n,primaryText:I.J.getUserUsername(e),userStore:I.J.getUserStore(e.userName),option:e,activeOption:X,setActiveOption:K,variant:"filled"}))}))},renderOption:function(e,t,n){var r=n.selected;return S.createElement(w.U,{selected:r,subTitle:I.J.getUserUsername(t),displayName:I.J.getNameToDisplayOfUser(t),userstore:I.J.getUserStore(t.userName),renderOptionProps:e})}}))),R?null:S.createElement(o.Z,{className:"role-assigned-button",variant:"contained",loading:z,onClick:function(){var e,r,o,i,a;W(!0),Ae();var l={Operations:[],failOnErrors:1,schemas:[N.lg.BULK_REQUEST]},u={data:{Operations:[]},method:"PATCH",path:"/v2/Roles/"+t.id},s=Object.keys(pe).map((function(e){return pe[e]})).flat(),d=null!==(e=null==t||null===(r=t.users)||void 0===r?void 0:r.filter((function(e){return void 0===(null==s?void 0:s.find((function(t){return t.id===e.value})))})).filter((function(e){var t=e.display.split("/");return 1===t.length&&g.StringUtils.isEqualCaseInsensitive(oe,Z)||2===t.length&&g.StringUtils.isEqualCaseInsensitive(t[0],oe)})))&&void 0!==e?e:[],f=null==d?void 0:d.map((function(e){return{op:"remove",path:"users[value eq ".concat(e.value,"]")}}));(o=u.data.Operations).push.apply(o,q(f));var p=null!==(i=null==s?void 0:s.filter((function(e){var n;return void 0===(null==t||null===(n=t.users)||void 0===n?void 0:n.find((function(t){return t.value===e.id})))})))&&void 0!==i?i:[],m=null==p?void 0:p.map((function(e){return{op:"add",value:{users:[{value:e.id}]}}}));(a=u.data.Operations).push.apply(a,q(m)),l.Operations.push(u),(0,c.f)(l).then((function(){j((0,h.V_)({description:P("roles:edit.users.notifications.success.description"),level:v.QU.SUCCESS,message:P("roles:edit.users.notifications.success.message")})),n(x)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.detail?j((0,h.V_)({description:P("roles:edit.groups.notifications.error.description",{description:e.response.data.detail}),level:v.QU.ERROR,message:P("roles:edit.groups.notifications.error.message")})):j((0,h.V_)({description:P("roles:edit.groups.notifications.genericError.description"),level:v.QU.ERROR,message:P("roles:edit.groups.notifications.genericError.message")}))})).finally((function(){W(!1)}))},"data-componentid":"".concat(L,"-update-role-users-button")},P("common:update"))))};Q.defaultProps={"data-componentid":"edit-role-users"}},33519:(e,t,n)=>{n.d(t,{u:()=>f});var r=n(37612),o=n(90695),i=n(63068),a=n(93139),l=n(26945),u=n(11192),s=n(43516),c=n(44194),d=n(10479),f=function(e){var t,n=e.isOpen,f=e.onClose,p=e.selectedRole,m=e["data-componentid"],v=(0,d.$)().t;return c.createElement(s.cV,{onClose:function(){return f()},type:"negative",open:n,secondaryAction:v("common:close"),onSecondaryActionClick:function(){return f()},"data-testid":m,closeOnDimmerClick:!1},c.createElement(s.cV.Header,{"data-testid":"".concat(m,"-header")},v("roles:list.confirmations.deleteItemError.header")),c.createElement(s.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(m,"-message")},v("roles:list.confirmations.deleteItemError.message")),c.createElement(s.cV.Content,{"data-testid":"".concat(m,"-content")},c.createElement("span",null,v("roles:list.confirmations.deleteItemError.content")),c.createElement(o.Z,{hidden:!0}),c.createElement(i.Z,null,c.createElement(a.Z,null,c.createElement(l.Z,null,c.createElement(r.sB,null)),c.createElement(u.Z,{primary:null==p||null===(t=p.audience)||void 0===t?void 0:t.display})))))};f.defaultProps={"data-componentid":"role-delete-error-confirmation-modal"}},96646:(e,t,n)=>{n.d(t,{J:()=>r.J});var r=n(9331)},9331:(e,t,n)=>{n.d(t,{J:()=>y});var r,o=n(60486),i=n(76271),a=n(41355),l=n(38463),u=n(86105),s=n(61444),c=n(50699),d=n(46501),f=function(e,t,n){var r=t.shift(),o=n.find((function(e){return e.name===r}));return o||(o={key:e.resourcePath,name:r,title:e.displayName},n.push(o)),t.length&&f(e,t,o.children||(o.children=[])),n};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function v(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}var y=v((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));r=y,h(y,"validateRoleName",(function(e){var t={filter:"displayName eq "+e,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1};return(0,d.QW)(t).then((function(e){var t;return 0===(null==e||null===(t=e.data)||void 0===t?void 0:t.totalResults)}))})),h(y,"getAllPermissions",(function(e){return(0,d.pZ)().then((function(t){if(200===t.status&&t.data&&t.data instanceof Array){var n,r,i;return(null===(n=(r=((0,c.Z)(e)?t.data:t.data.filter((function(t){return!e.includes(t.resourcePath)}))).reduce((function(e,t){return f(t,t.resourcePath.replace(/^\/|\/$/g,"").split("/"),e)}),[]))[0])||void 0===n?void 0:n.title)!==o.$.PERMISSIONS_ROOT_NODE?null===(i=r[0])||void 0===i?void 0:i.children:r}}))})),h(y,"getDisplayName",(function(e){return(null==e?void 0:e.split("/").length)>1?null==e?void 0:e.split("/")[1]:e})),h(y,"getGroupDisplayName",(function(e){return r.getDisplayName(null==e?void 0:e.display)})),h(y,"getUserUsername",(function(e){return r.getDisplayName(null==e?void 0:e.userName)})),h(y,"getUserStore",(function(e){var t,n=(0,u.cr)(null===(t=i.h.getState().config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userStores,l.u4.FEATURE_DICTIONARY.get("USER_STORE_PRIMARY"));return(null==e?void 0:e.split("/").length)>1?null==e?void 0:e.split("/")[0]:n?s.I18n.instance.t("users:userstores.userstoreOptions.primary"):null})),h(y,"getNameToDisplayOfUser",(function(e){var t,n,o,i=null===(t=e.name)||void 0===t?void 0:t.givenName,a=null===(n=e.name)||void 0===n?void 0:n.familyName,l=null===(o=e.emails)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.toString();return i&&a?"".concat(i," ").concat(a):i||(a||(l||r.getUserUsername(e)))})),h(y,"getUserManagedBy",(function(e){var t,n=null===(t=e[a.k.scim.systemSchema])||void 0===t?void 0:t.idpType;return n?n.split("/").length>1?n.split("/")[1]:n:null})),h(y,"getRoleGroupsGroupedByIdp",(function(e){var t=new Map;return(null==e?void 0:e.length)>0&&e.forEach((function(e){var n,r=e.$ref.match(/identity-providers\/([^/]+)/);n=r?r[1]:"LOCAL",t[n]||(t[n]=[]),t[n].push(e)})),t}))},35390:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(92336),o=n(31549),i=n(77452),a=n(14517);const l=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,l=(0,r.__rest)(e,["className"]);const u=(0,a.Z)("oxygen-form-control",n);return(0,o.jsx)(i.Z,Object.assign({ref:t,className:u},l))}));var u,s,c;u='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-form-control {\n  /* Add Styles */ }\n',s=document.getElementsByTagName("head")[0],(c=document.createElement("style")).setAttribute("type","text/css"),c.appendChild(document.createTextNode(u)),s.appendChild(c)},34159:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(92336),o=n(31549),i=n(69673),a=n(14517),l=n(44194),u=n(57806);const s=(0,l.forwardRef)(((e,t)=>{var{className:n,InputLabelProps:l={disableAnimation:!0,focused:!1,shrink:!1},label:s,name:c,required:d}=e,f=(0,r.__rest)(e,["className","InputLabelProps","label","name","required"]);const p=(0,a.Z)("oxygen-select",n),m=Object.assign({disableAnimation:!0,focused:!1,required:d,shrink:!1},l);return(0,o.jsxs)(o.Fragment,{children:[s&&(0,o.jsx)(u.Z,Object.assign({id:c,htmlFor:c},m,{className:(0,a.Z)("oxygen-select-static-label",null==l?void 0:l.className)},{children:s})),(0,o.jsx)(i.Z,Object.assign({ref:t,labelId:c,className:p},f))]})}));var c,d,f;c=".oxygen-select-static-label {\n  margin-top: -40px;\n  margin-left: -14px; }\n",d=document.getElementsByTagName("head")[0],(f=document.createElement("style")).setAttribute("type","text/css"),f.appendChild(document.createTextNode(c)),d.appendChild(f)},73422:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(51139),o=n.n(r),i=n(32234),a=n.n(i)()(o());a.push([e.id,".edit-role.users .MuiFormControl-root{height:100%}.edit-role.users .MuiFormControl-root .MuiSelect-select{padding:11.5px}.edit-role.users .MuiFormControl-root .MuiInputBase-adornedStart{padding:6px !important}.edit-role.users .MuiFormControl-root .MuiInputBase-adornedEnd{padding:9.5px}.edit-role.users .MuiFormControl-root .MuiInputBase-formControl{height:100%}",""]);const l=a}}]);