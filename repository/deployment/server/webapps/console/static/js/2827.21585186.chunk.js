"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[2827],{12827:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var l=a(55007),n=a(6894),i=a(25134),r=a(60486),c=a(90302),o=a(40838),u=a(50102),s=a(79408),d=a(51021),f=a(6833),m=a(82406),h=a(96334),v=a(43516),g=a(44194),p=a(10479),y=a(47245),S=a(26154),b=a(53103);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,n,i,r,c=[],o=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(l=i.call(a)).done)&&(c.push(l.value),c.length!==t);o=!0);}catch(e){u=!0,n=e}finally{try{if(!o&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(u)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var k=function(e){var t,a=e["data-testid"],E=(0,p.$)().t,k=(0,v.fQ)().getLink,A=[{key:0,text:E("common:name"),value:"displayName"},{key:1,text:E("claims:local.attributes.attributeURI"),value:"claimURI"}],I=(0,y.v9)((function(e){return e.config.ui.features})),L=(0,y.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),P=C((0,g.useState)(null),2),R=P[0],w=P[1],O=C((0,g.useState)(0),2),U=O[0],_=O[1],x=C((0,g.useState)(c.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),T=x[0],M=x[1],Q=C((0,g.useState)(!1),2),D=Q[0],N=Q[1],V=C((0,g.useState)(""),2),F=V[0],j=V[1],$=C((0,g.useState)(null),2),z=$[0],q=$[1],B=C((0,g.useState)(A[0]),2),H=B[0],K=B[1],W=C((0,g.useState)(!0),2),X=W[0],Z=W[1],G=C((0,g.useState)(""),2),J=G[0],Y=G[1],ee=C((0,g.useState)(!0),2),te=ee[0],ae=ee[1],le=C((0,g.useState)(!1),2),ne=le[0],ie=le[1],re=C((0,h.cC)(),2),ce=re[0],oe=re[1],ue=(0,y.I0)(),se=(0,g.useRef)(!0),de=function(e,t,a,l){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!L;ae(!0);var r={"exclude-identity-claims":i,filter:l||null,limit:e||null,offset:a||null,sort:t||null};(0,n.WN)(r).then((function(e){w(e),q((0,s.f)(e,H.value,X))})).catch((function(e){var t,a;ue((0,m.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||E("claims:local.notifications.getClaims.genericError.description"),level:f.QU.ERROR,message:(null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||E("claims:local.notifications.getClaims.genericError.message")}))})).finally((function(){ae(!1)}))};(0,g.useEffect)((function(){se.current?se.current=!1:q((0,s.f)(z,H.value,X))}),[H,X]),(0,g.useEffect)((function(){de(null,null,null,null,!L),(0,n.vR)("local").then((function(e){j(e.dialectURI)})).catch((function(e){ue((0,m.V_)({description:(null==e?void 0:e.description)||E("claims:local.notifications.getLocalDialect.genericError.message"),level:f.QU.ERROR,message:(null==e?void 0:e.message)||E("claims:local.notifications.getLocalDialect.genericError.message")}))}))}),[]);var fe=function(e){var t=(0,u.g)(R,e,H.value,X);q(t),Y(me(e)),_(0),oe()},me=function(e){var t=null==e?void 0:e.split(" "),a="";if(t)switch(t[1]){case"eq":a="".concat(t[0]," equals to ").concat(t[2]);break;case"co":a="".concat(t[0]," containing ").concat(t[2]);break;case"sw":a="".concat(t[0]," starting with ").concat(t[2]);break;case"ew":a="".concat(t[0]," ending with ").concat(t[2])}return a};return g.createElement(g.Fragment,null,D?g.createElement(b.C$,{open:D,onClose:function(){N(!1)},update:de,claimURIBase:F,"data-testid":"".concat(a,"-add-local-claims-wizard")}):null,g.createElement(v.Xg,{action:(te||!(!J&&(null==z?void 0:z.length)<=0))&&d.rk.attributes.addAttribute&&g.createElement(l.di,{when:null==I||null===(t=I.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create},g.createElement(v.KM,{onClick:function(){N(!0)},"data-testid":"".concat(a,"-list-layout-add-button")},g.createElement(S.Z,{name:"add"}),E("claims:local.pageLayout.local.action"))),isLoading:te,title:E("claims:local.pageLayout.local.title"),pageTitle:E("claims:local.pageLayout.local.title"),description:g.createElement(g.Fragment,null,E(d.rk.attributes.description),g.createElement(v.eb,{link:k("manage.attributes.attributes.learnMore")},E("common:learnMore"))),backButton:{onClick:function(){o.m.push(r.$.getPaths().get("CLAIM_DIALECTS"))},text:E("claims:local.pageLayout.local.back")},"data-testid":"".concat(a,"-page-layout")},g.createElement(v.PS,{resetPagination:ce,advancedSearch:g.createElement(i.n,{onFilter:fe,filterAttributeOptions:[{key:0,text:E("common:name"),value:"displayName"},{key:1,text:E("claims:local.attributes.attributeURI"),value:"claimURI"}],filterAttributePlaceholder:E("claims:local.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:E("claims:local.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:E("claims:local.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:E("claims:local.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:ne,"data-testid":"".concat(a,"-list-advanced-search")}),currentListSize:T,listItemLimit:T,onItemsPerPageDropdownChange:function(e,t){M(t.value)},onPageChange:function(e,t){_((t.activePage-1)*T)},onSortStrategyChange:function(e,t){K(A.filter((function(e){return e.value===t.value}))[0])},leftActionPanel:null,showPagination:!0,sortOptions:A,sortStrategy:H,showTopActionPanel:te||!(!J&&(null==z?void 0:z.length)<=0),totalPages:Math.ceil((null==z?void 0:z.length)/T),totalListSize:null==z?void 0:z.length,onSortOrderChange:function(e){Z(e)},"data-testid":"".concat(a,"-list-layout")},g.createElement(b.Sf,{advancedSearch:g.createElement(i.n,{onFilter:fe,filterAttributeOptions:[{key:0,text:E("common:name"),value:"displayName"},{key:1,text:E("claims:local.attributes.attributeURI"),value:"claimURI"}],filterAttributePlaceholder:E("claims:local.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:E("claims:local.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:E("claims:local.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:E("claims:local.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:ne,"data-testid":"".concat(a,"-list-advanced-search")}),showTableHeaders:!0,isLoading:te,list:function(e,t,a){return null==e?void 0:e.slice(a,a+t)}(z,T,U),localClaim:b.RH.LOCAL,update:de,onEmptyListPlaceholderActionClick:function(){return N(!0)},onSearchQueryClear:function(){ie(!ne),Y(""),q(R)},searchQuery:J,"data-testid":"".concat(a,"-list"),featureConfig:I}))))};k.defaultProps={"data-testid":"local-claims"};const A=k}}]);