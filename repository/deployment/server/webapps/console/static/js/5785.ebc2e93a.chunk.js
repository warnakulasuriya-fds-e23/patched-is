"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[5785],{95775:(t,e,n)=>{n.d(e,{b:()=>i});var r=n(76271),o=n(96124),a=n(6833),i=function(t,e,n,i){var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c={headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.GET,params:{after:n,before:i,filter:t,limit:e,recursive:l},url:(u?r.h.getState().config.endpoints.rootOrganization:r.h.getState().config.endpoints.organizations)+"/organizations/meta-attributes"},s=(0,o.Z)(c,{revalidateIfStale:!1});return{data:s.data,error:s.error,isLoading:s.isLoading,isValidating:s.isValidating,mutate:s.mutate}}},75785:(t,e,n)=>{n.r(e),n.d(e,{default:()=>ut});var r=n(55007),o=n(9821),a=n(25134),i=n(56139),l=n(90302),u=n(43974),c=n(86105),s=n(6833),f=n(82406),m=n(61444),d=n(43516),p=n(90408),g=n(50699),b=n(44194),v=n(10479),h=n(47245),y=n(26154),E=n(90955),S=n(18347),O=n(21212),I=n(3658),z=n(73405),A=n(22557),L=n.n(A),w=n(55495),C=n(71619),P=n(51835),T=n.n(P),j=n(27975),k=n.n(j),R=n(55900),_=n.n(R),M=n(21555),x=n.n(M),F=n(3621),D=n.n(F),Z=n(5062),N=n.n(Z),U=n(92571),V={};V.styleTagTransform=N(),V.setAttributes=x(),V.insert=_().bind(null,"head"),V.domAPI=k(),V.insertStyleElement=D();T()(U.Z,V);U.Z&&U.Z.locals&&U.Z.locals;var Q=n(72968),B=n(12638),X=n(95775);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q.apply(null,arguments)}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){G(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function G(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H(t){return function(t){if(Array.isArray(t))return tt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||Y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){if(t){if("string"==typeof t)return tt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(t,e):void 0}}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const et=function(t){var e=t.onMetaAttributeChange,n=t.hasErrors,r=t["data-componentid"],o=void 0===r?"organization-meta-attribute":r,a=(0,v.$)().t,i=(0,h.I0)(),l=J((0,b.useState)([]),2),u=l[0],c=l[1],m=J((0,b.useState)(""),2),d=m[0],p=m[1],g=J((0,b.useState)(!0),2),y=g[0],E=g[1],S=J((0,b.useState)(null),2),A=S[0],P=S[1],T=J((0,b.useState)({after:void 0,filter:void 0,limit:10}),2),j=T[0],k=T[1],R=(0,X.b)(j.filter,j.limit,j.after),_=R.data,M=R.isLoading,x=R.error,F=R.isValidating;(0,b.useEffect)((function(){var t,e;if(_&&!M&&!F){var n=(null===(t=_.attributes)||void 0===t?void 0:t.map((function(t){return{text:t,value:t}})))||[];c((function(t){return[].concat(H(t),H(n))}));var r=!1;null==_||null===(e=_.links)||void 0===e||e.forEach((function(t){if("next"===t.rel){var e=t.href.split("after=")[1];P(e),E(!!e),r=!0}})),r||(P(""),E(!1))}}),[_]),(0,b.useEffect)((function(){x&&i((0,f.V_)({description:a("organizations:notifications.getMetaAttributesList.genericError.description"),level:s.QU.ERROR,message:a("organizations:notifications.getMetaAttributesList.genericError.message")}))}),[x]);var D=function(t,e){P(t),p(e),k((function(n){return W(W({},n),{},{after:t,filter:e?"".concat("attributes co ").concat(e):""})}))},Z=(0,b.useCallback)((0,w.Z)((function(t,e){var n=null!=e?e:"";c([]),D("",n)}),300),[D]),N=function(){!y||M||F||D(A,d)},U=(0,b.useMemo)((function(){return function(t){return b.createElement(C.Z,{dataLength:u.length,next:N,hasMore:y,loader:b.createElement(Q.Z,{className:"meta-attribute-autocomplete"},b.createElement(I.Z,{size:22,className:"list-item-loader"}),b.createElement(Q.Z.Content,{className:"list-item-content"})),height:u.length>4?155:"auto"},b.createElement("div",q({style:{overflow:"visible"}},t)))}}),[u.length,N,y]);return b.createElement("div",{className:L()("meta-attribute-autocomplete",{error:n}),"data-componentid":"".concat(o,"-autocomplete")},b.createElement(O.Z,{disablePortal:!0,fullWidth:!0,"aria-label":"Meta Attribute selection",componentsProps:{paper:{elevation:2},popper:{modifiers:[{enabled:!1,name:"flip"},{enabled:!1,name:"preventOverflow"}]}},getOptionLabel:function(t){return t.text},isOptionEqualToValue:function(t,e){return t.value===e.value},renderOption:function(t,e){return b.createElement("li",t,b.createElement(B.Z.Content,null,e.text))},options:u,onChange:function(t,n){var r=n&&n.value?n.value:"";e(r)},onInputChange:Z,noOptionsText:a("common:noResultsFound"),ListboxComponent:U,renderInput:function(t){return b.createElement(z.Z,q({},t,{label:a("organizations:advancedSearch.form.inputs.filterMetaAttribute.label"),placeholder:a("organizations:advancedSearch.form.inputs.filterMetaAttribute.placeholder"),size:"small",InputLabelProps:{required:!0},onKeyDown:function(t){"Enter"===t.key&&t.preventDefault()},"data-componentid":"".concat(o,"-input-field")}))}}),n&&b.createElement("div",{className:"ui pointing above prompt label",role:"alert","aria-atomic":"true"},b.createElement("p",null,a("organizations:advancedSearch.form.inputs.filterMetaAttribute.validations.empty"))))};function nt(t){return function(t){if(Array.isArray(t))return at(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ot(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||ot(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){if(t){if("string"==typeof t)return at(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(t,e):void 0}}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var it=[{key:0,text:m.I18n.instance.t("common:name"),value:"name"}],lt=function(t){var e,n,m,O,I,z,A=t["data-componentid"],L=(0,h.v9)((function(t){return t.config.ui.features})),w=(0,v.$)().t,C=(0,h.I0)(),P=(0,d.fQ)().getLink,T=(0,r.EV)(null==L||null===(e=L.organizations)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.read),j=(0,c.cr)(L.organizations,"organizations.filterByMetadataAttributes"),k=rt((0,b.useState)(null),2),R=k[0],_=k[1],M=rt((0,b.useState)(""),2),x=M[0],F=M[1],D=rt((0,b.useState)(it[0]),2),Z=D[0],N=D[1],U=rt((0,b.useState)(l.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),V=U[0],Q=U[1],B=rt((0,b.useState)(!0),2),X=B[0],$=B[1],q=rt((0,b.useState)(!1),2),K=q[0],W=q[1],G=rt((0,b.useState)(void 0),2),H=G[0],J=G[1],Y=rt((0,b.useState)(void 0),2),tt=Y[0],ot=Y[1],at=rt((0,b.useState)(null),2),lt=at[0],ut=at[1],ct=rt((0,b.useState)([]),2),st=ct[0],ft=ct[1],mt=rt((0,b.useState)(""),2),dt=mt[0],pt=mt[1],gt=rt((0,b.useState)(""),2),bt=gt[0],vt=gt[1],ht=rt((0,b.useState)(""),2),yt=ht[0],Et=ht[1],St=rt((0,b.useState)(""),2),Ot=St[0],It=St[1],zt=rt((0,b.useState)(1),2),At=zt[0],Lt=zt[1],wt=rt((0,b.useState)(!1),2),Ct=wt[0],Pt=wt[1],Tt=rt((0,b.useState)(""),2),jt=Tt[0],kt=Tt[1],Rt=rt((0,b.useState)(!1),2),_t=Rt[0],Mt=Rt[1],xt=rt((0,b.useState)(!1),2),Ft=xt[0],Dt=xt[1],Zt=u.l.getInstance(),Nt=rt((0,b.useState)(!1),2),Ut=Nt[0],Vt=Nt[1];(0,b.useEffect)((function(){var t,e=!1,n=!1;null==R||null===(t=R.links)||void 0===t||t.forEach((function(t){if("next"===t.rel){var r=t.href.split("after=")[1];pt(r),J(!0),e=!0}if("previous"===t.rel){var o=t.href.split("before=")[1];vt(o),ot(!0),n=!0}})),e||(pt(""),J(!1)),n||(vt(""),ot(!1))}),[R]);var Qt=(0,b.useCallback)((function(){Lt(1),Vt(!Qt)}),[Lt]),Bt=(0,b.useMemo)((function(){return!lt||(0,g.Z)(lt)?x:"".concat(x?x+" and ":"","parentId eq ").concat(lt.id)}),[x,lt]),Xt=(0,b.useCallback)((function(t,e,n,r,o){T&&($(!0),(0,E.jX)(e,t,n,r,!1).then((function(t){_(t)})).catch((function(t){_(null),null!=t&&t.description?C((0,f.V_)({description:t.description,level:s.QU.ERROR,message:w("organizations:notifications.getOrganizationList.error.message")})):C((0,f.V_)({description:w("organizations:notifications.getOrganizationList.genericError.description"),level:s.QU.ERROR,message:w("organizations:notifications.getOrganizationList.genericError.message")}))})).finally((function(){$(!1)})))}),[E.jX,C,w,_,$]);(0,b.useEffect)((function(){Xt(V,Bt,null,null)}),[V,Xt,Bt]);var $t=(0,E.IE)(Bt,V,Ot,yt,o.j.CONSOLE_APP_NAME,!1),qt=$t.data,Kt=$t.isLoading,Wt=$t.error,Gt=$t.mutate;(0,b.useEffect)((function(){Wt&&Ht(Wt)}),[Wt]);var Ht=function(t){var e,n;null!=t&&null!==(e=t.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?C((0,f.V_)({description:null==t||null===(n=t.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description,level:s.QU.ERROR,message:w("organizations:notifications.getOrganizationList.error.message")})):C((0,f.V_)({description:w("organizations:notifications.getOrganizationList.genericError.description"),level:s.QU.ERROR,message:w("organizations:notifications.getOrganizationList.genericError.message")}))},Jt=(0,b.useCallback)((function(t){Qt(),F(t),kt(""),Pt(!1)}),[Qt,F]),Yt=(0,b.useCallback)((function(t,e){var n=parseInt(null==e?void 0:e.activePage);n>At?(Xt(V,Bt,dt,null),It(dt),Et(null)):n<At&&(Xt(V,Bt,null,bt),It(null),Et(bt)),Lt(n)}),[Xt,At,Bt,V,dt,bt]),te=(0,b.useCallback)((function(t,e){Q(e.value),Qt()}),[Q,Qt]),ee=function(){Xt(V,Bt,"",""),Gt()},ne=(0,b.useCallback)((function(){Dt((function(t){return!t})),F(""),Qt()}),[F,Qt,Dt]);return b.createElement(b.Fragment,null,b.createElement(d.Xg,{action:!X&&!Kt&&!(!x&&((0,g.Z)(R)||(null==R||null===(n=R.organizations)||void 0===n?void 0:n.length)<=0))&&b.createElement(r.di,{when:null==L||null===(m=L.organizations)||void 0===m||null===(m=m.scopes)||void 0===m?void 0:m.create},b.createElement(d.KM,{disabled:X,loading:X,onClick:function(){Zt.publish("organization-click-new-organization-button"),W(!0)},"data-componentid":"".concat(A,"-list-layout-add-button")},b.createElement(y.Z,{name:"add"}),w("organizations:list.actions.add"))),pageTitle:w("pages:organizations.title"),title:w("pages:organizations.title"),description:b.createElement(b.Fragment,null,w("pages:organizations.subTitle"),b.createElement(d.eb,{link:P("manage.organizations.learnMore")},w("common:learnMore"))),"data-componentid":"".concat(A,"-page-layout")},b.createElement(d.PS,{advancedSearch:b.createElement(a.n,{onClose:function(){kt(""),Pt(!1)},onFilter:Jt,onFilterAttributeOptionsChange:function(t){Mt(!1),"attributes"===t.get(i.s.FILTER_ATTRIBUTE_FIELD_IDENTIFIER)?Pt(!0):(kt(""),Pt(!1))},onSubmitError:function(){var t=!1;return!Ct||null!==jt&&""!==jt||(t=!0),Mt(t),t},getQuery:function(t){return Ct&&jt?t.get(i.s.FILTER_ATTRIBUTE_FIELD_IDENTIFIER)+"."+jt+" "+t.get(i.s.FILTER_CONDITION_FIELD_IDENTIFIER)+" "+t.get(i.s.FILTER_VALUES_FIELD_IDENTIFIER):null},filterAttributeOptions:[{key:0,text:w("common:name"),value:"name"}].concat(nt(j?[{key:1,text:w("common:metaAttributes"),value:"attributes"}]:[])),filterAttributePlaceholder:w("organizations:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:w("organizations:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:w("organizations:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:w("organizations:advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:Ft,"data-componentid":"".concat(A,"-list-advanced-search"),"data-testid":"".concat(A,"-list-advanced-search")},Ct&&j&&b.createElement(et,{onMetaAttributeChange:function(t){Mt(!1),kt(t)},hasErrors:_t})),currentListSize:null==R||null===(O=R.organizations)||void 0===O?void 0:O.length,listItemLimit:V,onItemsPerPageDropdownChange:te,onPageChange:Yt,onSortStrategyChange:function(t,e){N((0,p.Z)(it,(function(t){return e.value===t.value})))},showPagination:!0,showTopActionPanel:X||(x||"").trim().length>0||(null==R||null===(I=R.organizations)||void 0===I?void 0:I.length)>0,sortOptions:it,sortStrategy:Z,totalPages:10,totalListSize:null==R||null===(z=R.organizations)||void 0===z?void 0:z.length,paginationOptions:{disableNextButton:!H,disablePreviousButton:!tt},isLoading:X,"data-componentid":"".concat(A,"-list-layout"),resetPagination:Ut,activePage:At},b.createElement(S.Bg,{list:R,authorizedList:qt,onOrganizationDelete:function(){Xt(V,Bt,"",""),Et(""),It("")},onEmptyListPlaceholderActionClick:function(){W(!0)},onSearchQueryClear:ne,searchQuery:x,"data-componentid":"organization-list",onListItemClick:function(t,e){if(!st.find((function(t){return t.id===e.id}))){ne(),ut(e),Qt();var n=nt(st);n.push(e),ft(n)}},parentOrganization:lt,onListMutate:ee})),K&&b.createElement(S.Xh,{onUpdate:ee,closeWizard:function(){return W(!1)},parent:lt})))};lt.defaultProps={"data-componentid":"organizations"};const ut=lt},92571:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(51139),o=n.n(r),a=n(32234),i=n.n(a)()(o());i.push([t.id,".ui.form .meta-attribute-autocomplete{margin-bottom:1em}.ui.form .meta-attribute-autocomplete input{border:none}.ui.form .meta-attribute-autocomplete input:-ms-input-placeholder{font-size:1em;color:rgba(0,0,0,.95) !important}.ui.form .meta-attribute-autocomplete input::placeholder{font-size:1em;color:rgba(0,0,0,.95) !important}.ui.form .meta-attribute-autocomplete label{font-size:.92857143em;color:rgba(0,0,0,.87);margin-bottom:.28571429rem}.ui.form .meta-attribute-autocomplete .ui.label{white-space:normal;background:#fff !important;border:1px solid #e0b4b4 !important;color:#9f3a38 !important}.ui.form .meta-attribute-autocomplete .list-item-loader{margin:8px}.ui.form .meta-attribute-autocomplete .list-item-content{display:flex !important;align-items:center}.ui.form .meta-attribute-autocomplete .prompt.label{white-space:normal;background:#fff !important;border:1px solid #e0b4b4 !important;color:#9f3a38 !important}.ui.form .meta-attribute-autocomplete.error{color:#9f3a38}.ui.form .meta-attribute-autocomplete.error .MuiOutlinedInput-notchedOutline{border-color:#e0b4b4}.ui.form .meta-attribute-autocomplete.error .MuiSvgIcon-root{color:#9f3a38}.ui.form .meta-attribute-autocomplete.error .MuiTextField-root{background:#fff6f6;border-radius:8px}.ui.form .meta-attribute-autocomplete.error .MuiInputBase-input{background:#fff6f6}.ui.form .meta-attribute-autocomplete.error label{color:#9f3a38}.ui.form .meta-attribute-autocomplete.error input:-ms-input-placeholder{font-size:1em;color:#9f3a38 !important}.ui.form .meta-attribute-autocomplete.error input::placeholder{font-size:1em;color:#9f3a38 !important}",""]);const l=i}}]);