"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[7049],{17049:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var n,r=a(40838),l=a(43974),i=a(6833),o=a(82406),s=a(30382),c=a(43516),m=a(55495),d=a(40251),u=a(50699),f=a(44194),E=a(10479),h=a(47245),g=a(26154),p=a(89141),v=a(95165),_=a(5323),N=a(62508),A=a(71813),T=["title","titleId"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},R.apply(null,arguments)}var P=function(e,t){var a=e.title,r=e.titleId,l=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;a[n]=e[n]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,T);return f.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",width:162,height:40,viewBox:"0 0 162 40",ref:t,"aria-labelledby":r},l),a?f.createElement("title",{id:r},a):null,n||(n=f.createElement("g",{id:"asgardeo-by-wso2-logo-dark-16x40",transform:"translate(-401.5 -388.98)"},f.createElement("path",{id:"Path_264","data-name":"Path 264",d:"M717.966,388.98l.961,1.667-1.065,1.846h2.13l.966,1.667H714.97Z",transform:"translate(-157.457)",fill:"#ff7300"}),f.createElement("path",{id:"Path_265","data-name":"Path 265",d:"M705.95,394.161l.966-1.667h2.13l-1.065-1.846.961-1.667,3,5.181Z",transform:"translate(-152.926)",fill:"#ff7300"}),f.createElement("path",{id:"Path_266","data-name":"Path 266",d:"M714.521,401.971l-1.065-1.846-1.07,1.846H710.46l3-5.181,2.991,5.181Z",transform:"translate(-155.192 -3.923)"}),f.createElement("path",{id:"Path_267","data-name":"Path 267",d:"M445.61,417.771v-3.877h9.785a1.627,1.627,0,0,0,0-3.255h-4.28a5.5,5.5,0,0,1,0-11.009H460.9v3.877h-9.785a1.6,1.6,0,0,0-1.15.473,1.627,1.627,0,0,0,1.15,2.782h4.28a5.5,5.5,0,0,1,0,11.009Z",transform:"translate(-22.157 -5.35)"}),f.createElement("path",{id:"Path_268","data-name":"Path 268",d:"M488.049,417.768a9.073,9.073,0,1,1,0-18.141h7.645V403.5h-7.645a5.2,5.2,0,0,0,0,10.387h3.772v-3.255h-2.852v-3.857H495.7v11.009Z",transform:"translate(-38.81 -5.347)"}),f.createElement("path",{id:"Path_269","data-name":"Path 269",d:"M574.367,417.771l-8.75-8.67v8.67H561.74V399.63h9.785a5.5,5.5,0,0,1,3.892,9.4,5.879,5.879,0,0,1-1.553,1.12l-1.155.562,7.077,7.062Zm-2.842-10.989a1.627,1.627,0,1,0,0-3.255h-5.908v3.255Z",transform:"translate(-80.489 -5.35)"}),f.createElement("path",{id:"Path_270","data-name":"Path 270",d:"M600.89,417.768V399.628h7.645a9.073,9.073,0,1,1,0,18.141Zm7.645-3.877a5.2,5.2,0,0,0,0-10.387h-3.768v10.387Z",transform:"translate(-100.154 -5.347)"}),f.createElement("path",{id:"Path_271","data-name":"Path 271",d:"M679.4,417.785a9.063,9.063,0,1,1,6.415-2.658A8.655,8.655,0,0,1,679.4,417.785Zm0-14.264a5.2,5.2,0,1,0,3.668,1.523A5.042,5.042,0,0,0,679.4,403.521Z",transform:"translate(-135.037 -5.364)"}),f.createElement("path",{id:"Path_272","data-name":"Path 272",d:"M401.5,417.771h4.335l6.142-10.636,6.137,10.636h4.33L411.977,399.63Z",transform:"translate(0 -5.35)"}),f.createElement("path",{id:"Path_273","data-name":"Path 273",d:"M516.16,417.771h4.335l6.137-10.636,6.137,10.636H537.1L526.631,399.63Z",transform:"translate(-57.594 -5.35)"}),f.createElement("path",{id:"Path_274","data-name":"Path 274",d:"M637.84,417.726V399.65h15.155v3.842H641.707v3.325h8.466v3.753h-8.466v3.315h11.288v3.842Z",transform:"translate(-118.715 -5.36)"}),f.createElement("path",{id:"Path_280","data-name":"Path 280",d:"M637.8,451.163v-3.857h1.259a1.458,1.458,0,0,1,.946.259.941.941,0,0,1,.319.766.786.786,0,0,1-.154.5,1,1,0,0,1-.418.323.906.906,0,0,1,.5.333.966.966,0,0,1,.179.582,1.025,1.025,0,0,1-.333.816,1.388,1.388,0,0,1-.951.3Zm.5-2.215h.766a.826.826,0,0,0,.538-.164.642.642,0,0,0,0-.916.9.9,0,0,0-.567-.149h-.752Zm0,.408v1.389h.841a.791.791,0,0,0,.557-.184.632.632,0,0,0,.209-.5c0-.463-.254-.7-.761-.7Z",transform:"translate(-118.694 -29.449)"}),f.createElement("path",{id:"Path_281","data-name":"Path 281",d:"M645.054,451.45l.667-2.15h.523l-1.155,3.335c-.174.5-.458.712-.846.712h-.095l-.184-.035v-.4h.134a.642.642,0,0,0,.388-.1.7.7,0,0,0,.229-.368l.109-.289L643.8,449.32h.537Z",transform:"translate(-121.708 -30.459)"}),f.createElement("g",{id:"Layer_1",transform:"translate(526.705 417.664)"},f.createElement("g",{id:"Group_5","data-name":"Group 5",transform:"translate(0 0)"},f.createElement("path",{id:"Path_298","data-name":"Path 298",d:"M40.452,30.861l-2.429,6.2-2.442-6.63-2.588,6.615-2.208-6.185h-1l3.173,8.686,2.6-6.616L38,39.554l3.46-8.693Z",transform:"translate(-29.781 -30.318)",fill:"#ff7300"}),f.createElement("path",{id:"Path_299","data-name":"Path 299",d:"M105.487,36.886c-.405-.331-2.527-1.434-2.8-1.624a.95.95,0,0,1-.409-.83,1.093,1.093,0,0,1,.415-.886,1.533,1.533,0,0,1,1.01-.341,1.346,1.346,0,0,1,.656.149,1.658,1.658,0,0,1,.52.484l.087.135a.485.485,0,0,1,.1.124l.731-.47a2.593,2.593,0,0,0-.9-.961,2.188,2.188,0,0,0-1.158-.328,2.5,2.5,0,0,0-1.723.595,1.951,1.951,0,0,0-.668,1.525,1.623,1.623,0,0,0,.606,1.356c.405.318,2.425,1.366,2.738,1.581a1.079,1.079,0,0,1,.47.954,1.616,1.616,0,0,1-.476,1.195,1.635,1.635,0,0,1-1.208.477,1.49,1.49,0,0,1-1.065-.4,2.205,2.205,0,0,1-.6-1.139l-.892.273a3.339,3.339,0,0,0,.338.892,2.425,2.425,0,0,0,.561.674,2.729,2.729,0,0,0,3.513-.185,2.424,2.424,0,0,0,.755-1.8A1.76,1.76,0,0,0,105.487,36.886Z",transform:"translate(-89.929 -31.93)",fill:"#ff7300"}),f.createElement("path",{id:"Path_300","data-name":"Path 300",d:"M188,57.6a2.419,2.419,0,0,1,.666-.089,2.044,2.044,0,0,1,2.113,2.047,2.229,2.229,0,0,1-.28,1.091,7.773,7.773,0,0,1-1.085,1.38l-1.7,1.838h3.16v.661h-4.649l2.616-2.825a8.566,8.566,0,0,0,1.036-1.265,1.691,1.691,0,0,0,.24-.867,1.332,1.332,0,0,0-.431-.994,1.461,1.461,0,0,0-1.055-.416,1.587,1.587,0,0,0-.649.129C188,58.125,188,57.661,188,57.6Z",transform:"translate(-162.039 -53.212)"}),f.createElement("g",{id:"Group_4","data-name":"Group 4",transform:"translate(16.275)"},f.createElement("ellipse",{id:"Ellipse_2","data-name":"Ellipse 2",cx:3.765,cy:3.805,rx:3.765,ry:3.805,transform:"translate(0.922 0.869)",fill:"#ff7300"}),f.createElement("path",{id:"Path_301","data-name":"Path 301",d:"M139.753,29.706a4.674,4.674,0,1,0,4.687,4.674A4.68,4.68,0,0,0,139.753,29.706Zm0,8.479a3.805,3.805,0,1,1,3.765-3.805A3.785,3.785,0,0,1,139.753,38.185Z",transform:"translate(-135.066 -29.706)"}),f.createElement("path",{id:"Path_302","data-name":"Path 302",d:"M148.572,42.105l-1.364,0-.68,1.224-1.7-4.138-1.527,3.4-2.244,0a3.828,3.828,0,0,0,.067.55l2.533.005,1.149-2.557,1.646,4.011,1.079-1.941,1.044,0c.005-.084.009-.168.009-.253S148.579,42.2,148.572,42.105Z",transform:"translate(-140.133 -37.728)",fill:"#fff"})))))))},Z=(0,f.forwardRef)(P);a.p;a(61323);var L=a(30243),C=function(e){return e.US="US",e.EU="EU",e}({}),b=a(93714);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],s=!0,c=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var x=function(e){var t,a,n=e["data-testid"],T=(0,h.I0)(),R=(0,E.$)().t,P=O((0,f.useState)(!1),2),y=P[0],x=P[1],M=O((0,f.useState)(!1),2),S=M[0],w=M[1],U=O((0,f.useState)(!1),2),I=U[0],H=U[1],F=O((0,f.useState)(!1),2),D=F[0],k=F[1],j=O((0,f.useState)(!1),2),z=j[0],B=j[1],G=O((0,f.useState)(!1),2),Q=G[0],K=G[1],V=O((0,f.useState)(),2),X=V[0],q=V[1],$=O((0,f.useState)(L.A.TENANT_URI_PLACEHOLDER),2),W=$[0],J=$[1],Y=O((0,f.useState)(),2),ee=Y[0],te=Y[1],ae=(0,h.v9)((function(e){var t;return null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t||null===(t=t.extensions)||void 0===t?void 0:t.deploymentRegion})),ne=(0,h.v9)((function(e){var t;return null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t||null===(t=t.extensions)||void 0===t?void 0:t.regionQualifiedConsoleUrl})),re=(0,h.v9)((function(e){var t;return null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t?void 0:t.tenantPrefix})),le=(0,f.useMemo)((function(){if(ae)return ae===C.EU?C.US:C.EU}),[ae]),ie=(0,f.useMemo)((function(){if(!ne)return L.A.US_PROD_CONSOLE_FALLBACK_URL;if(ae===C.US){if(ne.includes("."+C.EU.toLowerCase())&&L.A.EU_PROD_CONSOLE_FALLBACK_URL,ne.includes("asgardeo.io")){var e=ne.indexOf("asgardeo.io");return[ne.slice(0,e),"".concat(C.EU.toLowerCase(),"."),ne.slice(e)].join("")}if(ne.includes("asg.io")){var t=ne.indexOf("asg.io");return[ne.slice(0,t),"".concat(C.EU.toLowerCase(),"."),ne.slice(t)].join("")}return L.A.EU_PROD_CONSOLE_FALLBACK_URL}return ne.includes("."+C.EU.toLowerCase())?ne.replace(/.eu/g,""):L.A.US_PROD_CONSOLE_FALLBACK_URL}),[ne]),oe=O((0,c.IK)(),3),se=oe[0],ce=oe[1],me=oe[2],de=l.l.getInstance();(0,f.useEffect)((function(){ee&&Q&&S&&!y&&(K(!1),he())}),[ee,Q]);var ue,fe=function(e){var t=!!e&&!!e.match(L.A.FORM_FIELD_CONSTRAINTS.TENANT_NAME_PATTERN);return t||(k(!1),Ee.cancel()),t},Ee=(0,f.useCallback)((0,m.Z)((function(e){(0,A.gt)(e).then((function(e){200==e.status&&x(!0),k(!1)})).catch((function(e){404==e.response.status&&x(!1),k(!1)}))}),1e3),[]),he=function(){H(!0),q(R("extensions:manage.features.tenant.wizards.addTenant.forms.loaderMessages.duplicateCheck")),(0,A.gt)(null==ee?void 0:ee.tenantName).then((function(e){H(!1),200==e.status&&(x(!0),ce({description:R("extensions:manage.features.tenant.wizards.addTenant.forms.fields.tenantName.validations.duplicate",{tenantName:ee.tenantName}),level:i.QU.ERROR,message:R("extensions:manage.features.tenant.notifications.addTenant.genericError.message")}))})).catch((function(e){404==e.response.status?ge(ee.tenantName):(H(!1),ce({description:R("extensions:manage.features.tenant.notifications.addTenant.genericError.description"),level:i.QU.ERROR,message:R("extensions:manage.features.tenant.notifications.addTenant.genericError.message")}))}))},ge=function(e){H(!0),q(R("extensions:manage.features.tenant.wizards.addTenant.forms.loaderMessages.tenantCreate")),(0,A.RB)(e).then((function(t){201===t.status&&(de.publish("create-new-organization"),T((0,o.V_)({description:R("extensions:manage.features.tenant.notifications.addTenant.success.description",e),level:i.QU.SUCCESS,message:R("extensions:manage.features.tenant.notifications.addTenant.success.message")})),q(R("extensions:manage.features.tenant.wizards.addTenant.forms.loaderMessages.tenantSwitch")),(0,d.Z)((function(){H(!1),(0,b.R)(e)}),5e3))})).catch((function(e){var t,a;H(!1),null!==(t=e.response.data)&&void 0!==t&&t.code&&["TM-10011","TM-10004","TM-10008","TM-10005"].includes(e.response.data.code)?ce({description:R("extensions:manage.features.tenant.notifications.missingClaims.description"),level:i.QU.ERROR,message:R("extensions:manage.features.tenant.notifications.missingClaims.message")}):null!==(a=e.response.data)&&void 0!==a&&a.code&&["TM-10013"].includes(e.response.data.code)?ce({description:R("extensions:manage.features.tenant.notifications.addTenant.limitReachError.description"),level:i.QU.ERROR,message:R("extensions:manage.features.tenant.notifications.addTenant.limitReachError.message")}):ce({description:R("extensions:manage.features.tenant.notifications.addTenant.genericError.description"),level:i.QU.ERROR,message:R("extensions:manage.features.tenant.notifications.addTenant.genericError.message")})}))};return f.createElement(c.Xg,{padded:!1,contentTopMargin:!1,className:"tenant-creation-page pt-5"},f.createElement(p.Z,{centered:!0,className:"tenant-form-container"},f.createElement(p.Z.Column,{mobile:16,tablet:16,computer:6,largeScreen:6,widescreen:6},f.createElement(c.dn,{transparent:!0,className:"onboard-apps-animated-illustration",size:"tiny",width:50,colored:!0,icon:Z}),f.createElement(v.Z,{fluid:!0,centered:!0,className:"basic-card no-hover"},f.createElement(v.Z.Content,{className:"p-5"},se&&me,f.createElement(p.Z,{centered:!0},f.createElement(p.Z.Row,null,f.createElement("div",{className:"card-heading"},f.createElement(c.X6,{as:"h2"},R("extensions:manage.features.tenant.tenantCreationPrompt.heading")))),f.createElement(p.Z.Row,null,f.createElement("div",null,f.createElement(c.xv,{muted:!0,display:"inline"},R("extensions:manage.features.tenant.tenantCreationPrompt.subHeading1")),f.createElement(c.xv,{display:"inline"},f.createElement(_.Z,{name:null===(t=String(ae))||void 0===t?void 0:t.toLowerCase()}),ae," "),f.createElement(c.xv,{muted:!0,display:"inline"},R("extensions:manage.features.tenant.tenantCreationPrompt.subHeading7")),f.createElement(N.Z,{hidden:!0,fitted:!0}),f.createElement(c.xv,{muted:!0,display:"inline"},R("extensions:manage.features.tenant.tenantCreationPrompt.subHeading4")),f.createElement(N.Z,{hidden:!0,fitted:!0}),f.createElement(c.xv,{muted:!0,display:"inline"},R("extensions:manage.features.tenant.tenantCreationPrompt.subHeading5")),f.createElement(c.rU,{link:ie},R("extensions:manage.features.tenant.tenantCreationPrompt.subHeading2")),f.createElement(c.xv,{muted:!0,display:"inline"},R("extensions:manage.features.tenant.tenantCreationPrompt.subHeading6")),f.createElement(c.xv,{display:"inline"},f.createElement(_.Z,{name:null===(a=String(le))||void 0===a?void 0:a.toLowerCase()}),le," "),f.createElement(c.xv,{muted:!0,display:"inline"},R("extensions:manage.features.tenant.tenantCreationPrompt.subHeading7"))))),f.createElement(s.l0,{id:"create-tenant-form",onSubmit:function(e){te(e)},triggerSubmit:function(e){ue=e},uncontrolledForm:!1},f.createElement(s.gN.Input,{className:z||W===L.A.TENANT_URI_PLACEHOLDER||S&&!y?"":"error",ariaLabel:"Tenant Name",inputType:"resource_name",name:"tenantName",label:R("extensions:manage.features.tenant.wizards.addTenant.forms.fields.tenantName.label"),placeholder:R("extensions:manage.features.tenant.wizards.addTenant.forms.fields.tenantName.placeholder"),required:!0,listen:function(e){return t=e,x(!1),void((0,u.Z)(t)?(J(L.A.TENANT_URI_PLACEHOLDER),w(!1)):(J(t),w(fe(t))));var t},maxLength:L.A.FORM_FIELD_CONSTRAINTS.TENANT_NAME_MAX_LENGTH,minLength:L.A.FORM_FIELD_CONSTRAINTS.TENANT_NAME_MIN_LENGTH,validation:function(e){fe(e.toString())&&(k(!0),Ee(e.toString()))},width:16,onBlur:function(){return B(!1)},onFocus:function(){return B(!0)},"data-testid":"".concat(n,"-type-input")})),D?f.createElement(c.xv,{className:"tenant-uri-prefix"},"".concat(null!=ne?ne:"https://console.asgardeo.io","/").concat(null!=re?re:"t","/"),f.createElement(g.Z,{name:"circle notched",color:"grey",loading:!0})):f.createElement("span",null,"".concat(null!=ne?ne:"https://console.asgardeo.io","/").concat(null!=re?re:"t","/"),f.createElement("span",{className:"".concat(W!==L.A.TENANT_URI_PLACEHOLDER?S&&!y?"valid-tenant placeholder-uri-bold":"invalid-tenant placeholder-uri-bold":W==L.A.TENANT_URI_PLACEHOLDER?S&&!y?"valid-tenant placeholder-uri-bold":"placeholder-uri":void 0)},W,f.createElement(c.kW,{icon:"info circle",popup:!0},R("extensions:manage.features.tenant.wizards.addTenant.tooltips.message")))),f.createElement(p.Z,{className:"m-0 pt-2"},f.createElement(p.Z.Row,{className:"p-0"},W===L.A.TENANT_URI_PLACEHOLDER?f.createElement(g.Z,{name:"circle",color:"grey"}):W.match(L.A.FORM_FIELD_CONSTRAINTS.TENANT_NAME_FIRST_ALPHABET)?f.createElement(g.Z,{name:"check circle",color:"green"}):z?f.createElement(g.Z,{name:"circle",color:"grey"}):f.createElement(g.Z,{name:"remove circle",color:"red"}),f.createElement(c.xv,{muted:!0},"Must begin with an alphabet character")),f.createElement(p.Z.Row,{className:"p-0"},W===L.A.TENANT_URI_PLACEHOLDER?f.createElement(g.Z,{name:"circle",color:"grey"}):W.length>=L.A.FORM_FIELD_CONSTRAINTS.TENANT_NAME_MIN_LENGTH&&W.length<L.A.FORM_FIELD_CONSTRAINTS.TENANT_NAME_MAX_LENGTH?f.createElement(g.Z,{name:"check circle",color:"green"}):z?f.createElement(g.Z,{name:"circle",color:"grey"}):f.createElement(g.Z,{name:"remove circle",color:"red"}),f.createElement(c.xv,{muted:!0},"More than 4 characters, Less than 30 characters")),f.createElement(p.Z.Row,{className:"p-0"},W===L.A.TENANT_URI_PLACEHOLDER?f.createElement(g.Z,{name:"circle",color:"grey"}):W.match(L.A.FORM_FIELD_CONSTRAINTS.TENANT_NAME_ALPHANUMERIC)?f.createElement(g.Z,{name:"check circle",color:"green"}):z?f.createElement(g.Z,{name:"circle",color:"grey"}):f.createElement(g.Z,{name:"remove circle",color:"red"}),f.createElement(c.xv,{muted:!0},"Only consist of lowercase alphanumerics")),f.createElement(p.Z.Row,{className:"p-0"},W===L.A.TENANT_URI_PLACEHOLDER?f.createElement(g.Z,{name:"circle",color:"grey"}):!S||D||y?z?f.createElement(g.Z,{name:"circle",color:"grey"}):f.createElement(g.Z,{name:"remove circle",color:"red"}):f.createElement(g.Z,{name:"check circle",color:"green"}),f.createElement(c.xv,{muted:!0},"Must be unique"))),I&&f.createElement(c.pO,{text:X})),f.createElement(v.Z.Content,null,f.createElement(p.Z,{className:"pr-5 pl-5"},f.createElement(p.Z.Row,{column:1},f.createElement(p.Z.Column,{mobile:8,tablet:8,computer:8},f.createElement(c.Qj,{floated:"left",onClick:function(){de.publish("console-click-logout"),r.m.push(window.AppUtils.getConfig().routes.logout)},disabled:I,"data-testid":"".concat(n,"-cancel-button")},R("common:logout"))),f.createElement(p.Z.Column,{mobile:8,tablet:8,computer:8},f.createElement(c.KM,{floated:"right",onClick:function(){ue(),K(!0)},loading:I,"data-testid":"".concat(n,"-create-button"),disabled:I||D},R("common:create"))))))))))};x.defaultProps={"data-testid":"create-tenant-page"};const M=x}}]);